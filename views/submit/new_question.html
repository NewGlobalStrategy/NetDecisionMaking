{{extend 'layout.html'}}

<h1>{{=heading}}</h1>

{{=form}}

{{block right_sidebar}}

{{include 'sidebar.html'}}

{{end}}

<script>

function showcountryValue(newValue)
{
	document.getElementById("question_country").value=newValue;
    jQuery('#subdivopt').empty();
    ajax('{{=URL('submit','subdivn')}}', ['country'], 'subdivopt');
    document.getElementById("question_subdivision").value="Unspecified";
}

function showsubdivValue(newValue)
{
	document.getElementById("question_subdivision").value=newValue;
}


jQuery(document).ready(function(){
   jQuery('#question_continent__row').hide();
   jQuery('#question_country__row').hide();
   jQuery('#question_subdivision__row').hide();
   jQuery('#question_country__row .w2p_fc').html('<select id="countryopt" name="countryopt" onchange="showcountryValue(this.value)"> <option value="Unspecified">Unspecified</option>   </select>');
   jQuery('#question_subdivision__row .w2p_fc').html('<select id="subdivopt" name="subdivopt" onchange="showsubdivValue(this.value)"> <option value="Unspecified">Unspecified</option> </select>');
   jQuery('#question_numanswers__row').nextAll().eq(2).hide();
   jQuery('#question_numanswers__row').nextAll().eq(3).hide();
   jQuery('#question_numanswers__row').nextAll().eq(4).hide();
   jQuery('#question_numanswers__row').nextAll().eq(5).hide();
   jQuery('#question_numanswers__row').nextAll().eq(6).hide();
   jQuery('#question_numanswers__row').nextAll().eq(7).hide();
   jQuery('#question_numanswers__row').nextAll().eq(8).hide();
   jQuery('#question_numanswers__row').nextAll().eq(9).hide();
   jQuery('#question_numanswers').change(function(){
            if(jQuery('#question_numanswers').val()>=3)
               jQuery('#question_numanswers__row').nextAll().eq(2).show();
	        if(jQuery('#question_numanswers').val()>=4)
               jQuery('#question_numanswers__row').nextAll().eq(3).show();
            if(jQuery('#question_numanswers').val()>=5)
               jQuery('#question_numanswers__row').nextAll().eq(4).show();
            if(jQuery('#question_numanswers').val()>=6)
               jQuery('#question_numanswers__row').nextAll().eq(5).show();
            if(jQuery('#question_numanswers').val()>=7)
               jQuery('#question_numanswers__row').nextAll().eq(6).show();
            if(jQuery('#question_numanswers').val()>=8)
               jQuery('#question_numanswers__row').nextAll().eq(7).show();
            if(jQuery('#question_numanswers').val()>=9)
               jQuery('#question_numanswers__row').nextAll().eq(8).show();
            if(jQuery('#question_numanswers').val()>=10)
               jQuery('#question_numanswers__row').nextAll().eq(9).show();});
    jQuery('#question_activescope').change(function(){
            if(jQuery('#question_activescope option:selected').text()=='2 Continental')
            {jQuery('#question_continent__row').show()
            jQuery('#question_country__row').hide()
            jQuery('#question_subdivision__row').hide()};
            if(jQuery('#question_activescope option:selected').text()=='1 Global')
            {jQuery('#question_continent __row').hide()
            jQuery('#question_country__row').hide()
            jQuery('#question_subdivision__row').hide()};
            if(jQuery('#question_activescope option:selected').text()=='3 National')
            {jQuery('#question_continent__row').show();
            jQuery('#question_country__row').show();
            jQuery('#question_country__row .w2p_fw').hide();
            jQuery('#question_subdivision__row').hide()};
            if(jQuery('#question_activescope option:selected').text()=='4 Local')
            {jQuery('#question_continent__row').show()
            jQuery('#question_country__row').show()
            jQuery('#question_country__row .w2p_fw').hide();
            jQuery('#question_subdivision__row').show();
            jQuery('#question_country__row .w2p_fw').hide();
            jQuery('#question_subdivision__row .w2p_fw').hide();};});

            jQuery('#question_continent ').change(function(){            
            jQuery('#countryopt').empty();
            ajax('{{=URL('submit','country')}}', ['continent'], 'countryopt');});

            jQuery('#question_country').change(function(){
            jQuery('#subdivopt').empty();
            ajax('{{=URL('submit','subdivn')}}', ['country'], 'subdivopt');});


});

</script>
