




<!DOCTYPE html>
<html class="   ">
  <head prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb# object: http://ogp.me/ns/object# article: http://ogp.me/ns/article# profile: http://ogp.me/ns/profile#">
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    
    
    <title>joint/dist/joint.nojquery.min.js at master · DavidDurman/joint · GitHub</title>
    <link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="GitHub" />
    <link rel="fluid-icon" href="https://github.com/fluidicon.png" title="GitHub" />
    <link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-114.png" />
    <link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114.png" />
    <link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-144.png" />
    <link rel="apple-touch-icon" sizes="144x144" href="/apple-touch-icon-144.png" />
    <meta property="fb:app_id" content="1401488693436528"/>

      <meta content="@github" name="twitter:site" /><meta content="summary" name="twitter:card" /><meta content="DavidDurman/joint" name="twitter:title" /><meta content="joint - JavaScript diagramming library" name="twitter:description" /><meta content="https://avatars2.githubusercontent.com/u/125717?s=400" name="twitter:image:src" />
<meta content="GitHub" property="og:site_name" /><meta content="object" property="og:type" /><meta content="https://avatars2.githubusercontent.com/u/125717?s=400" property="og:image" /><meta content="DavidDurman/joint" property="og:title" /><meta content="https://github.com/DavidDurman/joint" property="og:url" /><meta content="joint - JavaScript diagramming library" property="og:description" />

    <link rel="assets" href="https://assets-cdn.github.com/">
    <link rel="conduit-xhr" href="https://ghconduit.com:25035/">
    <link rel="xhr-socket" href="/_sockets" />

    <meta name="msapplication-TileImage" content="/windows-tile.png" />
    <meta name="msapplication-TileColor" content="#ffffff" />
    <meta name="selected-link" value="repo_source" data-pjax-transient />
      <meta name="google-analytics" content="UA-3769691-2">

    <meta content="collector.githubapp.com" name="octolytics-host" /><meta content="collector-cdn.github.com" name="octolytics-script-host" /><meta content="github" name="octolytics-app-id" /><meta content="5ADA043B:3039:5DCA9E3:537FB958" name="octolytics-dimension-request_id" />
    

    
    
    <link rel="icon" type="image/x-icon" href="https://assets-cdn.github.com/favicon.ico" />

    <meta content="authenticity_token" name="csrf-param" />
<meta content="hGhBBbynclbie55yzzy6cV3uBH6iHsDZZ6QkZ/MBzy9atDBRl2DDV1Ey1Gm2KKCLBTCXz8w8gvfarOqEMowRCQ==" name="csrf-token" />

    <link href="https://assets-cdn.github.com/assets/github-a5b1ed2a59619f83449f49f1af15d646a0a9d0fd.css" media="all" rel="stylesheet" type="text/css" />
    <link href="https://assets-cdn.github.com/assets/github2-30ee11d3701e822d678d80383171fa63a23f9577.css" media="all" rel="stylesheet" type="text/css" />
    


    <meta http-equiv="x-pjax-version" content="296d4a7783891e3920ce292d67085538">

      
  <meta name="description" content="joint - JavaScript diagramming library" />

  <meta content="125717" name="octolytics-dimension-user_id" /><meta content="DavidDurman" name="octolytics-dimension-user_login" /><meta content="303975" name="octolytics-dimension-repository_id" /><meta content="DavidDurman/joint" name="octolytics-dimension-repository_nwo" /><meta content="true" name="octolytics-dimension-repository_public" /><meta content="false" name="octolytics-dimension-repository_is_fork" /><meta content="303975" name="octolytics-dimension-repository_network_root_id" /><meta content="DavidDurman/joint" name="octolytics-dimension-repository_network_root_nwo" />
  <link href="https://github.com/DavidDurman/joint/commits/master.atom" rel="alternate" title="Recent Commits to joint:master" type="application/atom+xml" />

  </head>


  <body class="logged_out  env-production windows vis-public page-blob">
    <a href="#start-of-content" tabindex="1" class="accessibility-aid js-skip-to-content">Skip to content</a>
    <div class="wrapper">
      
      
      
      


      
      <div class="header header-logged-out">
  <div class="container clearfix">

    <a class="header-logo-wordmark" href="https://github.com/">
      <span class="mega-octicon octicon-logo-github"></span>
    </a>

    <div class="header-actions">
        <a class="button primary" href="/join">Sign up</a>
      <a class="button signin" href="/login?return_to=%2FDavidDurman%2Fjoint%2Fblob%2Fmaster%2Fdist%2Fjoint.nojquery.min.js">Sign in</a>
    </div>

    <div class="command-bar js-command-bar  in-repository">

      <ul class="top-nav">
          <li class="explore"><a href="/explore">Explore</a></li>
        <li class="features"><a href="/features">Features</a></li>
          <li class="enterprise"><a href="https://enterprise.github.com/">Enterprise</a></li>
          <li class="blog"><a href="/blog">Blog</a></li>
      </ul>
        <form accept-charset="UTF-8" action="/search" class="command-bar-form" id="top_search_form" method="get">

<div class="commandbar">
  <span class="message"></span>
  <input type="text" data-hotkey="s, /" name="q" id="js-command-bar-field" placeholder="Search or type a command" tabindex="1" autocapitalize="off"
    
    
      data-repo="DavidDurman/joint"
      data-branch="master"
      data-sha="247d3a9f25cdf25c00ee11d614c539d3ec3c9289"
  >
  <div class="display hidden"></div>
</div>

    <input type="hidden" name="nwo" value="DavidDurman/joint" />

    <div class="select-menu js-menu-container js-select-menu search-context-select-menu">
      <span class="minibutton select-menu-button js-menu-target" role="button" aria-haspopup="true">
        <span class="js-select-button">This repository</span>
      </span>

      <div class="select-menu-modal-holder js-menu-content js-navigation-container" aria-hidden="true">
        <div class="select-menu-modal">

          <div class="select-menu-item js-navigation-item js-this-repository-navigation-item selected">
            <span class="select-menu-item-icon octicon octicon-check"></span>
            <input type="radio" class="js-search-this-repository" name="search_target" value="repository" checked="checked" />
            <div class="select-menu-item-text js-select-button-text">This repository</div>
          </div> <!-- /.select-menu-item -->

          <div class="select-menu-item js-navigation-item js-all-repositories-navigation-item">
            <span class="select-menu-item-icon octicon octicon-check"></span>
            <input type="radio" name="search_target" value="global" />
            <div class="select-menu-item-text js-select-button-text">All repositories</div>
          </div> <!-- /.select-menu-item -->

        </div>
      </div>
    </div>

  <span class="help tooltipped tooltipped-s" aria-label="Show command bar help">
    <span class="octicon octicon-question"></span>
  </span>


  <input type="hidden" name="ref" value="cmdform">

</form>
    </div>

  </div>
</div>



      <div id="start-of-content" class="accessibility-aid"></div>
          <div class="site" itemscope itemtype="http://schema.org/WebPage">
    <div id="js-flash-container">
      
    </div>
    <div class="pagehead repohead instapaper_ignore readability-menu">
      <div class="container">
        

<ul class="pagehead-actions">


  <li>
    <a href="/login?return_to=%2FDavidDurman%2Fjoint"
    class="minibutton with-count star-button tooltipped tooltipped-n"
    aria-label="You must be signed in to star a repository" rel="nofollow">
    <span class="octicon octicon-star"></span>Star
  </a>

    <a class="social-count js-social-count" href="/DavidDurman/joint/stargazers">
      891
    </a>

  </li>

    <li>
      <a href="/login?return_to=%2FDavidDurman%2Fjoint"
        class="minibutton with-count js-toggler-target fork-button tooltipped tooltipped-n"
        aria-label="You must be signed in to fork a repository" rel="nofollow">
        <span class="octicon octicon-repo-forked"></span>Fork
      </a>
      <a href="/DavidDurman/joint/network" class="social-count">
        174
      </a>
    </li>
</ul>

        <h1 itemscope itemtype="http://data-vocabulary.org/Breadcrumb" class="entry-title public">
          <span class="repo-label"><span>public</span></span>
          <span class="mega-octicon octicon-repo"></span>
          <span class="author"><a href="/DavidDurman" class="url fn" itemprop="url" rel="author"><span itemprop="title">DavidDurman</span></a></span><!--
       --><span class="path-divider">/</span><!--
       --><strong><a href="/DavidDurman/joint" class="js-current-repository js-repo-home-link">joint</a></strong>

          <span class="page-context-loader">
            <img alt="" height="16" src="https://assets-cdn.github.com/images/spinners/octocat-spinner-32.gif" width="16" />
          </span>

        </h1>
      </div><!-- /.container -->
    </div><!-- /.repohead -->

    <div class="container">
      <div class="repository-with-sidebar repo-container new-discussion-timeline js-new-discussion-timeline  ">
        <div class="repository-sidebar clearfix">
            

<div class="sunken-menu vertical-right repo-nav js-repo-nav js-repository-container-pjax js-octicon-loaders">
  <div class="sunken-menu-contents">
    <ul class="sunken-menu-group">
      <li class="tooltipped tooltipped-w" aria-label="Code">
        <a href="/DavidDurman/joint" aria-label="Code" class="selected js-selected-navigation-item sunken-menu-item" data-hotkey="g c" data-pjax="true" data-selected-links="repo_source repo_downloads repo_commits repo_releases repo_tags repo_branches /DavidDurman/joint">
          <span class="octicon octicon-code"></span> <span class="full-word">Code</span>
          <img alt="" class="mini-loader" height="16" src="https://assets-cdn.github.com/images/spinners/octocat-spinner-32.gif" width="16" />
</a>      </li>

        <li class="tooltipped tooltipped-w" aria-label="Issues">
          <a href="/DavidDurman/joint/issues" aria-label="Issues" class="js-selected-navigation-item sunken-menu-item js-disable-pjax" data-hotkey="g i" data-selected-links="repo_issues /DavidDurman/joint/issues">
            <span class="octicon octicon-issue-opened"></span> <span class="full-word">Issues</span>
            <span class='counter'>20</span>
            <img alt="" class="mini-loader" height="16" src="https://assets-cdn.github.com/images/spinners/octocat-spinner-32.gif" width="16" />
</a>        </li>

      <li class="tooltipped tooltipped-w" aria-label="Pull Requests">
        <a href="/DavidDurman/joint/pulls" aria-label="Pull Requests" class="js-selected-navigation-item sunken-menu-item js-disable-pjax" data-hotkey="g p" data-selected-links="repo_pulls /DavidDurman/joint/pulls">
            <span class="octicon octicon-git-pull-request"></span> <span class="full-word">Pull Requests</span>
            <span class='counter'>1</span>
            <img alt="" class="mini-loader" height="16" src="https://assets-cdn.github.com/images/spinners/octocat-spinner-32.gif" width="16" />
</a>      </li>


    </ul>
    <div class="sunken-menu-separator"></div>
    <ul class="sunken-menu-group">

      <li class="tooltipped tooltipped-w" aria-label="Pulse">
        <a href="/DavidDurman/joint/pulse" aria-label="Pulse" class="js-selected-navigation-item sunken-menu-item" data-pjax="true" data-selected-links="pulse /DavidDurman/joint/pulse">
          <span class="octicon octicon-pulse"></span> <span class="full-word">Pulse</span>
          <img alt="" class="mini-loader" height="16" src="https://assets-cdn.github.com/images/spinners/octocat-spinner-32.gif" width="16" />
</a>      </li>

      <li class="tooltipped tooltipped-w" aria-label="Graphs">
        <a href="/DavidDurman/joint/graphs" aria-label="Graphs" class="js-selected-navigation-item sunken-menu-item" data-pjax="true" data-selected-links="repo_graphs repo_contributors /DavidDurman/joint/graphs">
          <span class="octicon octicon-graph"></span> <span class="full-word">Graphs</span>
          <img alt="" class="mini-loader" height="16" src="https://assets-cdn.github.com/images/spinners/octocat-spinner-32.gif" width="16" />
</a>      </li>

      <li class="tooltipped tooltipped-w" aria-label="Network">
        <a href="/DavidDurman/joint/network" aria-label="Network" class="js-selected-navigation-item sunken-menu-item js-disable-pjax" data-selected-links="repo_network /DavidDurman/joint/network">
          <span class="octicon octicon-repo-forked"></span> <span class="full-word">Network</span>
          <img alt="" class="mini-loader" height="16" src="https://assets-cdn.github.com/images/spinners/octocat-spinner-32.gif" width="16" />
</a>      </li>
    </ul>


  </div>
</div>

              <div class="only-with-full-nav">
                

  

<div class="clone-url open"
  data-protocol-type="http"
  data-url="/users/set_protocol?protocol_selector=http&amp;protocol_type=clone">
  <h3><strong>HTTPS</strong> clone URL</h3>
  <div class="clone-url-box">
    <input type="text" class="clone js-url-field"
           value="https://github.com/DavidDurman/joint.git" readonly="readonly">
    <span class="url-box-clippy">
    <button aria-label="copy to clipboard" class="js-zeroclipboard minibutton zeroclipboard-button" data-clipboard-text="https://github.com/DavidDurman/joint.git" data-copied-hint="copied!" type="button"><span class="octicon octicon-clippy"></span></button>
    </span>
  </div>
</div>

  

<div class="clone-url "
  data-protocol-type="subversion"
  data-url="/users/set_protocol?protocol_selector=subversion&amp;protocol_type=clone">
  <h3><strong>Subversion</strong> checkout URL</h3>
  <div class="clone-url-box">
    <input type="text" class="clone js-url-field"
           value="https://github.com/DavidDurman/joint" readonly="readonly">
    <span class="url-box-clippy">
    <button aria-label="copy to clipboard" class="js-zeroclipboard minibutton zeroclipboard-button" data-clipboard-text="https://github.com/DavidDurman/joint" data-copied-hint="copied!" type="button"><span class="octicon octicon-clippy"></span></button>
    </span>
  </div>
</div>


<p class="clone-options">You can clone with
      <a href="#" class="js-clone-selector" data-protocol="http">HTTPS</a>
      or <a href="#" class="js-clone-selector" data-protocol="subversion">Subversion</a>.
  <span class="help tooltipped tooltipped-n" aria-label="Get help on which URL is right for you.">
    <a href="https://help.github.com/articles/which-remote-url-should-i-use">
    <span class="octicon octicon-question"></span>
    </a>
  </span>
</p>


  <a href="http://windows.github.com" class="minibutton sidebar-button" title="Save DavidDurman/joint to your computer and use it in GitHub Desktop." aria-label="Save DavidDurman/joint to your computer and use it in GitHub Desktop.">
    <span class="octicon octicon-device-desktop"></span>
    Clone in Desktop
  </a>

                <a href="/DavidDurman/joint/archive/master.zip"
                   class="minibutton sidebar-button"
                   aria-label="Download DavidDurman/joint as a zip file"
                   title="Download DavidDurman/joint as a zip file"
                   rel="nofollow">
                  <span class="octicon octicon-cloud-download"></span>
                  Download ZIP
                </a>
              </div>
        </div><!-- /.repository-sidebar -->

        <div id="js-repo-pjax-container" class="repository-content context-loader-container" data-pjax-container>
          


<a href="/DavidDurman/joint/blob/26b62f37b78c9e0e2dba3fb22b969be5352721a6/dist/joint.nojquery.min.js" class="hidden js-permalink-shortcut" data-hotkey="y">Permalink</a>

<!-- blob contrib key: blob_contributors:v21:21c226135a9ca2a941b916f7a9557a16 -->

<p title="This is a placeholder element" class="js-history-link-replace hidden"></p>

<a href="/DavidDurman/joint/find/master" data-pjax data-hotkey="t" class="js-show-file-finder" style="display:none">Show File Finder</a>

<div class="file-navigation">
  

<div class="select-menu js-menu-container js-select-menu" >
  <span class="minibutton select-menu-button js-menu-target" data-hotkey="w"
    data-master-branch="master"
    data-ref="master"
    role="button" aria-label="Switch branches or tags" tabindex="0" aria-haspopup="true">
    <span class="octicon octicon-git-branch"></span>
    <i>branch:</i>
    <span class="js-select-button">master</span>
  </span>

  <div class="select-menu-modal-holder js-menu-content js-navigation-container" data-pjax aria-hidden="true">

    <div class="select-menu-modal">
      <div class="select-menu-header">
        <span class="select-menu-title">Switch branches/tags</span>
        <span class="octicon octicon-x js-menu-close"></span>
      </div> <!-- /.select-menu-header -->

      <div class="select-menu-filters">
        <div class="select-menu-text-filter">
          <input type="text" aria-label="Filter branches/tags" id="context-commitish-filter-field" class="js-filterable-field js-navigation-enable" placeholder="Filter branches/tags">
        </div>
        <div class="select-menu-tabs">
          <ul>
            <li class="select-menu-tab">
              <a href="#" data-tab-filter="branches" class="js-select-menu-tab">Branches</a>
            </li>
            <li class="select-menu-tab">
              <a href="#" data-tab-filter="tags" class="js-select-menu-tab">Tags</a>
            </li>
          </ul>
        </div><!-- /.select-menu-tabs -->
      </div><!-- /.select-menu-filters -->

      <div class="select-menu-list select-menu-tab-bucket js-select-menu-tab-bucket" data-tab-filter="branches">

        <div data-filterable-for="context-commitish-filter-field" data-filterable-type="substring">


            <div class="select-menu-item js-navigation-item ">
              <span class="select-menu-item-icon octicon octicon-check"></span>
              <a href="/DavidDurman/joint/blob/app/dist/joint.nojquery.min.js"
                 data-name="app"
                 data-skip-pjax="true"
                 rel="nofollow"
                 class="js-navigation-open select-menu-item-text js-select-button-text css-truncate-target"
                 title="app">app</a>
            </div> <!-- /.select-menu-item -->
            <div class="select-menu-item js-navigation-item ">
              <span class="select-menu-item-icon octicon octicon-check"></span>
              <a href="/DavidDurman/joint/blob/erd/dist/joint.nojquery.min.js"
                 data-name="erd"
                 data-skip-pjax="true"
                 rel="nofollow"
                 class="js-navigation-open select-menu-item-text js-select-button-text css-truncate-target"
                 title="erd">erd</a>
            </div> <!-- /.select-menu-item -->
            <div class="select-menu-item js-navigation-item ">
              <span class="select-menu-item-icon octicon octicon-check"></span>
              <a href="/DavidDurman/joint/blob/gh-pages/dist/joint.nojquery.min.js"
                 data-name="gh-pages"
                 data-skip-pjax="true"
                 rel="nofollow"
                 class="js-navigation-open select-menu-item-text js-select-button-text css-truncate-target"
                 title="gh-pages">gh-pages</a>
            </div> <!-- /.select-menu-item -->
            <div class="select-menu-item js-navigation-item ">
              <span class="select-menu-item-icon octicon octicon-check"></span>
              <a href="/DavidDurman/joint/blob/layer/dist/joint.nojquery.min.js"
                 data-name="layer"
                 data-skip-pjax="true"
                 rel="nofollow"
                 class="js-navigation-open select-menu-item-text js-select-button-text css-truncate-target"
                 title="layer">layer</a>
            </div> <!-- /.select-menu-item -->
            <div class="select-menu-item js-navigation-item selected">
              <span class="select-menu-item-icon octicon octicon-check"></span>
              <a href="/DavidDurman/joint/blob/master/dist/joint.nojquery.min.js"
                 data-name="master"
                 data-skip-pjax="true"
                 rel="nofollow"
                 class="js-navigation-open select-menu-item-text js-select-button-text css-truncate-target"
                 title="master">master</a>
            </div> <!-- /.select-menu-item -->
            <div class="select-menu-item js-navigation-item ">
              <span class="select-menu-item-icon octicon octicon-check"></span>
              <a href="/DavidDurman/joint/blob/multilables/dist/joint.nojquery.min.js"
                 data-name="multilables"
                 data-skip-pjax="true"
                 rel="nofollow"
                 class="js-navigation-open select-menu-item-text js-select-button-text css-truncate-target"
                 title="multilables">multilables</a>
            </div> <!-- /.select-menu-item -->
        </div>

          <div class="select-menu-no-results">Nothing to show</div>
      </div> <!-- /.select-menu-list -->

      <div class="select-menu-list select-menu-tab-bucket js-select-menu-tab-bucket" data-tab-filter="tags">
        <div data-filterable-for="context-commitish-filter-field" data-filterable-type="substring">


            <div class="select-menu-item js-navigation-item ">
              <span class="select-menu-item-icon octicon octicon-check"></span>
              <a href="/DavidDurman/joint/tree/v0.9.0/dist/joint.nojquery.min.js"
                 data-name="v0.9.0"
                 data-skip-pjax="true"
                 rel="nofollow"
                 class="js-navigation-open select-menu-item-text js-select-button-text css-truncate-target"
                 title="v0.9.0">v0.9.0</a>
            </div> <!-- /.select-menu-item -->
            <div class="select-menu-item js-navigation-item ">
              <span class="select-menu-item-icon octicon octicon-check"></span>
              <a href="/DavidDurman/joint/tree/v0.8.1/dist/joint.nojquery.min.js"
                 data-name="v0.8.1"
                 data-skip-pjax="true"
                 rel="nofollow"
                 class="js-navigation-open select-menu-item-text js-select-button-text css-truncate-target"
                 title="v0.8.1">v0.8.1</a>
            </div> <!-- /.select-menu-item -->
            <div class="select-menu-item js-navigation-item ">
              <span class="select-menu-item-icon octicon octicon-check"></span>
              <a href="/DavidDurman/joint/tree/v0.8.0/dist/joint.nojquery.min.js"
                 data-name="v0.8.0"
                 data-skip-pjax="true"
                 rel="nofollow"
                 class="js-navigation-open select-menu-item-text js-select-button-text css-truncate-target"
                 title="v0.8.0">v0.8.0</a>
            </div> <!-- /.select-menu-item -->
            <div class="select-menu-item js-navigation-item ">
              <span class="select-menu-item-icon octicon octicon-check"></span>
              <a href="/DavidDurman/joint/tree/v0.7.0/dist/joint.nojquery.min.js"
                 data-name="v0.7.0"
                 data-skip-pjax="true"
                 rel="nofollow"
                 class="js-navigation-open select-menu-item-text js-select-button-text css-truncate-target"
                 title="v0.7.0">v0.7.0</a>
            </div> <!-- /.select-menu-item -->
            <div class="select-menu-item js-navigation-item ">
              <span class="select-menu-item-icon octicon octicon-check"></span>
              <a href="/DavidDurman/joint/tree/v0.6.4/dist/joint.nojquery.min.js"
                 data-name="v0.6.4"
                 data-skip-pjax="true"
                 rel="nofollow"
                 class="js-navigation-open select-menu-item-text js-select-button-text css-truncate-target"
                 title="v0.6.4">v0.6.4</a>
            </div> <!-- /.select-menu-item -->
            <div class="select-menu-item js-navigation-item ">
              <span class="select-menu-item-icon octicon octicon-check"></span>
              <a href="/DavidDurman/joint/tree/v0.6.3/dist/joint.nojquery.min.js"
                 data-name="v0.6.3"
                 data-skip-pjax="true"
                 rel="nofollow"
                 class="js-navigation-open select-menu-item-text js-select-button-text css-truncate-target"
                 title="v0.6.3">v0.6.3</a>
            </div> <!-- /.select-menu-item -->
            <div class="select-menu-item js-navigation-item ">
              <span class="select-menu-item-icon octicon octicon-check"></span>
              <a href="/DavidDurman/joint/tree/v0.6.1/dist/joint.nojquery.min.js"
                 data-name="v0.6.1"
                 data-skip-pjax="true"
                 rel="nofollow"
                 class="js-navigation-open select-menu-item-text js-select-button-text css-truncate-target"
                 title="v0.6.1">v0.6.1</a>
            </div> <!-- /.select-menu-item -->
            <div class="select-menu-item js-navigation-item ">
              <span class="select-menu-item-icon octicon octicon-check"></span>
              <a href="/DavidDurman/joint/tree/v0.4.1/dist/joint.nojquery.min.js"
                 data-name="v0.4.1"
                 data-skip-pjax="true"
                 rel="nofollow"
                 class="js-navigation-open select-menu-item-text js-select-button-text css-truncate-target"
                 title="v0.4.1">v0.4.1</a>
            </div> <!-- /.select-menu-item -->
            <div class="select-menu-item js-navigation-item ">
              <span class="select-menu-item-icon octicon octicon-check"></span>
              <a href="/DavidDurman/joint/tree/v0.4/dist/joint.nojquery.min.js"
                 data-name="v0.4"
                 data-skip-pjax="true"
                 rel="nofollow"
                 class="js-navigation-open select-menu-item-text js-select-button-text css-truncate-target"
                 title="v0.4">v0.4</a>
            </div> <!-- /.select-menu-item -->
        </div>

        <div class="select-menu-no-results">Nothing to show</div>
      </div> <!-- /.select-menu-list -->

    </div> <!-- /.select-menu-modal -->
  </div> <!-- /.select-menu-modal-holder -->
</div> <!-- /.select-menu -->

  <div class="breadcrumb">
    <span class='repo-root js-repo-root'><span itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb"><a href="/DavidDurman/joint" data-branch="master" data-direction="back" data-pjax="true" itemscope="url"><span itemprop="title">joint</span></a></span></span><span class="separator"> / </span><span itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb"><a href="/DavidDurman/joint/tree/master/dist" data-branch="master" data-direction="back" data-pjax="true" itemscope="url"><span itemprop="title">dist</span></a></span><span class="separator"> / </span><strong class="final-path">joint.nojquery.min.js</strong> <button aria-label="copy to clipboard" class="js-zeroclipboard minibutton zeroclipboard-button" data-clipboard-text="dist/joint.nojquery.min.js" data-copied-hint="copied!" type="button"><span class="octicon octicon-clippy"></span></button>
  </div>
</div>


  <div class="commit file-history-tease">
      <img class="main-avatar" height="24" src="https://0.gravatar.com/avatar/6b58c2975950c692aaa7ef0986be8725?d=https%3A%2F%2Fgithub.com%2Fimages%2Fgravatars%2Fgravatar-user-420.png&amp;r=x&amp;s=140" width="24" />
      <span class="author"><span>David Durman</span></span>
      <time datetime="2014-05-14T08:59:10+02:00" is="relative-time" title-format="%Y-%m-%d %H:%M:%S %z" title="2014-05-14 08:59:10 +0200">May 14, 2014</time>
      <div class="commit-title">
          <a href="/DavidDurman/joint/commit/3edfc197690c2852a63a027922172a2f4456a873" class="message" data-pjax="true" title="make dist">make dist</a>
      </div>

    <div class="participation">
      <p class="quickstat"><a href="#blob_contributors_box" rel="facebox"><strong>2</strong>  contributors</a></p>
          <a class="avatar tooltipped tooltipped-s" aria-label="kumilingus" href="/DavidDurman/joint/commits/master/dist/joint.nojquery.min.js?author=kumilingus"><img alt="Roman Bruckner" class=" js-avatar" data-user="3967880" height="20" src="https://avatars2.githubusercontent.com/u/3967880?s=140" width="20" /></a>
    <a class="avatar tooltipped tooltipped-s" aria-label="RapSolutions" href="/DavidDurman/joint/commits/master/dist/joint.nojquery.min.js?author=RapSolutions"><img alt="Ronnie Rap" class=" js-avatar" data-user="1546947" height="20" src="https://avatars1.githubusercontent.com/u/1546947?s=140" width="20" /></a>


    </div>
    <div id="blob_contributors_box" style="display:none">
      <h2 class="facebox-header">Users who have contributed to this file</h2>
      <ul class="facebox-user-list">
          <li class="facebox-user-list-item">
            <img alt="Roman Bruckner" class=" js-avatar" data-user="3967880" height="24" src="https://avatars2.githubusercontent.com/u/3967880?s=140" width="24" />
            <a href="/kumilingus">kumilingus</a>
          </li>
          <li class="facebox-user-list-item">
            <img alt="Ronnie Rap" class=" js-avatar" data-user="1546947" height="24" src="https://avatars1.githubusercontent.com/u/1546947?s=140" width="24" />
            <a href="/RapSolutions">RapSolutions</a>
          </li>
      </ul>
    </div>
  </div>

<div class="file-box">
  <div class="file">
    <div class="meta clearfix">
      <div class="info file-name">
        <span class="icon"><b class="octicon octicon-file-text"></b></span>
        <span class="mode" title="File Mode">file</span>
        <span class="meta-divider"></span>
          <span>11 lines (9 sloc)</span>
          <span class="meta-divider"></span>
        <span>127.104 kb</span>
      </div>
      <div class="actions">
        <div class="button-group">
            <a class="minibutton tooltipped tooltipped-w"
               href="http://windows.github.com" aria-label="Open this file in GitHub for Windows">
                <span class="octicon octicon-device-desktop"></span> Open
            </a>
              <a class="minibutton disabled tooltipped tooltipped-w" href="#"
                 aria-label="You must be signed in to make or propose changes">Edit</a>
          <a href="/DavidDurman/joint/raw/master/dist/joint.nojquery.min.js" class="button minibutton " id="raw-url">Raw</a>
            <a href="/DavidDurman/joint/blame/master/dist/joint.nojquery.min.js" class="button minibutton js-update-url-with-hash">Blame</a>
          <a href="/DavidDurman/joint/commits/master/dist/joint.nojquery.min.js" class="button minibutton " rel="nofollow">History</a>
        </div><!-- /.button-group -->
          <a class="minibutton danger disabled empty-icon tooltipped tooltipped-w" href="#"
             aria-label="You must be signed in to make or propose changes">
          Delete
        </a>
      </div><!-- /.actions -->
    </div>
        <div class="blob-wrapper data type-javascript js-blob-data">
        <table class="file-code file-diff tab-size-8">
          <tr class="file-code-line">
            <td class="blob-line-nums">
              <span id="L1" rel="#L1">1</span>
<span id="L2" rel="#L2">2</span>
<span id="L3" rel="#L3">3</span>
<span id="L4" rel="#L4">4</span>
<span id="L5" rel="#L5">5</span>
<span id="L6" rel="#L6">6</span>
<span id="L7" rel="#L7">7</span>
<span id="L8" rel="#L8">8</span>
<span id="L9" rel="#L9">9</span>
<span id="L10" rel="#L10">10</span>
<span id="L11" rel="#L11">11</span>

            </td>
            <td class="blob-line-code"><div class="code-body highlight"><pre><div class='line' id='LC1'>/*! JointJS v0.9.0 - JavaScript diagramming library  2014-05-14 </div><div class='line' id='LC2'><br/></div><div class='line' id='LC3'><br/></div><div class='line' id='LC4'>This Source Code Form is subject to the terms of the Mozilla Public</div><div class='line' id='LC5'>License, v. 2.0. If a copy of the MPL was not distributed with this</div><div class='line' id='LC6'>file, You can obtain one at http://mozilla.org/MPL/2.0/.</div><div class='line' id='LC7'>&nbsp;*/</div><div class='line' id='LC8'>if(function(){function a(a,b,c){for(var d=(c||0)-1,e=a?a.length:0;++d&lt;e;)if(a[d]===b)return d;return-1}function b(b,c){var d=typeof c;if(b=b.cache,&quot;boolean&quot;==d||null==c)return b[c]?0:-1;&quot;number&quot;!=d&amp;&amp;&quot;string&quot;!=d&amp;&amp;(d=&quot;object&quot;);var e=&quot;number&quot;==d?c:s+c;return b=(b=b[d])&amp;&amp;b[e],&quot;object&quot;==d?b&amp;&amp;a(b,c)&gt;-1?0:-1:b?0:-1}function c(a){var b=this.cache,c=typeof a;if(&quot;boolean&quot;==c||null==a)b[a]=!0;else{&quot;number&quot;!=c&amp;&amp;&quot;string&quot;!=c&amp;&amp;(c=&quot;object&quot;);var d=&quot;number&quot;==c?a:s+a,e=b[c]||(b[c]={});&quot;object&quot;==c?(e[d]||(e[d]=[])).push(a):e[d]=!0}}function d(a){return a.charCodeAt(0)}function e(a,b){var c=a.criteria,d=b.criteria;if(c!==d){if(c&gt;d||&quot;undefined&quot;==typeof c)return 1;if(d&gt;c||&quot;undefined&quot;==typeof d)return-1}return a.index-b.index}function f(a){var b=-1,d=a.length,e=a[0],f=a[0|d/2],g=a[d-1];if(e&amp;&amp;&quot;object&quot;==typeof e&amp;&amp;f&amp;&amp;&quot;object&quot;==typeof f&amp;&amp;g&amp;&amp;&quot;object&quot;==typeof g)return!1;var h=i();h[&quot;false&quot;]=h[&quot;null&quot;]=h[&quot;true&quot;]=h.undefined=!1;var j=i();for(j.array=a,j.cache=h,j.push=c;++b&lt;d;)j.push(a[b]);return j}function g(a){return&quot;\\&quot;+W[a]}function h(){return p.pop()||[]}function i(){return q.pop()||{array:null,cache:null,criteria:null,&quot;false&quot;:!1,index:0,&quot;null&quot;:!1,number:null,object:null,push:null,string:null,&quot;true&quot;:!1,undefined:!1,value:null}}function j(){}function k(a){a.length=0,p.length&lt;u&amp;&amp;p.push(a)}function l(a){var b=a.cache;b&amp;&amp;l(b),a.array=a.cache=a.criteria=a.object=a.number=a.string=a.value=null,q.length&lt;u&amp;&amp;q.push(a)}function m(a,b,c){b||(b=0),&quot;undefined&quot;==typeof c&amp;&amp;(c=a?a.length:0);for(var d=-1,e=c-b||0,f=Array(0&gt;e?0:e);++d&lt;e;)f[d]=a[b+d];return f}function n(c){function p(a){return a&amp;&amp;&quot;object&quot;==typeof a&amp;&amp;!Xd(a)&amp;&amp;yd.call(a,&quot;__wrapped__&quot;)?a:new q(a)}function q(a,b){this.__chain__=!!b,this.__wrapped__=a}function u(a,b,c,d,e){if(c){var f=c(a);if(&quot;undefined&quot;!=typeof f)return f}var g=Ab(a);if(!g)return a;var i=Ed.call(a);if(!S[i])return a;var j=Ud[i];switch(i){case L:case M:return new j(+a);case O:case R:return new j(a);case Q:return f=j(a.source,A.exec(a)),f.lastIndex=a.lastIndex,f}var l=Xd(a);if(b){var n=!d;d||(d=h()),e||(e=h());for(var o=d.length;o--;)if(d[o]==a)return e[o];f=l?j(a.length):{}}else f=l?m(a):ce({},a);return l&amp;&amp;(yd.call(a,&quot;index&quot;)&amp;&amp;(f.index=a.index),yd.call(a,&quot;input&quot;)&amp;&amp;(f.input=a.input)),b?(d.push(a),e.push(f),(l?Tb:fe)(a,function(a,g){f[g]=u(a,b,c,d,e)}),n&amp;&amp;(k(d),k(e)),f):f}function W(a,b,c){if(&quot;function&quot;!=typeof a)return Tc;if(&quot;undefined&quot;==typeof b)return a;var d=a.__bindData__||Vd.funcNames&amp;&amp;!a.name;if(&quot;undefined&quot;==typeof d){var e=F&amp;&amp;wd.call(a);Vd.funcNames||!e||B.test(e)||(d=!0),(Vd.funcNames||!d)&amp;&amp;(d=!Vd.funcDecomp||F.test(e),Wd(a,d))}if(d!==!0&amp;&amp;d&amp;&amp;1&amp;d[1])return a;switch(c){case 1:return function(c){return a.call(b,c)};case 2:return function(c,d){return a.call(b,c,d)};case 3:return function(c,d,e){return a.call(b,c,d,e)};case 4:return function(c,d,e,f){return a.call(b,c,d,e,f)}}return Dc(a,b)}function Y(a,b,c,d){for(var e=(d||0)-1,f=a?a.length:0,g=[];++e&lt;f;){var h=a[e];if(h&amp;&amp;&quot;object&quot;==typeof h&amp;&amp;&quot;number&quot;==typeof h.length&amp;&amp;(Xd(h)||jb(h))){b||(h=Y(h,b,c));var i=-1,j=h.length,k=g.length;for(g.length+=j;++i&lt;j;)g[k++]=h[i]}else c||g.push(h)}return g}function Z(a,b,c,d,e,f){if(c){var g=c(a,b);if(&quot;undefined&quot;!=typeof g)return!!g}if(a===b)return 0!==a||1/a==1/b;var i=typeof a,j=typeof b;if(!(a!==a||a&amp;&amp;V[i]||b&amp;&amp;V[j]))return!1;if(null==a||null==b)return a===b;var l=Ed.call(a),m=Ed.call(b);if(l==J&amp;&amp;(l=P),m==J&amp;&amp;(m=P),l!=m)return!1;switch(l){case L:case M:return+a==+b;case O:return a!=+a?b!=+b:0==a?1/a==1/b:a==+b;case Q:case R:return a==nd(b)}var n=l==K;if(!n){if(yd.call(a,&quot;__wrapped__ &quot;)||yd.call(b,&quot;__wrapped__&quot;))return Z(a.__wrapped__||a,b.__wrapped__||b,c,d,e,f);if(l!=P)return!1;var o=a.constructor,p=b.constructor;if(o!=p&amp;&amp;!(zb(o)&amp;&amp;o instanceof o&amp;&amp;zb(p)&amp;&amp;p instanceof p))return!1}var q=!e;e||(e=h()),f||(f=h());for(var r=e.length;r--;)if(e[r]==a)return f[r]==b;var s=0;if(g=!0,e.push(a),f.push(b),n){if(r=a.length,s=b.length,g=s==a.length,!g&amp;&amp;!d)return g;for(;s--;){var t=r,u=b[s];if(d)for(;t--&amp;&amp;!(g=Z(a[t],u,c,d,e,f)););else if(!(g=Z(a[s],u,c,d,e,f)))break}return g}return ee(b,function(b,h,i){return yd.call(i,h)?(s++,g=yd.call(a,h)&amp;&amp;Z(a[h],b,c,d,e,f)):void 0}),g&amp;&amp;!d&amp;&amp;ee(a,function(a,b,c){return yd.call(c,b)?g=--s&gt;-1:void 0}),q&amp;&amp;(k(e),k(f)),g}function _(a,b,c,d,e){(Xd(b)?Tb:fe)(b,function(b,f){var g,h,i=b,j=a[f];if(b&amp;&amp;((h=Xd(b))||ge(b))){for(var k=d.length;k--;)if(g=d[k]==b){j=e[k];break}if(!g){var l;c&amp;&amp;(i=c(j,b),(l=&quot;undefined&quot;!=typeof i)&amp;&amp;(j=i)),l||(j=h?Xd(j)?j:[]:ge(j)?j:{}),d.push(b),e.push(j),l||_(j,b,c,d,e)}}else c&amp;&amp;(i=c(j,b),&quot;undefined&quot;==typeof i&amp;&amp;(i=b)),&quot;undefined&quot;!=typeof i&amp;&amp;(j=i);a[f]=j})}function bb(c,d,e){var g=-1,i=gb(),j=c?c.length:0,m=[],n=!d&amp;&amp;j&gt;=t&amp;&amp;i===a,o=e||n?h():m;if(n){var p=f(o);p?(i=b,o=p):(n=!1,o=e?o:(k(o),m))}for(;++g&lt;j;){var q=c[g],r=e?e(q,g,c):q;(d?!g||o[o.length-1]!==r:i(o,r)&lt;0)&amp;&amp;((e||n)&amp;&amp;o.push(r),m.push(q))}return n?(k(o.array),l(o)):e&amp;&amp;k(o),m}function cb(a){return function(b,c,d){var e={};c=p.createCallback(c,d,3);var f=-1,g=b?b.length:0;if(&quot;number&quot;==typeof g)for(;++f&lt;g;){var h=b[f];a(e,h,c(h,f,b),b)}else fe(b,function(b,d,f){a(e,b,c(b,d,f),f)});return e}}function db(a,b,c,d,e,f){var g=1&amp;b,h=2&amp;b,i=4&amp;b,j=8&amp;b,k=16&amp;b,l=32&amp;b,m=a;if(!h&amp;&amp;!zb(a))throw new od;k&amp;&amp;!c.length&amp;&amp;(b&amp;=-17,k=c=!1),l&amp;&amp;!d.length&amp;&amp;(b&amp;=-33,l=d=!1);var n=a&amp;&amp;a.__bindData__;if(n)return!g||1&amp;n[1]||(n[4]=e),!g&amp;&amp;1&amp;n[1]&amp;&amp;(b|=8),!i||4&amp;n[1]||(n[5]=f),k&amp;&amp;Ad.apply(n[2]||(n[2]=[]),c),l&amp;&amp;Ad.apply(n[3]||(n[3]=[]),d),n[1]|=b,db.apply(null,n);if(!g||h||i||l||!(Vd.fastBind||Hd&amp;&amp;k))p=function(){var n=arguments,o=g?e:this;if((i||k||l)&amp;&amp;(n=Rd.call(n),k&amp;&amp;Fd.apply(n,c),l&amp;&amp;Ad.apply(n,d),i&amp;&amp;n.length&lt;f))return b|=16,db(a,j?b:-4&amp;b,n,null,e,f);if(h&amp;&amp;(a=o[m]),this instanceof p){o=eb(a.prototype);var q=a.apply(o,n);return Ab(q)?q:o}return a.apply(o,n)};else{if(k){var o=[e];Ad.apply(o,c)}var p=k?Hd.apply(a,o):Hd.call(a,e)}return Wd(p,Rd.call(arguments)),p}function eb(a){return Ab(a)?Id(a):{}}function fb(a){return $d[a]}function gb(){var b=(b=p.indexOf)===nc?a:b;return b}function hb(a){var b,c;return a&amp;&amp;Ed.call(a)==P&amp;&amp;(b=a.constructor,!zb(b)||b instanceof b)?(ee(a,function(a,b){c=b}),&quot;undefined&quot;==typeof c||yd.call(a,c)):!1}function ib(a){return _d[a]}function jb(a){return a&amp;&amp;&quot;object&quot;==typeof a&amp;&amp;&quot;number&quot;==typeof a.length&amp;&amp;Ed.call(a)==J||!1}function kb(a,b,c,d){return&quot;boolean&quot;!=typeof b&amp;&amp;null!=b&amp;&amp;(d=c,c=b,b=!1),u(a,b,&quot;function&quot;==typeof c&amp;&amp;W(c,d,1))}function lb(a,b,c){return u(a,!0,&quot;function&quot;==typeof b&amp;&amp;W(b,c,1))}function mb(a,b,c){var d;return b=p.createCallback(b,c,3),fe(a,function(a,c,e){return b(a,c,e)?(d=c,!1):void 0}),d}function nb(a,b,c){var d;return b=p.createCallback(b,c,3),pb(a,function(a,c,e){return b(a,c,e)?(d=c,!1):void 0}),d}function ob(a,b,c){var d=[];ee(a,function(a,b){d.push(b,a)});var e=d.length;for(b=W(b,c,3);e--&amp;&amp;b(d[e--],d[e],a)!==!1;);return a}function pb(a,b,c){var d=Zd(a),e=d.length;for(b=W(b,c,3);e--;){var f=d[e];if(b(a[f],f,a)===!1)break}return a}function qb(a){var b=[];return ee(a,function(a,c){zb(a)&amp;&amp;b.push(c)}),b.sort()}function rb(a,b){return a?yd.call(a,b):!1}function sb(a){for(var b=-1,c=Zd(a),d=c.length,e={};++b&lt;d;){var f=c[b];e[a[f]]=f}return e}function tb(a){return a===!0||a===!1||Ed.call(a)==L}function ub(a){return a?&quot;object&quot;==typeof a&amp;&amp;Ed.call(a)==M:!1}function vb(a){return a?1===a.nodeType:!1}function wb(a){var b=!0;if(!a)return b;var c=Ed.call(a),d=a.length;return c==K||c==R||c==J||c==P&amp;&amp;&quot;number&quot;==typeof d&amp;&amp;zb(a.splice)?!d:(fe(a,function(){return b=!1}),b)}function xb(a,b,c,d){return Z(a,b,&quot;function&quot;==typeof c&amp;&amp;W(c,d,2))}function yb(a){return Kd(a)&amp;&amp;!Ld(parseFloat(a))}function zb(a){return&quot;function&quot;==typeof a}function Ab(a){return!(!a||!V[typeof a])}function Bb(a){return Db(a)&amp;&amp;a!=+a}function Cb(a){return null===a}function Db(a){return&quot;number&quot;==typeof a||Ed.call(a)==O}function Eb(a){return a?&quot;object&quot;==typeof a&amp;&amp;Ed.call(a)==Q:!1}function Fb(a){return&quot;string&quot;==typeof a||Ed.call(a)==R}function Gb(a){return&quot;undefined&quot;==typeof a}function Hb(a){var b=arguments,c=2;if(!Ab(a))return a;if(&quot;number&quot;!=typeof b[2]&amp;&amp;(c=b.length),c&gt;3&amp;&amp;&quot;function&quot;==typeof b[c-2])var d=W(b[--c-1],b[c--],2);else c&gt;2&amp;&amp;&quot;function&quot;==typeof b[c-1]&amp;&amp;(d=b[--c]);for(var e=Rd.call(arguments,1,c),f=-1,g=h(),i=h();++f&lt;c;)_(a,e[f],d,g,i);return k(g),k(i),a}function Ib(a,b,c){var d=gb(),e=&quot;function&quot;==typeof b,f={};if(e)b=p.createCallback(b,c,3);else var g=Y(arguments,!0,!1,1);return ee(a,function(a,c,h){(e?!b(a,c,h):d(g,c)&lt;0)&amp;&amp;(f[c]=a)}),f}function Jb(a){for(var b=-1,c=Zd(a),d=c.length,e=fd(d);++b&lt;d;){var f=c[b];e[b]=[f,a[f]]}return e}function Kb(a,b,c){var d={};if(&quot;function&quot;!=typeof b)for(var e=-1,f=Y(arguments,!0,!1,1),g=Ab(a)?f.length:0;++e&lt;g;){var h=f[e];h in a&amp;&amp;(d[h]=a[h])}else b=p.createCallback(b,c,3),ee(a,function(a,c,e){b(a,c,e)&amp;&amp;(d[c]=a)});return d}function Lb(a,b,c,d){var e=Xd(a);if(b=W(b,d,4),null==c)if(e)c=[];else{var f=a&amp;&amp;a.constructor,g=f&amp;&amp;f.prototype;c=eb(g)}return(e?Tb:fe)(a,function(a,d,e){return b(c,a,d,e)}),c}function Mb(a){for(var b=-1,c=Zd(a),d=c.length,e=fd(d);++b&lt;d;)e[b]=a[c[b]];return e}function Nb(a){for(var b=arguments,c=-1,d=Y(b,!0,!1,1),e=b[2]&amp;&amp;b[2][b[1]]===a?1:d.length,f=fd(e);++c&lt;e;)f[c]=a[d[c]];return f}function Ob(a,b,c){var d=-1,e=gb(),f=a?a.length:0,g=!1;return c=(0&gt;c?Nd(0,f+c):c)||0,Xd(a)?g=e(a,b,c)&gt;-1:&quot;number&quot;==typeof f?g=(Fb(a)?a.indexOf(b,c):e(a,b,c))&gt;-1:fe(a,function(a){return++d&gt;=c?!(g=a===b):void 0}),g}function Pb(a,b,c){var d=!0;b=p.createCallback(b,c,3);var e=-1,f=a?a.length:0;if(&quot;number&quot;==typeof f)for(;++e&lt;f&amp;&amp;(d=!!b(a[e],e,a)););else fe(a,function(a,c,e){return d=!!b(a,c,e)});return d}function Qb(a,b,c){var d=[];b=p.createCallback(b,c,3);var e=-1,f=a?a.length:0;if(&quot;number&quot;==typeof f)for(;++e&lt;f;){var g=a[e];b(g,e,a)&amp;&amp;d.push(g)}else fe(a,function(a,c,e){b(a,c,e)&amp;&amp;d.push(a)});return d}function Rb(a,b,c){b=p.createCallback(b,c,3);var d=-1,e=a?a.length:0;if(&quot;number&quot;!=typeof e){var f;return fe(a,function(a,c,d){return b(a,c,d)?(f=a,!1):void 0}),f}for(;++d&lt;e;){var g=a[d];if(b(g,d,a))return g}}function Sb(a,b,c){var d;return b=p.createCallback(b,c,3),Ub(a,function(a,c,e){return b(a,c,e)?(d=a,!1):void 0}),d}function Tb(a,b,c){var d=-1,e=a?a.length:0;if(b=b&amp;&amp;&quot;undefined&quot;==typeof c?b:W(b,c,3),&quot;number&quot;==typeof e)for(;++d&lt;e&amp;&amp;b(a[d],d,a)!==!1;);else fe(a,b);return a}function Ub(a,b,c){var d=a?a.length:0;if(b=b&amp;&amp;&quot;undefined&quot;==typeof c?b:W(b,c,3),&quot;number&quot;==typeof d)for(;d--&amp;&amp;b(a[d],d,a)!==!1;);else{var e=Zd(a);d=e.length,fe(a,function(a,c,f){return c=e?e[--d]:--d,b(f[c],c,f)})}return a}function Vb(a,b){var c=Rd.call(arguments,2),d=-1,e=&quot;function&quot;==typeof b,f=a?a.length:0,g=fd(&quot;number&quot;==typeof f?f:0);return Tb(a,function(a){g[++d]=(e?b:a[b]).apply(a,c)}),g}function Wb(a,b,c){var d=-1,e=a?a.length:0;if(b=p.createCallback(b,c,3),&quot;number&quot;==typeof e)for(var f=fd(e);++d&lt;e;)f[d]=b(a[d],d,a);else f=[],fe(a,function(a,c,e){f[++d]=b(a,c,e)});return f}function Xb(a,b,c){var e=-1/0,f=e;if(!b&amp;&amp;Xd(a))for(var g=-1,h=a.length;++g&lt;h;){var i=a[g];i&gt;f&amp;&amp;(f=i)}else b=!b&amp;&amp;Fb(a)?d:p.createCallback(b,c,3),Tb(a,function(a,c,d){var g=b(a,c,d);g&gt;e&amp;&amp;(e=g,f=a)});return f}function Yb(a,b,c){var e=1/0,f=e;if(!b&amp;&amp;Xd(a))for(var g=-1,h=a.length;++g&lt;h;){var i=a[g];f&gt;i&amp;&amp;(f=i)}else b=!b&amp;&amp;Fb(a)?d:p.createCallback(b,c,3),Tb(a,function(a,c,d){var g=b(a,c,d);e&gt;g&amp;&amp;(e=g,f=a)});return f}function Zb(a,b){var c=-1,d=a?a.length:0;if(&quot;number&quot;==typeof d)for(var e=fd(d);++c&lt;d;)e[c]=a[c][b];return e||Wb(a,b)}function $b(a,b,c,d){if(!a)return c;var e=arguments.length&lt;3;b=W(b,d,4);var f=-1,g=a.length;if(&quot;number&quot;==typeof g)for(e&amp;&amp;(c=a[++f]);++f&lt;g;)c=b(c,a[f],f,a);else fe(a,function(a,d,f){c=e?(e=!1,a):b(c,a,d,f)});return c}function _b(a,b,c,d){var e=arguments.length&lt;3;return b=W(b,d,4),Ub(a,function(a,d,f){c=e?(e=!1,a):b(c,a,d,f)}),c}function ac(a,b,c){return b=p.createCallback(b,c,3),Qb(a,function(a,c,d){return!b(a,c,d)})}function bc(a,b,c){var d=a?a.length:0;if(&quot;number&quot;!=typeof d&amp;&amp;(a=Mb(a)),null==b||c)return a?a[Wc(d-1)]:o;var e=cc(a);return e.length=Od(Nd(0,b),e.length),e}function cc(a){var b=-1,c=a?a.length:0,d=fd(&quot;number&quot;==typeof c?c:0);return Tb(a,function(a){var c=Wc(++b);d[b]=d[c],d[c]=a}),d}function dc(a){var b=a?a.length:0;return&quot;number&quot;==typeof b?b:Zd(a).length}function ec(a,b,c){var d;b=p.createCallback(b,c,3);var e=-1,f=a?a.length:0;if(&quot;number&quot;==typeof f)for(;++e&lt;f&amp;&amp;!(d=b(a[e],e,a)););else fe(a,function(a,c,e){return!(d=b(a,c,e))});return!!d}function fc(a,b,c){var d=-1,f=a?a.length:0,g=fd(&quot;number&quot;==typeof f?f:0);for(b=p.createCallback(b,c,3),Tb(a,function(a,c,e){var f=g[++d]=i();f.criteria=b(a,c,e),f.index=d,f.value=a}),f=g.length,g.sort(e);f--;){var h=g[f];g[f]=h.value,l(h)}return g}function gc(a){return a&amp;&amp;&quot;number&quot;==typeof a.length?m(a):Mb(a)}function hc(a){for(var b=-1,c=a?a.length:0,d=[];++b&lt;c;){var e=a[b];e&amp;&amp;d.push(e)}return d}function ic(c){var d=-1,e=gb(),g=c?c.length:0,h=Y(arguments,!0,!0,1),i=[],j=g&gt;=t&amp;&amp;e===a;if(j){var k=f(h);k?(e=b,h=k):j=!1}for(;++d&lt;g;){var m=c[d];e(h,m)&lt;0&amp;&amp;i.push(m)}return j&amp;&amp;l(h),i}function jc(a,b,c){var d=-1,e=a?a.length:0;for(b=p.createCallback(b,c,3);++d&lt;e;)if(b(a[d],d,a))return d;return-1}function kc(a,b,c){var d=a?a.length:0;for(b=p.createCallback(b,c,3);d--;)if(b(a[d],d,a))return d;return-1}function lc(a,b,c){var d=0,e=a?a.length:0;if(&quot;number&quot;!=typeof b&amp;&amp;null!=b){var f=-1;for(b=p.createCallback(b,c,3);++f&lt;e&amp;&amp;b(a[f],f,a);)d++}else if(d=b,null==d||c)return a?a[0]:o;return m(a,0,Od(Nd(0,d),e))}function mc(a,b,c,d){return&quot;boolean&quot;!=typeof b&amp;&amp;null!=b&amp;&amp;(d=c,c=d&amp;&amp;d[b]===a?null:b,b=!1),null!=c&amp;&amp;(a=Wb(a,c,d)),Y(a,b)}function nc(b,c,d){if(&quot;number&quot;==typeof d){var e=b?b.length:0;d=0&gt;d?Nd(0,e+d):d||0}else if(d){var f=wc(b,c);return b[f]===c?f:-1}return a(b,c,d)}function oc(a,b,c){var d=0,e=a?a.length:0;if(&quot;number&quot;!=typeof b&amp;&amp;null!=b){var f=e;for(b=p.createCallback(b,c,3);f--&amp;&amp;b(a[f],f,a);)d++}else d=null==b||c?1:b||d;return m(a,0,Od(Nd(0,e-d),e))}function pc(c){for(var d=arguments,e=d.length,g=-1,i=h(),j=-1,m=gb(),n=c?c.length:0,o=[],p=h();++g&lt;e;){var q=d[g];i[g]=m===a&amp;&amp;(q?q.length:0)&gt;=t&amp;&amp;f(g?d[g]:p)}a:for(;++j&lt;n;){var r=i[0];if(q=c[j],(r?b(r,q):m(p,q))&lt;0){for(g=e,(r||p).push(q);--g;)if(r=i[g],(r?b(r,q):m(d[g],q))&lt;0)continue a;o.push(q)}}for(;e--;)r=i[e],r&amp;&amp;l(r);return k(i),k(p),o}function qc(a,b,c){var d=0,e=a?a.length:0;if(&quot;number&quot;!=typeof b&amp;&amp;null!=b){var f=e;for(b=p.createCallback(b,c,3);f--&amp;&amp;b(a[f],f,a);)d++}else if(d=b,null==d||c)return a?a[e-1]:o;return m(a,Nd(0,e-d))}function rc(a,b,c){var d=a?a.length:0;for(&quot;number&quot;==typeof c&amp;&amp;(d=(0&gt;c?Nd(0,d+c):Od(c,d-1))+1);d--;)if(a[d]===b)return d;return-1}function sc(a){for(var b=arguments,c=0,d=b.length,e=a?a.length:0;++c&lt;d;)for(var f=-1,g=b[c];++f&lt;e;)a[f]===g&amp;&amp;(Dd.call(a,f--,1),e--);return a}function tc(a,b,c){a=+a||0,c=&quot;number&quot;==typeof c?c:+c||1,null==b&amp;&amp;(b=a,a=0);for(var d=-1,e=Nd(0,td((b-a)/(c||1))),f=fd(e);++d&lt;e;)f[d]=a,a+=c;return f}function uc(a,b,c){var d=-1,e=a?a.length:0,f=[];for(b=p.createCallback(b,c,3);++d&lt;e;){var g=a[d];b(g,d,a)&amp;&amp;(f.push(g),Dd.call(a,d--,1),e--)}return f}function vc(a,b,c){if(&quot;number&quot;!=typeof b&amp;&amp;null!=b){var d=0,e=-1,f=a?a.length:0;for(b=p.createCallback(b,c,3);++e&lt;f&amp;&amp;b(a[e],e,a);)d++}else d=null==b||c?1:Nd(0,b);return m(a,d)}function wc(a,b,c,d){var e=0,f=a?a.length:e;for(c=c?p.createCallback(c,d,1):Tc,b=c(b);f&gt;e;){var g=e+f&gt;&gt;&gt;1;c(a[g])&lt;b?e=g+1:f=g}return e}function xc(){return bb(Y(arguments,!0,!0))}function yc(a,b,c,d){return&quot;boolean&quot;!=typeof b&amp;&amp;null!=b&amp;&amp;(d=c,c=d&amp;&amp;d[b]===a?null:b,b=!1),null!=c&amp;&amp;(c=p.createCallback(c,d,3)),bb(a,b,c)}function zc(a){return ic(a,Rd.call(arguments,1))}function Ac(){for(var a=arguments.length&gt;1?arguments:arguments[0],b=-1,c=a?Xb(Zb(a,&quot;length&quot;)):0,d=fd(0&gt;c?0:c);++b&lt;c;)d[b]=Zb(a,b);return d}function Bc(a,b){for(var c=-1,d=a?a.length:0,e={};++c&lt;d;){var f=a[c];b?e[f]=b[c]:f&amp;&amp;(e[f[0]]=f[1])}return e}function Cc(a,b){if(!zb(b))throw new od;return function(){return--a&lt;1?b.apply(this,arguments):void 0}}function Dc(a,b){return arguments.length&gt;2?db(a,17,Rd.call(arguments,2),null,b):db(a,1,null,null,b)}function Ec(a){for(var b=arguments.length&gt;1?Y(arguments,!0,!1,1):qb(a),c=-1,d=b.length;++c&lt;d;){var e=b[c];a[e]=db(a[e],1,null,null,a)}return a}function Fc(a,b){return arguments.length&gt;2?db(b,19,Rd.call(arguments,2),null,a):db(b,3,null,null,a)}function Gc(){for(var a=arguments,b=a.length;b--;)if(!zb(a[b]))throw new od;return function(){for(var b=arguments,c=a.length;c--;)b=[a[c].apply(this,b)];return b[0]}}function Hc(a,b,c){var d=typeof a;if(null==a||&quot;function&quot;==d)return W(a,b,c);if(&quot;object&quot;!=d)return function(b){return b[a]};var e=Zd(a),f=e[0],g=a[f];return 1!=e.length||g!==g||Ab(g)?function(b){for(var c=e.length,d=!1;c--&amp;&amp;(d=Z(b[e[c]],a[e[c]],null,!0)););return d}:function(a){var b=a[f];return g===b&amp;&amp;(0!==g||1/g==1/b)}}function Ic(a,b){return b=&quot;number&quot;==typeof b?b:+b||a.length,db(a,4,null,null,null,b)}function Jc(a,b,c){var d,e,f,g,h,i,j,k=0,l=!1,m=!0;if(!zb(a))throw new od;if(b=Nd(0,b)||0,c===!0){var n=!0;m=!1}else Ab(c)&amp;&amp;(n=c.leading,l=&quot;maxWait&quot;in c&amp;&amp;(Nd(b,c.maxWait)||0),m=&quot;trailing&quot;in c?c.trailing:m);var p=function(){var c=b-(zd()-g);if(0&gt;=c){e&amp;&amp;ud(e);var l=j;e=i=j=o,l&amp;&amp;(k=zd(),f=a.apply(h,d))}else i=Cd(p,c)},q=function(){i&amp;&amp;ud(i),e=i=j=o,(m||l!==b)&amp;&amp;(k=zd(),f=a.apply(h,d))};return function(){if(d=arguments,g=zd(),h=this,j=m&amp;&amp;(i||!n),l===!1)var c=n&amp;&amp;!i;else{e||n||(k=g);var o=l-(g-k);0&gt;=o?(e&amp;&amp;(e=ud(e)),k=g,f=a.apply(h,d)):e||(e=Cd(q,o))}return i||b===l||(i=Cd(p,b)),c&amp;&amp;(f=a.apply(h,d)),f}}function Kc(a){if(!zb(a))throw new od;var b=Rd.call(arguments,1);return Cd(function(){a.apply(o,b)},1)}function Lc(a,b){if(!zb(a))throw new od;var c=Rd.call(arguments,2);return Cd(function(){a.apply(o,c)},b)}function Mc(a,b){if(!zb(a))throw new od;var c=function(){var d=c.cache,e=b?b.apply(this,arguments):s+arguments[0];return yd.call(d,e)?d[e]:d[e]=a.apply(this,arguments)};return c.cache={},c}function Nc(a){var b,c;if(!zb(a))throw new od;return function(){return b?c:(b=!0,c=a.apply(this,arguments),a=null,c)}}function Oc(a){return db(a,16,Rd.call(arguments,1))}function Pc(a){return db(a,32,null,Rd.call(arguments,1))}function Qc(a,b,c){var d=!0,e=!0;if(!zb(a))throw new od;c===!1?d=!1:Ab(c)&amp;&amp;(d=&quot;leading&quot;in c?c.leading:d,e=&quot;trailing&quot;in c?c.trailing:e),T.leading=d,T.maxWait=b,T.trailing=e;var f=Jc(a,b,T);return f}function Rc(a,b){if(!zb(b))throw new od;return function(){var c=[a];return Ad.apply(c,arguments),b.apply(this,c)}}function Sc(a){return null==a?&quot;&quot;:nd(a).replace(be,fb)}function Tc(a){return a}function Uc(a,b){var c=a,d=!b||zb(c);b||(c=q,b=a,a=p),Tb(qb(b),function(e){var f=a[e]=b[e];d&amp;&amp;(c.prototype[e]=function(){var b=this.__wrapped__,d=[b];Ad.apply(d,arguments);var e=f.apply(a,d);return b&amp;&amp;&quot;object&quot;==typeof b&amp;&amp;b===e?this:(e=new c(e),e.__chain__=this.__chain__,e)})})}function Vc(){return c._=rd,this}function Wc(a,b,c){var d=null==a,e=null==b;null==c&amp;&amp;(&quot;boolean&quot;==typeof a&amp;&amp;e?(c=a,a=1):e||&quot;boolean&quot;!=typeof b||(c=b,e=!0)),d&amp;&amp;e&amp;&amp;(b=1),a=+a||0,e?(b=a,a=0):b=+b||0;var f=Qd();return c||a%1||b%1?Od(a+f*(b-a+parseFloat(&quot;1e-&quot;+((f+&quot;&quot;).length-1))),b):a+vd(f*(b-a+1))}function Xc(a,b){if(a){var c=a[b];return zb(c)?a[b]():c}}function Yc(a,b,c){var d=p.templateSettings;a||(a=&quot;&quot;),c=de({},c,d);var e,f=de({},c.imports,d.imports),h=Zd(f),i=Mb(f),j=0,k=c.interpolate||E,l=&quot;__p += &#39;&quot;,m=md((c.escape||E).source+&quot;|&quot;+k.source+&quot;|&quot;+(k===C?z:E).source+&quot;|&quot;+(c.evaluate||E).source+&quot;|$&quot;,&quot;g&quot;);a.replace(m,function(b,c,d,f,h,i){return d||(d=f),l+=a.slice(j,i).replace(G,g),c&amp;&amp;(l+=&quot;&#39; +\n__e(&quot;+c+&quot;) +\n&#39;&quot;),h&amp;&amp;(e=!0,l+=&quot;&#39;;\n&quot;+h+&quot;;\n__p += &#39;&quot;),d&amp;&amp;(l+=&quot;&#39; +\n((__t = (&quot;+d+&quot;)) == null ? &#39;&#39; : __t) +\n&#39;&quot;),j=i+b.length,b}),l+=&quot;&#39;;\n&quot;;var n=c.variable,q=n;q||(n=&quot;obj&quot;,l=&quot;with (&quot;+n+&quot;) {\n&quot;+l+&quot;\n}\n&quot;),l=(e?l.replace(w,&quot;&quot;):l).replace(x,&quot;$1&quot;).replace(y,&quot;$1;&quot;),l=&quot;function(&quot;+n+&quot;) {\n&quot;+(q?&quot;&quot;:n+&quot; || (&quot;+n+&quot; = {});\n&quot;)+&quot;var __t, __p = &#39;&#39;, __e = _.escape&quot;+(e?&quot;, __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, &#39;&#39;) }\n&quot;:&quot;;\n&quot;)+l+&quot;return __p\n}&quot;;var r=&quot;\n/*\n//# sourceURL=&quot;+(c.sourceURL||&quot;/lodash/template/source[&quot;+I++ +&quot;]&quot;)+&quot;\n*/&quot;;try{var s=id(h,&quot;return &quot;+l+r).apply(o,i)}catch(t){throw t.source=l,t}return b?s(b):(s.source=l,s)}function Zc(a,b,c){a=(a=+a)&gt;-1?a:0;var d=-1,e=fd(a);for(b=W(b,c,1);++d&lt;a;)e[d]=b(d);return e}function $c(a){return null==a?&quot;&quot;:nd(a).replace(ae,ib)}function _c(a){var b=++r;return nd(null==a?&quot;&quot;:a)+b}function ad(a){return a=new q(a),a.__chain__=!0,a}function bd(a,b){return b(a),a}function cd(){return this.__chain__=!0,this}function dd(){return nd(this.__wrapped__)}function ed(){return this.__wrapped__}c=c?ab.defaults(X.Object(),c,ab.pick(X,H)):X;var fd=c.Array,gd=c.Boolean,hd=c.Date,id=c.Function,jd=c.Math,kd=c.Number,ld=c.Object,md=c.RegExp,nd=c.String,od=c.TypeError,pd=[],qd=ld.prototype,rd=c._,sd=md(&quot;^&quot;+nd(qd.valueOf).replace(/[.*+?^${}()|[\]\\]/g,&quot;\\$&amp;&quot;).replace(/valueOf|for [^\]]+/g,&quot;.+?&quot;)+&quot;$&quot;),td=jd.ceil,ud=c.clearTimeout,vd=jd.floor,wd=id.prototype.toString,xd=sd.test(xd=ld.getPrototypeOf)&amp;&amp;xd,yd=qd.hasOwnProperty,zd=sd.test(zd=hd.now)&amp;&amp;zd||function(){return+new hd},Ad=pd.push,Bd=c.setImmediate,Cd=c.setTimeout,Dd=pd.splice,Ed=qd.toString,Fd=pd.unshift,Gd=function(){try{var a={},b=sd.test(b=ld.defineProperty)&amp;&amp;b,c=b(a,a,a)&amp;&amp;b}catch(d){}return c}(),Hd=sd.test(Hd=Ed.bind)&amp;&amp;Hd,Id=sd.test(Id=ld.create)&amp;&amp;Id,Jd=sd.test(Jd=fd.isArray)&amp;&amp;Jd,Kd=c.isFinite,Ld=c.isNaN,Md=sd.test(Md=ld.keys)&amp;&amp;Md,Nd=jd.max,Od=jd.min,Pd=c.parseInt,Qd=jd.random,Rd=pd.slice,Sd=sd.test(c.attachEvent),Td=Hd&amp;&amp;!/\n|true/.test(Hd+Sd),Ud={};Ud[K]=fd,Ud[L]=gd,Ud[M]=hd,Ud[N]=id,Ud[P]=ld,Ud[O]=kd,Ud[Q]=md,Ud[R]=nd,q.prototype=p.prototype;var Vd=p.support={};Vd.fastBind=Hd&amp;&amp;!Td,Vd.funcDecomp=!sd.test(c.WinRTError)&amp;&amp;F.test(n),Vd.funcNames=&quot;string&quot;==typeof id.name,p.templateSettings={escape:/&lt;%-([\s\S]+?)%&gt;/g,evaluate:/&lt;%([\s\S]+?)%&gt;/g,interpolate:C,variable:&quot;&quot;,imports:{_:p}},Id||(eb=function(a){if(Ab(a)){j.prototype=a;var b=new j;j.prototype=null}return b||{}});var Wd=Gd?function(a,b){U.value=b,Gd(a,&quot;__bindData__&quot;,U)}:j,Xd=Jd||function(a){return a&amp;&amp;&quot;object&quot;==typeof a&amp;&amp;&quot;number&quot;==typeof a.length&amp;&amp;Ed.call(a)==K||!1},Yd=function(a){var b,c=a,d=[];if(!c)return d;if(!V[typeof a])return d;for(b in c)yd.call(c,b)&amp;&amp;d.push(b);return d},Zd=Md?function(a){return Ab(a)?Md(a):[]}:Yd,$d={&quot;&amp;&quot;:&quot;&amp;amp;&quot;,&quot;&lt;&quot;:&quot;&amp;lt;&quot;,&quot;&gt;&quot;:&quot;&amp;gt;&quot;,&#39;&quot;&#39;:&quot;&amp;quot;&quot;,&quot;&#39;&quot;:&quot;&amp;#39;&quot;},_d=sb($d),ae=md(&quot;(&quot;+Zd(_d).join(&quot;|&quot;)+&quot;)&quot;,&quot;g&quot;),be=md(&quot;[&quot;+Zd($d).join(&quot;&quot;)+&quot;]&quot;,&quot;g&quot;),ce=function(a,b,c){var d,e=a,f=e;if(!e)return f;var g=arguments,h=0,i=&quot;number&quot;==typeof c?2:g.length;if(i&gt;3&amp;&amp;&quot;function&quot;==typeof g[i-2])var j=W(g[--i-1],g[i--],2);else i&gt;2&amp;&amp;&quot;function&quot;==typeof g[i-1]&amp;&amp;(j=g[--i]);for(;++h&lt;i;)if(e=g[h],e&amp;&amp;V[typeof e])for(var k=-1,l=V[typeof e]&amp;&amp;Zd(e),m=l?l.length:0;++k&lt;m;)d=l[k],f[d]=j?j(f[d],e[d]):e[d];return f},de=function(a,b,c){var d,e=a,f=e;if(!e)return f;for(var g=arguments,h=0,i=&quot;number&quot;==typeof c?2:g.length;++h&lt;i;)if(e=g[h],e&amp;&amp;V[typeof e])for(var j=-1,k=V[typeof e]&amp;&amp;Zd(e),l=k?k.length:0;++j&lt;l;)d=k[j],&quot;undefined&quot;==typeof f[d]&amp;&amp;(f[d]=e[d]);return f},ee=function(a,b,c){var d,e=a,f=e;if(!e)return f;if(!V[typeof e])return f;b=b&amp;&amp;&quot;undefined&quot;==typeof c?b:W(b,c,3);for(d in e)if(b(e[d],d,a)===!1)return f;return f},fe=function(a,b,c){var d,e=a,f=e;if(!e)return f;if(!V[typeof e])return f;b=b&amp;&amp;&quot;undefined&quot;==typeof c?b:W(b,c,3);for(var g=-1,h=V[typeof e]&amp;&amp;Zd(e),i=h?h.length:0;++g&lt;i;)if(d=h[g],b(e[d],d,a)===!1)return f;return f},ge=function(a){if(!a||Ed.call(a)!=P)return!1;var b=a.valueOf,c=&quot;function&quot;==typeof b&amp;&amp;(c=xd(b))&amp;&amp;xd(c);return c?a==c||xd(a)==c:hb(a)},he=cb(function(a,b,c){yd.call(a,c)?a[c]++:a[c]=1}),ie=cb(function(a,b,c){(yd.call(a,c)?a[c]:a[c]=[]).push(b)}),je=cb(function(a,b,c){a[c]=b}),ke=Qb;Td&amp;&amp;$&amp;&amp;&quot;function&quot;==typeof Bd&amp;&amp;(Kc=function(a){if(!zb(a))throw new od;return Bd.apply(c,arguments)});var le=8==Pd(v+&quot;08&quot;)?Pd:function(a,b){return Pd(Fb(a)?a.replace(D,&quot;&quot;):a,b||0)};return p.after=Cc,p.assign=ce,p.at=Nb,p.bind=Dc,p.bindAll=Ec,p.bindKey=Fc,p.chain=ad,p.compact=hc,p.compose=Gc,p.countBy=he,p.createCallback=Hc,p.curry=Ic,p.debounce=Jc,p.defaults=de,p.defer=Kc,p.delay=Lc,p.difference=ic,p.filter=Qb,p.flatten=mc,p.forEach=Tb,p.forEachRight=Ub,p.forIn=ee,p.forInRight=ob,p.forOwn=fe,p.forOwnRight=pb,p.functions=qb,p.groupBy=ie,p.indexBy=je,p.initial=oc,p.intersection=pc,p.invert=sb,p.invoke=Vb,p.keys=Zd,p.map=Wb,p.max=Xb,p.memoize=Mc,p.merge=Hb,p.min=Yb,p.omit=Ib,p.once=Nc,p.pairs=Jb,p.partial=Oc,p.partialRight=Pc,p.pick=Kb,p.pluck=Zb,p.pull=sc,p.range=tc,p.reject=ac,p.remove=uc,p.rest=vc,p.shuffle=cc,p.sortBy=fc,p.tap=bd,p.throttle=Qc,p.times=Zc,p.toArray=gc,p.transform=Lb,p.union=xc,p.uniq=yc,p.values=Mb,p.where=ke,p.without=zc,p.wrap=Rc,p.zip=Ac,p.zipObject=Bc,p.collect=Wb,p.drop=vc,p.each=Tb,p.eachRight=Ub,p.extend=ce,p.methods=qb,p.object=Bc,p.select=Qb,p.tail=vc,p.unique=yc,p.unzip=Ac,Uc(p),p.clone=kb,p.cloneDeep=lb,p.contains=Ob,p.escape=Sc,p.every=Pb,p.find=Rb,p.findIndex=jc,p.findKey=mb,p.findLast=Sb,p.findLastIndex=kc,p.findLastKey=nb,p.has=rb,p.identity=Tc,p.indexOf=nc,p.isArguments=jb,p.isArray=Xd,p.isBoolean=tb,p.isDate=ub,p.isElement=vb,p.isEmpty=wb,p.isEqual=xb,p.isFinite=yb,p.isFunction=zb,p.isNaN=Bb,p.isNull=Cb,p.isNumber=Db,p.isObject=Ab,p.isPlainObject=ge,p.isRegExp=Eb,p.isString=Fb,p.isUndefined=Gb,p.lastIndexOf=rc,p.mixin=Uc,p.noConflict=Vc,p.parseInt=le,p.random=Wc,p.reduce=$b,p.reduceRight=_b,p.result=Xc,p.runInContext=n,p.size=dc,p.some=ec,p.sortedIndex=wc,p.template=Yc,p.unescape=$c,p.uniqueId=_c,p.all=Pb,p.any=ec,p.detect=Rb,p.findWhere=Rb,p.foldl=$b,p.foldr=_b,p.include=Ob,p.inject=$b,fe(p,function(a,b){p.prototype[b]||(p.prototype[b]=function(){var b=[this.__wrapped__],c=this.__chain__;Ad.apply(b,arguments);var d=a.apply(p,b);return c?new q(d,c):d})}),p.first=lc,p.last=qc,p.sample=bc,p.take=lc,p.head=lc,fe(p,function(a,b){var c=&quot;sample&quot;!==b;p.prototype[b]||(p.prototype[b]=function(b,d){var e=this.__chain__,f=a(this.__wrapped__,b,d);return e||null!=b&amp;&amp;(!d||c&amp;&amp;&quot;function&quot;==typeof b)?new q(f,e):f})}),p.VERSION=&quot;2.2.1&quot;,p.prototype.chain=cd,p.prototype.toString=dd,p.prototype.value=ed,p.prototype.valueOf=ed,Tb([&quot;join&quot;,&quot;pop&quot;,&quot;shift&quot;],function(a){var b=pd[a];p.prototype[a]=function(){var a=this.__chain__,c=b.apply(this.__wrapped__,arguments);return a?new q(c,a):c}}),Tb([&quot;push&quot;,&quot;reverse&quot;,&quot;sort&quot;,&quot;unshift&quot;],function(a){var b=pd[a];p.prototype[a]=function(){return b.apply(this.__wrapped__,arguments),this}}),Tb([&quot;concat&quot;,&quot;slice&quot;,&quot;splice&quot;],function(a){var b=pd[a];p.prototype[a]=function(){return new q(b.apply(this.__wrapped__,arguments),this.__chain__)}}),p}var o,p=[],q=[],r=0,s=+new Date+&quot;&quot;,t=75,u=40,v=&quot; 	\f ﻿\n\r\u2028\u2029 ᠎             　&quot;,w=/\b__p \+= &#39;&#39;;/g,x=/\b(__p \+=) &#39;&#39; \+/g,y=/(__e\(.*?\)|\b__t\)) \+\n&#39;&#39;;/g,z=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,A=/\w*$/,B=/^function[ \n\r\t]+\w/,C=/&lt;%=([\s\S]+?)%&gt;/g,D=RegExp(&quot;^[&quot;+v+&quot;]*0+(?=.$)&quot;),E=/($^)/,F=/\bthis\b/,G=/[&#39;\n\r\t\u2028\u2029\\]/g,H=[&quot;Array&quot;,&quot;Boolean&quot;,&quot;Date&quot;,&quot;Function&quot;,&quot;Math&quot;,&quot;Number&quot;,&quot;Object&quot;,&quot;RegExp&quot;,&quot;String&quot;,&quot;_&quot;,&quot;attachEvent&quot;,&quot;clearTimeout&quot;,&quot;isFinite&quot;,&quot;isNaN&quot;,&quot;parseInt&quot;,&quot;setImmediate&quot;,&quot;setTimeout&quot;],I=0,J=&quot;[object Arguments]&quot;,K=&quot;[object Array]&quot;,L=&quot;[object Boolean]&quot;,M=&quot;[object Date]&quot;,N=&quot;[object Function]&quot;,O=&quot;[object Number]&quot;,P=&quot;[object Object]&quot;,Q=&quot;[object RegExp]&quot;,R=&quot;[object String]&quot;,S={};S[N]=!1,S[J]=S[K]=S[L]=S[M]=S[O]=S[P]=S[Q]=S[R]=!0;var T={leading:!1,maxWait:0,trailing:!1},U={configurable:!1,enumerable:!1,value:null,writable:!1},V={&quot;boolean&quot;:!1,&quot;function&quot;:!0,object:!0,number:!1,string:!1,undefined:!1},W={&quot;\\&quot;:&quot;\\&quot;,&quot;&#39;&quot;:&quot;&#39;&quot;,&quot;\n&quot;:&quot;n&quot;,&quot;\r&quot;:&quot;r&quot;,&quot;	&quot;:&quot;t&quot;,&quot;\u2028&quot;:&quot;u2028&quot;,&quot;\u2029&quot;:&quot;u2029&quot;},X=V[typeof window]&amp;&amp;window||this,Y=V[typeof exports]&amp;&amp;exports&amp;&amp;!exports.nodeType&amp;&amp;exports,Z=V[typeof module]&amp;&amp;module&amp;&amp;!module.nodeType&amp;&amp;module,$=Z&amp;&amp;Z.exports===Y&amp;&amp;Y,_=V[typeof global]&amp;&amp;global;!_||_.global!==_&amp;&amp;_.window!==_||(X=_);var ab=n();&quot;function&quot;==typeof define&amp;&amp;&quot;object&quot;==typeof define.amd&amp;&amp;define.amd?(X._=ab,define(function(){return ab})):Y&amp;&amp;Z?$?(Z.exports=ab)._=ab:Y._=ab:X._=ab}.call(this),function(){var a,b=this,c=b.Backbone,d=[],e=d.push,f=d.slice,g=d.splice;a=&quot;undefined&quot;!=typeof exports?exports:b.Backbone={},a.VERSION=&quot;1.0.0&quot;;var h=b._;h||&quot;undefined&quot;==typeof require||(h=require(&quot;underscore&quot;)),a.$=b.jQuery||b.Zepto||b.ender||b.$,a.noConflict=function(){return b.Backbone=c,this},a.emulateHTTP=!1,a.emulateJSON=!1;var i=a.Events={on:function(a,b,c){if(!k(this,&quot;on&quot;,a,[b,c])||!b)return this;this._events||(this._events={});var d=this._events[a]||(this._events[a]=[]);return d.push({callback:b,context:c,ctx:c||this}),this},once:function(a,b,c){if(!k(this,&quot;once&quot;,a,[b,c])||!b)return this;var d=this,e=h.once(function(){d.off(a,e),b.apply(this,arguments)});return e._callback=b,this.on(a,e,c)},off:function(a,b,c){var d,e,f,g,i,j,l,m;if(!this._events||!k(this,&quot;off&quot;,a,[b,c]))return this;if(!a&amp;&amp;!b&amp;&amp;!c)return this._events={},this;for(g=a?[a]:h.keys(this._events),i=0,j=g.length;j&gt;i;i++)if(a=g[i],f=this._events[a]){if(this._events[a]=d=[],b||c)for(l=0,m=f.length;m&gt;l;l++)e=f[l],(b&amp;&amp;b!==e.callback&amp;&amp;b!==e.callback._callback||c&amp;&amp;c!==e.context)&amp;&amp;d.push(e);d.length||delete this._events[a]}return this},trigger:function(a){if(!this._events)return this;var b=f.call(arguments,1);if(!k(this,&quot;trigger&quot;,a,b))return this;var c=this._events[a],d=this._events.all;return c&amp;&amp;l(c,b),d&amp;&amp;l(d,arguments),this},stopListening:function(a,b,c){var d=this._listeners;if(!d)return this;var e=!b&amp;&amp;!c;&quot;object&quot;==typeof b&amp;&amp;(c=this),a&amp;&amp;((d={})[a._listenerId]=a);for(var f in d)d[f].off(b,c,this),e&amp;&amp;delete this._listeners[f];return this}},j=/\s+/,k=function(a,b,c,d){if(!c)return!0;if(&quot;object&quot;==typeof c){for(var e in c)a[b].apply(a,[e,c[e]].concat(d));return!1}if(j.test(c)){for(var f=c.split(j),g=0,h=f.length;h&gt;g;g++)a[b].apply(a,[f[g]].concat(d));return!1}return!0},l=function(a,b){var c,d=-1,e=a.length,f=b[0],g=b[1],h=b[2];switch(b.length){case 0:for(;++d&lt;e;)(c=a[d]).callback.call(c.ctx);return;case 1:for(;++d&lt;e;)(c=a[d]).callback.call(c.ctx,f);return;case 2:for(;++d&lt;e;)(c=a[d]).callback.call(c.ctx,f,g);return;case 3:for(;++d&lt;e;)(c=a[d]).callback.call(c.ctx,f,g,h);return;default:for(;++d&lt;e;)(c=a[d]).callback.apply(c.ctx,b)}},m={listenTo:&quot;on&quot;,listenToOnce:&quot;once&quot;};h.each(m,function(a,b){i[b]=function(b,c,d){var e=this._listeners||(this._listeners={}),f=b._listenerId||(b._listenerId=h.uniqueId(&quot;l&quot;));return e[f]=b,&quot;object&quot;==typeof c&amp;&amp;(d=this),b[a](c,d,this),this}}),i.bind=i.on,i.unbind=i.off,h.extend(a,i);var n=a.Model=function(a,b){var c,d=a||{};b||(b={}),this.cid=h.uniqueId(&quot;c&quot;),this.attributes={},h.extend(this,h.pick(b,o)),b.parse&amp;&amp;(d=this.parse(d,b)||{}),(c=h.result(this,&quot;defaults&quot;))&amp;&amp;(d=h.defaults({},d,c)),this.set(d,b),this.changed={},this.initialize.apply(this,arguments)},o=[&quot;url&quot;,&quot;urlRoot&quot;,&quot;collection&quot;];h.extend(n.prototype,i,{changed:null,validationError:null,idAttribute:&quot;id&quot;,initialize:function(){},toJSON:function(){return h.clone(this.attributes)},sync:function(){return a.sync.apply(this,arguments)},get:function(a){return this.attributes[a]},escape:function(a){return h.escape(this.get(a))},has:function(a){return null!=this.get(a)},set:function(a,b,c){var d,e,f,g,i,j,k,l;if(null==a)return this;if(&quot;object&quot;==typeof a?(e=a,c=b):(e={})[a]=b,c||(c={}),!this._validate(e,c))return!1;f=c.unset,i=c.silent,g=[],j=this._changing,this._changing=!0,j||(this._previousAttributes=h.clone(this.attributes),this.changed={}),l=this.attributes,k=this._previousAttributes,this.idAttribute in e&amp;&amp;(this.id=e[this.idAttribute]);for(d in e)b=e[d],h.isEqual(l[d],b)||g.push(d),h.isEqual(k[d],b)?delete this.changed[d]:this.changed[d]=b,f?delete l[d]:l[d]=b;if(!i){g.length&amp;&amp;(this._pending=!0);for(var m=0,n=g.length;n&gt;m;m++)this.trigger(&quot;change:&quot;+g[m],this,l[g[m]],c)}if(j)return this;if(!i)for(;this._pending;)this._pending=!1,this.trigger(&quot;change&quot;,this,c);return this._pending=!1,this._changing=!1,this},unset:function(a,b){return this.set(a,void 0,h.extend({},b,{unset:!0}))},clear:function(a){var b={};for(var c in this.attributes)b[c]=void 0;return this.set(b,h.extend({},a,{unset:!0}))},hasChanged:function(a){return null==a?!h.isEmpty(this.changed):h.has(this.changed,a)},changedAttributes:function(a){if(!a)return this.hasChanged()?h.clone(this.changed):!1;var b,c=!1,d=this._changing?this._previousAttributes:this.attributes;for(var e in a)h.isEqual(d[e],b=a[e])||((c||(c={}))[e]=b);return c},previous:function(a){return null!=a&amp;&amp;this._previousAttributes?this._previousAttributes[a]:null},previousAttributes:function(){return h.clone(this._previousAttributes)},fetch:function(a){a=a?h.clone(a):{},void 0===a.parse&amp;&amp;(a.parse=!0);</div><div class='line' id='LC9'>var b=this,c=a.success;return a.success=function(d){return b.set(b.parse(d,a),a)?(c&amp;&amp;c(b,d,a),b.trigger(&quot;sync&quot;,b,d,a),void 0):!1},L(this,a),this.sync(&quot;read&quot;,this,a)},save:function(a,b,c){var d,e,f,g=this.attributes;if(null==a||&quot;object&quot;==typeof a?(d=a,c=b):(d={})[a]=b,!(!d||c&amp;&amp;c.wait||this.set(d,c)))return!1;if(c=h.extend({validate:!0},c),!this._validate(d,c))return!1;d&amp;&amp;c.wait&amp;&amp;(this.attributes=h.extend({},g,d)),void 0===c.parse&amp;&amp;(c.parse=!0);var i=this,j=c.success;return c.success=function(a){i.attributes=g;var b=i.parse(a,c);return c.wait&amp;&amp;(b=h.extend(d||{},b)),h.isObject(b)&amp;&amp;!i.set(b,c)?!1:(j&amp;&amp;j(i,a,c),i.trigger(&quot;sync&quot;,i,a,c),void 0)},L(this,c),e=this.isNew()?&quot;create&quot;:c.patch?&quot;patch&quot;:&quot;update&quot;,&quot;patch&quot;===e&amp;&amp;(c.attrs=d),f=this.sync(e,this,c),d&amp;&amp;c.wait&amp;&amp;(this.attributes=g),f},destroy:function(a){a=a?h.clone(a):{};var b=this,c=a.success,d=function(){b.trigger(&quot;destroy&quot;,b,b.collection,a)};if(a.success=function(e){(a.wait||b.isNew())&amp;&amp;d(),c&amp;&amp;c(b,e,a),b.isNew()||b.trigger(&quot;sync&quot;,b,e,a)},this.isNew())return a.success(),!1;L(this,a);var e=this.sync(&quot;delete&quot;,this,a);return a.wait||d(),e},url:function(){var a=h.result(this,&quot;urlRoot&quot;)||h.result(this.collection,&quot;url&quot;)||K();return this.isNew()?a:a+(&quot;/&quot;===a.charAt(a.length-1)?&quot;&quot;:&quot;/&quot;)+encodeURIComponent(this.id)},parse:function(a){return a},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return null==this.id},isValid:function(a){return this._validate({},h.extend(a||{},{validate:!0}))},_validate:function(a,b){if(!b.validate||!this.validate)return!0;a=h.extend({},this.attributes,a);var c=this.validationError=this.validate(a,b)||null;return c?(this.trigger(&quot;invalid&quot;,this,c,h.extend(b||{},{validationError:c})),!1):!0}});var p=[&quot;keys&quot;,&quot;values&quot;,&quot;pairs&quot;,&quot;invert&quot;,&quot;pick&quot;,&quot;omit&quot;];h.each(p,function(a){n.prototype[a]=function(){var b=f.call(arguments);return b.unshift(this.attributes),h[a].apply(h,b)}});var q=a.Collection=function(a,b){b||(b={}),b.url&amp;&amp;(this.url=b.url),b.model&amp;&amp;(this.model=b.model),void 0!==b.comparator&amp;&amp;(this.comparator=b.comparator),this._reset(),this.initialize.apply(this,arguments),a&amp;&amp;this.reset(a,h.extend({silent:!0},b))},r={add:!0,remove:!0,merge:!0},s={add:!0,merge:!1,remove:!1};h.extend(q.prototype,i,{model:n,initialize:function(){},toJSON:function(a){return this.map(function(b){return b.toJSON(a)})},sync:function(){return a.sync.apply(this,arguments)},add:function(a,b){return this.set(a,h.defaults(b||{},s))},remove:function(a,b){a=h.isArray(a)?a.slice():[a],b||(b={});var c,d,e,f;for(c=0,d=a.length;d&gt;c;c++)f=this.get(a[c]),f&amp;&amp;(delete this._byId[f.id],delete this._byId[f.cid],e=this.indexOf(f),this.models.splice(e,1),this.length--,b.silent||(b.index=e,f.trigger(&quot;remove&quot;,f,this,b)),this._removeReference(f));return this},set:function(a,b){b=h.defaults(b||{},r),b.parse&amp;&amp;(a=this.parse(a,b)),h.isArray(a)||(a=a?[a]:[]);var c,d,f,i,j,k=b.at,l=this.comparator&amp;&amp;null==k&amp;&amp;b.sort!==!1,m=h.isString(this.comparator)?this.comparator:null,n=[],o=[],p={};for(c=0,d=a.length;d&gt;c;c++)(f=this._prepareModel(a[c],b))&amp;&amp;((i=this.get(f))?(b.remove&amp;&amp;(p[i.cid]=!0),b.merge&amp;&amp;(i.set(f.attributes,b),l&amp;&amp;!j&amp;&amp;i.hasChanged(m)&amp;&amp;(j=!0))):b.add&amp;&amp;(n.push(f),f.on(&quot;all&quot;,this._onModelEvent,this),this._byId[f.cid]=f,null!=f.id&amp;&amp;(this._byId[f.id]=f)));if(b.remove){for(c=0,d=this.length;d&gt;c;++c)p[(f=this.models[c]).cid]||o.push(f);o.length&amp;&amp;this.remove(o,b)}if(n.length&amp;&amp;(l&amp;&amp;(j=!0),this.length+=n.length,null!=k?g.apply(this.models,[k,0].concat(n)):e.apply(this.models,n)),j&amp;&amp;this.sort({silent:!0}),b.silent)return this;for(c=0,d=n.length;d&gt;c;c++)(f=n[c]).trigger(&quot;add&quot;,f,this,b);return j&amp;&amp;this.trigger(&quot;sort&quot;,this,b),this},reset:function(a,b){b||(b={});for(var c=0,d=this.models.length;d&gt;c;c++)this._removeReference(this.models[c]);return b.previousModels=this.models,this._reset(),this.add(a,h.extend({silent:!0},b)),b.silent||this.trigger(&quot;reset&quot;,this,b),this},push:function(a,b){return a=this._prepareModel(a,b),this.add(a,h.extend({at:this.length},b)),a},pop:function(a){var b=this.at(this.length-1);return this.remove(b,a),b},unshift:function(a,b){return a=this._prepareModel(a,b),this.add(a,h.extend({at:0},b)),a},shift:function(a){var b=this.at(0);return this.remove(b,a),b},slice:function(a,b){return this.models.slice(a,b)},get:function(a){return null==a?void 0:this._byId[null!=a.id?a.id:a.cid||a]},at:function(a){return this.models[a]},where:function(a,b){return h.isEmpty(a)?b?void 0:[]:this[b?&quot;find&quot;:&quot;filter&quot;](function(b){for(var c in a)if(a[c]!==b.get(c))return!1;return!0})},findWhere:function(a){return this.where(a,!0)},sort:function(a){if(!this.comparator)throw new Error(&quot;Cannot sort a set without a comparator&quot;);return a||(a={}),h.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(h.bind(this.comparator,this)),a.silent||this.trigger(&quot;sort&quot;,this,a),this},sortedIndex:function(a,b,c){b||(b=this.comparator);var d=h.isFunction(b)?b:function(a){return a.get(b)};return h.sortedIndex(this.models,a,d,c)},pluck:function(a){return h.invoke(this.models,&quot;get&quot;,a)},fetch:function(a){a=a?h.clone(a):{},void 0===a.parse&amp;&amp;(a.parse=!0);var b=a.success,c=this;return a.success=function(d){var e=a.reset?&quot;reset&quot;:&quot;set&quot;;c[e](d,a),b&amp;&amp;b(c,d,a),c.trigger(&quot;sync&quot;,c,d,a)},L(this,a),this.sync(&quot;read&quot;,this,a)},create:function(a,b){if(b=b?h.clone(b):{},!(a=this._prepareModel(a,b)))return!1;b.wait||this.add(a,b);var c=this,d=b.success;return b.success=function(e){b.wait&amp;&amp;c.add(a,b),d&amp;&amp;d(a,e,b)},a.save(null,b),a},parse:function(a){return a},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(a,b){if(a instanceof n)return a.collection||(a.collection=this),a;b||(b={}),b.collection=this;var c=new this.model(a,b);return c._validate(a,b)?c:(this.trigger(&quot;invalid&quot;,this,a,b),!1)},_removeReference:function(a){this===a.collection&amp;&amp;delete a.collection,a.off(&quot;all&quot;,this._onModelEvent,this)},_onModelEvent:function(a,b,c,d){(&quot;add&quot;!==a&amp;&amp;&quot;remove&quot;!==a||c===this)&amp;&amp;(&quot;destroy&quot;===a&amp;&amp;this.remove(b,d),b&amp;&amp;a===&quot;change:&quot;+b.idAttribute&amp;&amp;(delete this._byId[b.previous(b.idAttribute)],null!=b.id&amp;&amp;(this._byId[b.id]=b)),this.trigger.apply(this,arguments))}});var t=[&quot;forEach&quot;,&quot;each&quot;,&quot;map&quot;,&quot;collect&quot;,&quot;reduce&quot;,&quot;foldl&quot;,&quot;inject&quot;,&quot;reduceRight&quot;,&quot;foldr&quot;,&quot;find&quot;,&quot;detect&quot;,&quot;filter&quot;,&quot;select&quot;,&quot;reject&quot;,&quot;every&quot;,&quot;all&quot;,&quot;some&quot;,&quot;any&quot;,&quot;include&quot;,&quot;contains&quot;,&quot;invoke&quot;,&quot;max&quot;,&quot;min&quot;,&quot;toArray&quot;,&quot;size&quot;,&quot;first&quot;,&quot;head&quot;,&quot;take&quot;,&quot;initial&quot;,&quot;rest&quot;,&quot;tail&quot;,&quot;drop&quot;,&quot;last&quot;,&quot;without&quot;,&quot;indexOf&quot;,&quot;shuffle&quot;,&quot;lastIndexOf&quot;,&quot;isEmpty&quot;,&quot;chain&quot;];h.each(t,function(a){q.prototype[a]=function(){var b=f.call(arguments);return b.unshift(this.models),h[a].apply(h,b)}});var u=[&quot;groupBy&quot;,&quot;countBy&quot;,&quot;sortBy&quot;];h.each(u,function(a){q.prototype[a]=function(b,c){var d=h.isFunction(b)?b:function(a){return a.get(b)};return h[a](this.models,d,c)}});var v=a.View=function(a){this.cid=h.uniqueId(&quot;view&quot;),this._configure(a||{}),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},w=/^(\S+)\s*(.*)$/,x=[&quot;model&quot;,&quot;collection&quot;,&quot;el&quot;,&quot;id&quot;,&quot;attributes&quot;,&quot;className&quot;,&quot;tagName&quot;,&quot;events&quot;];h.extend(v.prototype,i,{tagName:&quot;div&quot;,$:function(a){return this.$el.find(a)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(b,c){return this.$el&amp;&amp;this.undelegateEvents(),this.$el=b instanceof a.$?b:a.$(b),this.el=this.$el[0],c!==!1&amp;&amp;this.delegateEvents(),this},delegateEvents:function(a){if(!a&amp;&amp;!(a=h.result(this,&quot;events&quot;)))return this;this.undelegateEvents();for(var b in a){var c=a[b];if(h.isFunction(c)||(c=this[a[b]]),c){var d=b.match(w),e=d[1],f=d[2];c=h.bind(c,this),e+=&quot;.delegateEvents&quot;+this.cid,&quot;&quot;===f?this.$el.on(e,c):this.$el.on(e,f,c)}}return this},undelegateEvents:function(){return this.$el.off(&quot;.delegateEvents&quot;+this.cid),this},_configure:function(a){this.options&amp;&amp;(a=h.extend({},h.result(this,&quot;options&quot;),a)),h.extend(this,h.pick(a,x)),this.options=a},_ensureElement:function(){if(this.el)this.setElement(h.result(this,&quot;el&quot;),!1);else{var b=h.extend({},h.result(this,&quot;attributes&quot;));this.id&amp;&amp;(b.id=h.result(this,&quot;id&quot;)),this.className&amp;&amp;(b[&quot;class&quot;]=h.result(this,&quot;className&quot;));var c=a.$(&quot;&lt;&quot;+h.result(this,&quot;tagName&quot;)+&quot;&gt;&quot;).attr(b);this.setElement(c,!1)}}}),a.sync=function(b,c,d){var e=y[b];h.defaults(d||(d={}),{emulateHTTP:a.emulateHTTP,emulateJSON:a.emulateJSON});var f={type:e,dataType:&quot;json&quot;};if(d.url||(f.url=h.result(c,&quot;url&quot;)||K()),null!=d.data||!c||&quot;create&quot;!==b&amp;&amp;&quot;update&quot;!==b&amp;&amp;&quot;patch&quot;!==b||(f.contentType=&quot;application/json&quot;,f.data=JSON.stringify(d.attrs||c.toJSON(d))),d.emulateJSON&amp;&amp;(f.contentType=&quot;application/x-www-form-urlencoded&quot;,f.data=f.data?{model:f.data}:{}),d.emulateHTTP&amp;&amp;(&quot;PUT&quot;===e||&quot;DELETE&quot;===e||&quot;PATCH&quot;===e)){f.type=&quot;POST&quot;,d.emulateJSON&amp;&amp;(f.data._method=e);var g=d.beforeSend;d.beforeSend=function(a){return a.setRequestHeader(&quot;X-HTTP-Method-Override&quot;,e),g?g.apply(this,arguments):void 0}}&quot;GET&quot;===f.type||d.emulateJSON||(f.processData=!1),&quot;PATCH&quot;!==f.type||!window.ActiveXObject||window.external&amp;&amp;window.external.msActiveXFilteringEnabled||(f.xhr=function(){return new ActiveXObject(&quot;Microsoft.XMLHTTP&quot;)});var i=d.xhr=a.ajax(h.extend(f,d));return c.trigger(&quot;request&quot;,c,i,d),i};var y={create:&quot;POST&quot;,update:&quot;PUT&quot;,patch:&quot;PATCH&quot;,&quot;delete&quot;:&quot;DELETE&quot;,read:&quot;GET&quot;};a.ajax=function(){return a.$.ajax.apply(a.$,arguments)};var z=a.Router=function(a){a||(a={}),a.routes&amp;&amp;(this.routes=a.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},A=/\((.*?)\)/g,B=/(\(\?)?:\w+/g,C=/\*\w+/g,D=/[\-{}\[\]+?.,\\\^$|#\s]/g;h.extend(z.prototype,i,{initialize:function(){},route:function(b,c,d){h.isRegExp(b)||(b=this._routeToRegExp(b)),h.isFunction(c)&amp;&amp;(d=c,c=&quot;&quot;),d||(d=this[c]);var e=this;return a.history.route(b,function(f){var g=e._extractParameters(b,f);d&amp;&amp;d.apply(e,g),e.trigger.apply(e,[&quot;route:&quot;+c].concat(g)),e.trigger(&quot;route&quot;,c,g),a.history.trigger(&quot;route&quot;,e,c,g)}),this},navigate:function(b,c){return a.history.navigate(b,c),this},_bindRoutes:function(){if(this.routes){this.routes=h.result(this,&quot;routes&quot;);for(var a,b=h.keys(this.routes);null!=(a=b.pop());)this.route(a,this.routes[a])}},_routeToRegExp:function(a){return a=a.replace(D,&quot;\\$&amp;&quot;).replace(A,&quot;(?:$1)?&quot;).replace(B,function(a,b){return b?a:&quot;([^/]+)&quot;}).replace(C,&quot;(.*?)&quot;),new RegExp(&quot;^&quot;+a+&quot;$&quot;)},_extractParameters:function(a,b){var c=a.exec(b).slice(1);return h.map(c,function(a){return a?decodeURIComponent(a):null})}});var E=a.History=function(){this.handlers=[],h.bindAll(this,&quot;checkUrl&quot;),&quot;undefined&quot;!=typeof window&amp;&amp;(this.location=window.location,this.history=window.history)},F=/^[#\/]|\s+$/g,G=/^\/+|\/+$/g,H=/msie [\w.]+/,I=/\/$/;E.started=!1,h.extend(E.prototype,i,{interval:50,getHash:function(a){var b=(a||this).location.href.match(/#(.*)$/);return b?b[1]:&quot;&quot;},getFragment:function(a,b){if(null==a)if(this._hasPushState||!this._wantsHashChange||b){a=this.location.pathname;var c=this.root.replace(I,&quot;&quot;);a.indexOf(c)||(a=a.substr(c.length))}else a=this.getHash();return a.replace(F,&quot;&quot;)},start:function(b){if(E.started)throw new Error(&quot;Backbone.history has already been started&quot;);E.started=!0,this.options=h.extend({},{root:&quot;/&quot;},this.options,b),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&amp;&amp;this.history&amp;&amp;this.history.pushState);var c=this.getFragment(),d=document.documentMode,e=H.exec(navigator.userAgent.toLowerCase())&amp;&amp;(!d||7&gt;=d);this.root=(&quot;/&quot;+this.root+&quot;/&quot;).replace(G,&quot;/&quot;),e&amp;&amp;this._wantsHashChange&amp;&amp;(this.iframe=a.$(&#39;&lt;iframe src=&quot;javascript:0&quot; tabindex=&quot;-1&quot; /&gt;&#39;).hide().appendTo(&quot;body&quot;)[0].contentWindow,this.navigate(c)),this._hasPushState?a.$(window).on(&quot;popstate&quot;,this.checkUrl):this._wantsHashChange&amp;&amp;&quot;onhashchange&quot;in window&amp;&amp;!e?a.$(window).on(&quot;hashchange&quot;,this.checkUrl):this._wantsHashChange&amp;&amp;(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=c;var f=this.location,g=f.pathname.replace(/[^\/]$/,&quot;$&amp;/&quot;)===this.root;return this._wantsHashChange&amp;&amp;this._wantsPushState&amp;&amp;!this._hasPushState&amp;&amp;!g?(this.fragment=this.getFragment(null,!0),this.location.replace(this.root+this.location.search+&quot;#&quot;+this.fragment),!0):(this._wantsPushState&amp;&amp;this._hasPushState&amp;&amp;g&amp;&amp;f.hash&amp;&amp;(this.fragment=this.getHash().replace(F,&quot;&quot;),this.history.replaceState({},document.title,this.root+this.fragment+f.search)),this.options.silent?void 0:this.loadUrl())},stop:function(){a.$(window).off(&quot;popstate&quot;,this.checkUrl).off(&quot;hashchange&quot;,this.checkUrl),clearInterval(this._checkUrlInterval),E.started=!1},route:function(a,b){this.handlers.unshift({route:a,callback:b})},checkUrl:function(){var a=this.getFragment();return a===this.fragment&amp;&amp;this.iframe&amp;&amp;(a=this.getFragment(this.getHash(this.iframe))),a===this.fragment?!1:(this.iframe&amp;&amp;this.navigate(a),this.loadUrl()||this.loadUrl(this.getHash()),void 0)},loadUrl:function(a){var b=this.fragment=this.getFragment(a),c=h.any(this.handlers,function(a){return a.route.test(b)?(a.callback(b),!0):void 0});return c},navigate:function(a,b){if(!E.started)return!1;if(b&amp;&amp;b!==!0||(b={trigger:b}),a=this.getFragment(a||&quot;&quot;),this.fragment!==a){this.fragment=a;var c=this.root+a;if(this._hasPushState)this.history[b.replace?&quot;replaceState&quot;:&quot;pushState&quot;]({},document.title,c);else{if(!this._wantsHashChange)return this.location.assign(c);this._updateHash(this.location,a,b.replace),this.iframe&amp;&amp;a!==this.getFragment(this.getHash(this.iframe))&amp;&amp;(b.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,a,b.replace))}b.trigger&amp;&amp;this.loadUrl(a)}},_updateHash:function(a,b,c){if(c){var d=a.href.replace(/(javascript:|#).*$/,&quot;&quot;);a.replace(d+&quot;#&quot;+b)}else a.hash=&quot;#&quot;+b}}),a.history=new E;var J=function(a,b){var c,d=this;c=a&amp;&amp;h.has(a,&quot;constructor&quot;)?a.constructor:function(){return d.apply(this,arguments)},h.extend(c,d,b);var e=function(){this.constructor=c};return e.prototype=d.prototype,c.prototype=new e,a&amp;&amp;h.extend(c.prototype,a),c.__super__=d.prototype,c};n.extend=q.extend=z.extend=v.extend=E.extend=J;var K=function(){throw new Error(&#39;A &quot;url&quot; property or function must be specified&#39;)},L=function(a,b){var c=b.error;b.error=function(d){c&amp;&amp;c(a,d,b),a.trigger(&quot;error&quot;,a,d,b)}}}.call(this),function(a,b){&quot;function&quot;==typeof define&amp;&amp;define.amd?define([],b):a.Vectorizer=a.V=b()}(this,function(){function a(){var a=++l+&quot;&quot;;return&quot;v-&quot;+a}function b(a,b,d){if(!a)return void 0;if(&quot;object&quot;==typeof a)return new h(a);if(b=b||{},&quot;svg&quot;===a.toLowerCase())b.xmlns=j.xmlns,b[&quot;xmlns:xlink&quot;]=j.xlink,b.version=k;else if(&quot;&lt;&quot;===a[0]){var e=&#39;&lt;svg xmlns=&quot;&#39;+j.xmlns+&#39;&quot; xmlns:xlink=&quot;&#39;+j.xlink+&#39;&quot; version=&quot;&#39;+k+&#39;&quot;&gt;&#39;+a+&quot;&lt;/svg&gt;&quot;,f=new DOMParser;f.async=!1;var g=f.parseFromString(e,&quot;text/xml&quot;).documentElement;if(g.childNodes.length&gt;1){for(var i=[],l=0,m=g.childNodes.length;m&gt;l;l++){var n=g.childNodes[l];i.push(new h(document.importNode(n,!0)))}return i}return new h(document.importNode(g.firstChild,!0))}a=document.createElementNS(j.xmlns,a);for(var o in b)c(a,o,b[o]);&quot;[object Array]&quot;!=Object.prototype.toString.call(d)&amp;&amp;(d=[d]);for(var p,l=0,m=d[0]&amp;&amp;d.length||0;m&gt;l;l++)p=d[l],a.appendChild(p instanceof h?p.node:p);return new h(a)}function c(a,b,c){if(b.indexOf(&quot;:&quot;)&gt;-1){var d=b.split(&quot;:&quot;);a.setAttributeNS(j[d[0]],d[1],c)}else&quot;id&quot;===b?a.id=c:a.setAttribute(b,c)}function d(a){var b,c,d;if(a){var e=a.match(/translate\((.*)\)/);e&amp;&amp;(b=e[1].split(&quot;,&quot;));var f=a.match(/rotate\((.*)\)/);f&amp;&amp;(c=f[1].split(&quot;,&quot;));var g=a.match(/scale\((.*)\)/);g&amp;&amp;(d=g[1].split(&quot;,&quot;))}var h=d&amp;&amp;d[0]?parseFloat(d[0]):1;return{translate:{tx:b&amp;&amp;b[0]?parseInt(b[0],10):0,ty:b&amp;&amp;b[1]?parseInt(b[1],10):0},rotate:{angle:c&amp;&amp;c[0]?parseInt(c[0],10):0,cx:c&amp;&amp;c[1]?parseInt(c[1],10):void 0,cy:c&amp;&amp;c[2]?parseInt(c[2],10):void 0},scale:{sx:h,sy:d&amp;&amp;d[1]?parseFloat(d[1]):h}}}function e(a,b){var c=b.x*a.a+b.y*a.c+0,d=b.x*a.b+b.y*a.d+0;return{x:c,y:d}}function f(a){var b=e(a,{x:0,y:1}),c=e(a,{x:1,y:0}),d=180/Math.PI*Math.atan2(b.y,b.x)-90,f=180/Math.PI*Math.atan2(c.y,c.x);return{translateX:a.e,translateY:a.f,scaleX:Math.sqrt(a.a*a.a+a.b*a.b),scaleY:Math.sqrt(a.c*a.c+a.d*a.d),skewX:d,skewY:f,rotation:d}}function h(b){this.node=b,this.node.id||(this.node.id=a())}function i(a){var b=a.rx||a[&quot;top-rx&quot;]||0,c=a.rx||a[&quot;bottom-rx&quot;]||0,d=a.ry||a[&quot;top-ry&quot;]||0,e=a.ry||a[&quot;bottom-ry&quot;]||0;return[&quot;M&quot;,a.x,a.y+d,&quot;v&quot;,a.height-d-e,&quot;a&quot;,c,e,0,0,0,c,e,&quot;h&quot;,a.width-2*c,&quot;a&quot;,c,e,0,0,0,c,-e,&quot;v&quot;,-(a.height-e-d),&quot;a&quot;,b,d,0,0,0,-b,-d,&quot;h&quot;,-(a.width-2*b),&quot;a&quot;,b,d,0,0,0,-b,d].join(&quot; &quot;)}!(!window.SVGAngle&amp;&amp;!document.implementation.hasFeature(&quot;http://www.w3.org/TR/SVG11/feature#BasicStructure&quot;,&quot;1.1&quot;));var j={xmlns:&quot;http://www.w3.org/2000/svg&quot;,xlink:&quot;http://www.w3.org/1999/xlink&quot;},k=&quot;1.1&quot;,l=0;h.prototype={translate:function(a,b){b=b||0;var c=this.attr(&quot;transform&quot;)||&quot;&quot;,e=d(c);if(&quot;undefined&quot;==typeof a)return e.translate;c=c.replace(/translate\([^\)]*\)/g,&quot;&quot;).trim();var f=e.translate.tx+a,g=e.translate.ty+b;return this.attr(&quot;transform&quot;,&quot;translate(&quot;+f+&quot;,&quot;+g+&quot;) &quot;+c),this},rotate:function(a,b,c){var e=this.attr(&quot;transform&quot;)||&quot;&quot;,f=d(e);if(&quot;undefined&quot;==typeof a)return f.rotate;e=e.replace(/rotate\([^\)]*\)/g,&quot;&quot;).trim();var g=f.rotate.angle+a%360,h=void 0!==b&amp;&amp;void 0!==c?&quot;,&quot;+b+&quot;,&quot;+c:&quot;&quot;;return this.attr(&quot;transform&quot;,e+&quot; rotate(&quot;+g+h+&quot;)&quot;),this},scale:function(a,b){b=&quot;undefined&quot;==typeof b?a:b;var c=this.attr(&quot;transform&quot;)||&quot;&quot;,e=d(c);return&quot;undefined&quot;==typeof a?e.scale:(c=c.replace(/scale\([^\)]*\)/g,&quot;&quot;).trim(),this.attr(&quot;transform&quot;,c+&quot; scale(&quot;+a+&quot;,&quot;+b+&quot;)&quot;),this)},bbox:function(a,b){if(!this.node.ownerSVGElement)return{x:0,y:0,width:0,height:0};var c;try{c=this.node.getBBox(),c={x:0|c.x,y:0|c.y,width:0|c.width,height:0|c.height}}catch(d){c={x:this.node.clientLeft,y:this.node.clientTop,width:this.node.clientWidth,height:this.node.clientHeight}}if(a)return c;var e=this.node.getTransformToElement(b||this.node.ownerSVGElement),f=[],g=this.node.ownerSVGElement.createSVGPoint();g.x=c.x,g.y=c.y,f.push(g.matrixTransform(e)),g.x=c.x+c.width,g.y=c.y,f.push(g.matrixTransform(e)),g.x=c.x+c.width,g.y=c.y+c.height,f.push(g.matrixTransform(e)),g.x=c.x,g.y=c.y+c.height,f.push(g.matrixTransform(e));for(var h=f[0].x,i=h,j=f[0].y,k=j,l=1,m=f.length;m&gt;l;l++){var n=f[l].x,o=f[l].y;h&gt;n?h=n:n&gt;i&amp;&amp;(i=n),j&gt;o?j=o:o&gt;k&amp;&amp;(k=o)}return{x:h,y:j,width:i-h,height:k-j}},text:function(a){var b,c=a.split(&quot;\n&quot;),d=0;if(this.attr(&quot;y&quot;,&quot;0.8em&quot;),this.attr(&quot;display&quot;,a?null:&quot;none&quot;),1===c.length)return this.node.textContent=a,this;for(this.node.textContent=&quot;&quot;;d&lt;c.length;d++)b=m(&quot;tspan&quot;,{dy:0==d?&quot;0em&quot;:&quot;1em&quot;,x:this.attr(&quot;x&quot;)||0}),b.node.textContent=c[d],this.append(b);return this},attr:function(a,b){if(&quot;string&quot;==typeof a&amp;&amp;&quot;undefined&quot;==typeof b)return this.node.getAttribute(a);if(&quot;object&quot;==typeof a)for(var d in a)a.hasOwnProperty(d)&amp;&amp;c(this.node,d,a[d]);else c(this.node,a,b);return this},remove:function(){this.node.parentNode&amp;&amp;this.node.parentNode.removeChild(this.node)},append:function(a){var b=a;&quot;[object Array]&quot;!==Object.prototype.toString.call(a)&amp;&amp;(b=[a]);for(var c=0,d=b.length;d&gt;c;c++)a=b[c],this.node.appendChild(a instanceof h?a.node:a);return this},prepend:function(a){this.node.insertBefore(a instanceof h?a.node:a,this.node.firstChild)},svg:function(){return this.node instanceof window.SVGSVGElement?this:m(this.node.ownerSVGElement)},defs:function(){var a=this.svg().node.getElementsByTagName(&quot;defs&quot;);return a&amp;&amp;a.length?m(a[0]):void 0},clone:function(){var b=m(this.node.cloneNode(!0));return b.node.id=a(),b},findOne:function(a){var b=this.node.querySelector(a);return b?m(b):void 0},find:function(a){for(var b=this.node.querySelectorAll(a),c=0,d=b.length;d&gt;c;c++)b[c]=m(b[c]);return b},toLocalPoint:function(a,b){var c=this.svg().node,d=c.createSVGPoint();d.x=a,d.y=b;try{var e=d.matrixTransform(c.getScreenCTM().inverse()),f=this.node.getTransformToElement(c).inverse()}catch(g){return d}return e.matrixTransform(f)},translateCenterToPoint:function(a){var b=this.bbox(),c=g.rect(b).center();this.translate(a.x-c.x,a.y-c.y)},translateAndAutoOrient:function(a,b,c){var d=this.scale();this.attr(&quot;transform&quot;,&quot;&quot;),this.scale(d.sx,d.sy);var e=this.svg().node,h=this.bbox(!1,c),i=e.createSVGTransform();i.setTranslate(-h.x-h.width/2,-h.y-h.height/2);var j=e.createSVGTransform(),k=g.point(a).changeInAngle(a.x-b.x,a.y-b.y,b);j.setRotate(k,0,0);var l=e.createSVGTransform(),m=g.point(a).move(b,h.width/2);l.setTranslate(a.x+(a.x-m.x),a.y+(a.y-m.y));var n=this.node.getTransformToElement(c),o=e.createSVGTransform();o.setMatrix(l.matrix.multiply(j.matrix.multiply(i.matrix.multiply(n))));var p=f(o.matrix);return this.translate(p.translateX,p.translateY),this.rotate(p.rotation),this},animateAlongPath:function(a,b){var c=m(&quot;animateMotion&quot;,a),d=m(&quot;mpath&quot;,{&quot;xlink:href&quot;:&quot;#&quot;+m(b).node.id});c.append(d),this.append(c);try{c.node.beginElement()}catch(e){if(&quot;fake&quot;===document.documentElement.getAttribute(&quot;smiling&quot;)){var f=c.node;f.animators=[];var g=f.getAttribute(&quot;id&quot;);g&amp;&amp;(id2anim[g]=f);for(var h=getTargets(f),i=0,j=h.length;j&gt;i;i++){var k=h[i],l=new Animator(f,k,i);animators.push(l),f.animators[i]=l,l.register()}}}},hasClass:function(a){return new RegExp(&quot;(\\s|^)&quot;+a+&quot;(\\s|$)&quot;).test(this.node.getAttribute(&quot;class&quot;))},addClass:function(a){return this.hasClass(a)||this.node.setAttribute(&quot;class&quot;,this.node.getAttribute(&quot;class&quot;)+&quot; &quot;+a),this},removeClass:function(a){var b=this.node.getAttribute(&quot;class&quot;).replace(new RegExp(&quot;(\\s|^)&quot;+a+&quot;(\\s|$)&quot;,&quot;g&quot;),&quot;$2&quot;);return this.hasClass(a)&amp;&amp;this.node.setAttribute(&quot;class&quot;,b),this},toggleClass:function(a,b){var c=&quot;undefined&quot;==typeof b?this.hasClass(a):!b;return c?this.removeClass(a):this.addClass(a),this}};var m=b;m.decomposeMatrix=f,m.rectToPath=i;var n=m(&quot;svg&quot;).node;return m.createSVGMatrix=function(a){var b=n.createSVGMatrix();for(var c in a)b[c]=a[c];return b},m.createSVGTransform=function(){return n.createSVGTransform()},m.createSVGPoint=function(a,b){var c=n.createSVGPoint();return c.x=a,c.y=b,c},m}),function(a,b){&quot;function&quot;==typeof define&amp;&amp;define.amd?define([],b):&quot;object&quot;==typeof exports?module.exports=b():a.g=b()}(this,function(){function a(b,c){if(!(this instanceof a))return new a(b,c);var d;void 0===c&amp;&amp;Object(b)!==b?(d=b.split(-1===b.indexOf(&quot;@&quot;)?&quot; &quot;:&quot;@&quot;),this.x=parseInt(d[0],10),this.y=parseInt(d[1],10)):Object(b)===b?(this.x=b.x,this.y=b.y):(this.x=b,this.y=c)}function b(c,d){return this instanceof b?(this.start=a(c),this.end=a(d),void 0):new b(c,d)}function c(a,b,d,e){return this instanceof c?(void 0===b&amp;&amp;(b=a.y,d=a.width,e=a.height,a=a.x),this.x=a,this.y=b,this.width=d,this.height=e,void 0):new c(a,b,d,e)}function d(b,c,e){return this instanceof d?(b=a(b),this.x=b.x,this.y=b.y,this.a=c,this.b=e,void 0):new d(b,c,e)}var e=Math,f=e.abs,g=e.cos,h=e.sin,i=e.sqrt,j=e.min,k=e.max;e.atan;var l=e.atan2;e.acos;var m=e.round,n=e.floor,o=e.PI,p=e.random,q=function(a){return 180*a/o%360},r=function(a){return a%360*o/180},s=function(a,b){return b*Math.round(a/b)},t=function(a){return a%360+(0&gt;a?360:0)};a.prototype={toString:function(){return this.x+&quot;@&quot;+this.y},adhereToRect:function(a){return a.containsPoint(this)?this:(this.x=j(k(this.x,a.x),a.x+a.width),this.y=j(k(this.y,a.y),a.y+a.height),this)},theta:function(b){b=a(b);var c=-(b.y-this.y),d=b.x-this.x,e=10,f=0==c.toFixed(e)&amp;&amp;0==d.toFixed(e)?0:l(c,d);return 0&gt;f&amp;&amp;(f=2*o+f),180*f/o},distance:function(a){return b(this,a).length()},manhattanDistance:function(a){return f(a.x-this.x)+f(a.y-this.y)},offset:function(a,b){return this.x+=a||0,this.y+=b||0,this},magnitude:function(){return i(this.x*this.x+this.y*this.y)||.01},update:function(a,b){return this.x=a||0,this.y=b||0,this},round:function(a){return this.x=a?this.x.toFixed(a):m(this.x),this.y=a?this.y.toFixed(a):m(this.y),this},normalize:function(a){var b=(a||1)/this.magnitude();return this.x=b*this.x,this.y=b*this.y,this},difference:function(b){return a(this.x-b.x,this.y-b.y)},bearing:function(a){return b(this,a).bearing()},toPolar:function(b){b=b&amp;&amp;a(b)||a(0,0);var c=this.x,d=this.y;return this.x=i((c-b.x)*(c-b.x)+(d-b.y)*(d-b.y)),this.y=r(b.theta(a(c,d))),this},rotate:function(b,c){c=(c+360)%360,this.toPolar(b),this.y+=r(c);var d=a.fromPolar(this.x,this.y,b);return this.x=d.x,this.y=d.y,this},move:function(b,c){var d=r(a(b).theta(this));return this.offset(g(d)*c,-h(d)*c)},changeInAngle:function(b,c,d){return a(this).offset(-b,-c).theta(d)-this.theta(d)},equals:function(a){return this.x===a.x&amp;&amp;this.y===a.y},snapToGrid:function(a,b){return this.x=s(this.x,a),this.y=s(this.y,b||a),this}},a.fromPolar=function(b,c,d){d=d&amp;&amp;a(d)||a(0,0);var e=f(b*g(c)),i=f(b*h(c)),j=t(q(c));return 90&gt;j?i=-i:180&gt;j?(e=-e,i=-i):270&gt;j&amp;&amp;(e=-e),a(d.x+e,d.y+i)},a.random=function(b,c,d,e){return a(n(p()*(c-b+1)+b),n(p()*(e-d+1)+d))},b.prototype={toString:function(){return this.start.toString()+&quot; &quot;+this.end.toString()},length:function(){return i(this.squaredLength())},squaredLength:function(){var a=this.start.x,b=this.start.y,c=this.end.x,d=this.end.y;return(a-=c)*a+(b-=d)*b},midpoint:function(){return a((this.start.x+this.end.x)/2,(this.start.y+this.end.y)/2)},intersection:function(b){var c=a(this.end.x-this.start.x,this.end.y-this.start.y),d=a(b.end.x-b.start.x,b.end.y-b.start.y),e=c.x*d.y-c.y*d.x,f=a(b.start.x-this.start.x,b.start.y-this.start.y),g=f.x*d.y-f.y*d.x,h=f.x*c.y-f.y*c.x;if(0===e||0&gt;g*e||0&gt;h*e)return null;if(e&gt;0){if(g&gt;e||h&gt;e)return null}else if(e&gt;g||e&gt;h)return null;return a(this.start.x+g*c.x/e,this.start.y+g*c.y/e)},bearing:function(){var a=r(this.start.y),b=r(this.end.y),c=this.start.x,d=this.end.x,e=r(d-c),f=h(e)*g(b),i=g(a)*h(b)-h(a)*g(b)*g(e),j=q(l(f,i)),k=[&quot;NE&quot;,&quot;E&quot;,&quot;SE&quot;,&quot;S&quot;,&quot;SW&quot;,&quot;W&quot;,&quot;NW&quot;,&quot;N&quot;],m=j-22.5;return 0&gt;m&amp;&amp;(m+=360),m=parseInt(m/45),k[m]}},c.prototype={toString:function(){return this.origin().toString()+&quot; &quot;+this.corner().toString()},origin:function(){return a(this.x,this.y)},corner:function(){return a(this.x+this.width,this.y+this.height)},topRight:function(){return a(this.x+this.width,this.y)},bottomLeft:function(){return a(this.x,this.y+this.height)},center:function(){return a(this.x+this.width/2,this.y+this.height/2)},intersect:function(a){var b=this.origin(),c=this.corner(),d=a.origin(),e=a.corner();return e.x&lt;=b.x||e.y&lt;=b.y||d.x&gt;=c.x||d.y&gt;=c.y?!1:!0},sideNearestToPoint:function(b){b=a(b);var c=b.x-this.x,d=this.x+this.width-b.x,e=b.y-this.y,f=this.y+this.height-b.y,g=c,h=&quot;left&quot;;return g&gt;d&amp;&amp;(g=d,h=&quot;right&quot;),g&gt;e&amp;&amp;(g=e,h=&quot;top&quot;),g&gt;f&amp;&amp;(g=f,h=&quot;bottom&quot;),h},containsPoint:function(b){return b=a(b),b.x&gt;=this.x&amp;&amp;b.x&lt;=this.x+this.width&amp;&amp;b.y&gt;=this.y&amp;&amp;b.y&lt;=this.y+this.height?!0:!1},containsRect:function(a){var b=c(a).normalize(),d=b.width,e=b.height,f=b.x,g=b.y,h=this.width,i=this.height;if(0&gt;(h|i|d|e))return!1;var j=this.x,k=this.y;if(j&gt;f||k&gt;g)return!1;if(h+=j,d+=f,f&gt;=d){if(h&gt;=j||d&gt;h)return!1}else if(h&gt;=j&amp;&amp;d&gt;h)return!1;if(i+=k,e+=g,g&gt;=e){if(i&gt;=k||e&gt;i)return!1}else if(i&gt;=k&amp;&amp;e&gt;i)return!1;return!0},pointNearestToPoint:function(b){if(b=a(b),this.containsPoint(b)){var c=this.sideNearestToPoint(b);switch(c){case&quot;right&quot;:return a(this.x+this.width,b.y);case&quot;left&quot;:return a(this.x,b.y);case&quot;bottom&quot;:return a(b.x,this.y+this.height);case&quot;top&quot;:return a(b.x,this.y)}}return b.adhereToRect(this)},intersectionWithLineFromCenterToPoint:function(c,d){c=a(c);var e,f=a(this.x+this.width/2,this.y+this.height/2);d&amp;&amp;c.rotate(f,d);for(var g=[b(this.origin(),this.topRight()),b(this.topRight(),this.corner()),b(this.corner(),this.bottomLeft()),b(this.bottomLeft(),this.origin())],h=b(f,c),i=g.length-1;i&gt;=0;--i){var j=g[i].intersection(h);if(null!==j){e=j;break}}return e&amp;&amp;d&amp;&amp;e.rotate(f,-d),e},moveAndExpand:function(a){return this.x+=a.x,this.y+=a.y,this.width+=a.width,this.height+=a.height,this},round:function(a){return this.x=a?this.x.toFixed(a):m(this.x),this.y=a?this.y.toFixed(a):m(this.y),this.width=a?this.width.toFixed(a):m(this.width),this.height=a?this.height.toFixed(a):m(this.height),this},normalize:function(){var a=this.x,b=this.y,c=this.width,d=this.height;return this.width&lt;0&amp;&amp;(a=this.x+this.width,c=-this.width),this.height&lt;0&amp;&amp;(b=this.y+this.height,d=-this.height),this.x=a,this.y=b,this.width=c,this.height=d,this}},d.prototype={toString:function(){return a(this.x,this.y).toString()+&quot; &quot;+this.a+&quot; &quot;+this.b},bbox:function(){return c(this.x-this.a,this.y-this.b,2*this.a,2*this.b)},intersectionWithLineFromCenterToPoint:function(b,c){b=a(b),c&amp;&amp;b.rotate(a(this.x,this.y),c);var d,e=b.x-this.x,f=b.y-this.y;if(0===e)return d=this.bbox().pointNearestToPoint(b),c?d.rotate(a(this.x,this.y),-c):d;var g=f/e,h=g*g,j=this.a*this.a,k=this.b*this.b,l=i(1/(1/j+h/k));l=0&gt;e?-l:l;var m=g*l;return d=a(this.x+l,this.y+m),c?d.rotate(a(this.x,this.y),-c):d}};var u={curveThroughPoints:function(a){for(var b=this.getCurveControlPoints(a),c=[&quot;M&quot;,a[0].x,a[0].y],d=0;d&lt;b[0].length;d++)c.push(&quot;C&quot;,b[0][d].x,b[0][d].y,b[1][d].x,b[1][d].y,a[d+1].x,a[d+1].y);return c},getCurveControlPoints:function(b){var c,d=[],e=[],f=b.length-1;if(1==f)return d[0]=a((2*b[0].x+b[1].x)/3,(2*b[0].y+b[1].y)/3),e[0]=a(2*d[0].x-b[0].x,2*d[0].y-b[0].y),[d,e];var g=[];for(c=1;f-1&gt;c;c++)g[c]=4*b[c].x+2*b[c+1].x;g[0]=b[0].x+2*b[1].x,g[f-1]=(8*b[f-1].x+b[f].x)/2;var h=this.getFirstControlPoints(g);for(c=1;f-1&gt;c;++c)g[c]=4*b[c].y+2*b[c+1].y;g[0]=b[0].y+2*b[1].y,g[f-1]=(8*b[f-1].y+b[f].y)/2;var i=this.getFirstControlPoints(g);for(c=0;f&gt;c;c++)d.push(a(h[c],i[c])),f-1&gt;c?e.push(a(2*b[c+1].x-h[c+1],2*b[c+1].y-i[c+1])):e.push(a((b[f].x+h[f-1])/2,(b[f].y+i[f-1])/2));return[d,e]},getFirstControlPoints:function(a){var b=a.length,c=[],d=[],e=2;c[0]=a[0]/e;for(var f=1;b&gt;f;f++)d[f]=1/e,e=(b-1&gt;f?4:3.5)-d[f],c[f]=(a[f]-c[f-1])/e;for(f=1;b&gt;f;f++)c[b-f-1]-=d[b-f]*c[b-f];return c}},v={linear:function(a,b,c){var d=a[1]-a[0],e=b[1]-b[0];return(c-a[0])/d*e+b[0]||0}};return{toDeg:q,toRad:r,snapToGrid:s,normalizeAngle:t,point:a,line:b,rect:c,ellipse:d,bezier:u,scale:v}}),&quot;object&quot;==typeof exports)var _=require(&quot;lodash&quot;);var joint={dia:{},ui:{},layout:{},shapes:{},format:{},connectors:{},routers:{},util:{hashCode:function(a){var b=0;if(0==a.length)return b;for(var c=0;c&lt;a.length;c++){var d=a.charCodeAt(c);b=(b&lt;&lt;5)-b+d,b&amp;=b}return b},getByPath:function(a,b,c){c=c||&quot;.&quot;;for(var d,e=b.split(c);e.length;){if(d=e.shift(),!(d in a))return void 0;a=a[d]}return a},setByPath:function(a,b,c,d){d=d||&quot;.&quot;;var e=b.split(d),f=a,g=0;if(b.indexOf(d)&gt;-1){for(var h=e.length;h-1&gt;g;g++)f=f[e[g]]||(f[e[g]]={});f[e[h-1]]=c}else a[b]=c;return a},unsetByPath:function(a,b,c){c=c||&quot;.&quot;;var d=b.lastIndexOf(c);if(d&gt;-1){var e=joint.util.getByPath(a,b.substr(0,d),c);e&amp;&amp;delete e[b.slice(d+1)]}else delete a[b];return a},flattenObject:function(a,b,c){b=b||&quot;.&quot;;var d={};for(var e in a)if(a.hasOwnProperty(e)){var f=&quot;object&quot;==typeof a[e];if(f&amp;&amp;c&amp;&amp;c(a[e])&amp;&amp;(f=!1),f){var g=this.flattenObject(a[e],b,c);for(var h in g)g.hasOwnProperty(h)&amp;&amp;(d[e+b+h]=g[h])}else d[e]=a[e]}return d},uuid:function(){return&quot;xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx&quot;.replace(/[xy]/g,function(a){var b=0|16*Math.random(),c=&quot;x&quot;==a?b:8|3&amp;b;return c.toString(16)})},guid:function(a){return this.guid.id=this.guid.id||1,a.id=void 0===a.id?&quot;j_&quot;+this.guid.id++:a.id,a.id},mixin:function(){for(var a=arguments[0],b=1,c=arguments.length;c&gt;b;b++){var d=arguments[b];(Object(d)===d||_.isFunction(d)||null!==d&amp;&amp;void 0!==d)&amp;&amp;_.each(d,function(b,c){return this.mixin.deep&amp;&amp;Object(b)===b?(a[c]||(a[c]=_.isArray(b)?[]:{}),this.mixin(a[c],b),void 0):(a[c]!==b&amp;&amp;(this.mixin.supplement&amp;&amp;a.hasOwnProperty(c)||(a[c]=b)),void 0)},this)}return a},supplement:function(){this.mixin.supplement=!0;var a=this.mixin.apply(this,arguments);return this.mixin.supplement=!1,a},deepMixin:function(){this.mixin.deep=!0;var a=this.mixin.apply(this,arguments);return this.mixin.deep=!1,a},deepSupplement:function(){this.mixin.deep=this.mixin.supplement=!0;var a=this.mixin.apply(this,arguments);return this.mixin.deep=this.mixin.supplement=!1,a},normalizeEvent:function(a){return a.originalEvent&amp;&amp;a.originalEvent.changedTouches&amp;&amp;a.originalEvent.changedTouches.length?a.originalEvent.changedTouches[0]:a},nextFrame:function(){var a,b=&quot;undefined&quot;!=typeof window;if(b&amp;&amp;(a=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame),!a){var c=0;a=function(a){var b=(new Date).getTime(),d=Math.max(0,16-(b-c)),e=setTimeout(function(){a(b+d)},d);return c=b+d,e</div><div class='line' id='LC10'>}}return b?_.bind(a,window):a}(),cancelFrame:function(){var a,b=&quot;undefined&quot;!=typeof window;return b&amp;&amp;(a=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.msCancelAnimationFrame||window.msCancelRequestAnimationFrame||window.oCancelAnimationFrame||window.oCancelRequestAnimationFrame||window.mozCancelAnimationFrame||window.mozCancelRequestAnimationFrame),a=a||clearTimeout,b?_.bind(a,window):a}(),breakText:function(a,b,c,d){d=d||{};var e=b.width,f=b.height,g=d.svgDocument||V(&quot;svg&quot;).node,h=V(&quot;&lt;text&gt;&lt;tspan&gt;&lt;/tspan&gt;&lt;/text&gt;&quot;).attr(c||{}).node,i=h.firstChild,j=document.createTextNode(&quot;&quot;);i.appendChild(j),g.appendChild(h),d.svgDocument||document.body.appendChild(g);for(var k,l=a.split(&quot; &quot;),m=[],n=[],o=0,p=0,q=l.length;q&gt;o;o++){var r=l[o];if(j.data=n[p]?n[p]+&quot; &quot;+r:r,i.getComputedTextLength()&lt;=e)n[p]=j.data,k&amp;&amp;(m[p++]=!0,k=0);else{if(!n[p]||k){var s=!!k;if(k=r.length-1,s||!k){if(!k){if(!n[p]){n=[];break}l.splice(o,2,r+l[o+1]),q--,m[p++]=!0,o--;continue}l[o]=r.substring(0,k),l[o+1]=r.substring(k)+l[o+1]}else l.splice(o,1,r.substring(0,k),r.substring(k)),q++,p&amp;&amp;!m[p-1]&amp;&amp;p--;o--;continue}p++,o--}if(&quot;undefined&quot;!=typeof f){var t=t||1.25*h.getBBox().height;if(t*n.length&gt;f){n.splice(Math.floor(f/t));break}}}return d.svgDocument?g.removeChild(h):document.body.removeChild(g),n.join(&quot;\n&quot;)},timing:{linear:function(a){return a},quad:function(a){return a*a},cubic:function(a){return a*a*a},inout:function(a){if(0&gt;=a)return 0;if(a&gt;=1)return 1;var b=a*a,c=b*a;return 4*(.5&gt;a?c:3*(a-b)+c-.75)},exponential:function(a){return Math.pow(2,10*(a-1))},bounce:function(a){for(var b=0,c=1;1;b+=c,c/=2)if(a&gt;=(7-4*b)/11){var d=(11-6*b-11*a)/4;return-d*d+c*c}},reverse:function(a){return function(b){return 1-a(1-b)}},reflect:function(a){return function(b){return.5*(.5&gt;b?a(2*b):2-a(2-2*b))}},clamp:function(a,b,c){return b=b||0,c=c||1,function(d){var e=a(d);return b&gt;e?b:e&gt;c?c:e}},back:function(a){return a||(a=1.70158),function(b){return b*b*((a+1)*b-a)}},elastic:function(a){return a||(a=1.5),function(b){return Math.pow(2,10*(b-1))*Math.cos(20*Math.PI*a/3*b)}}},interpolate:{number:function(a,b){var c=b-a;return function(b){return a+c*b}},object:function(a,b){var c=_.keys(a);return function(d){var e,f,g={};for(e=c.length-1;-1!=e;e--)f=c[e],g[f]=a[f]+(b[f]-a[f])*d;return g}},hexColor:function(a,b){var c=parseInt(a.slice(1),16),d=parseInt(b.slice(1),16),e=255&amp;c,f=(255&amp;d)-e,g=65280&amp;c,h=(65280&amp;d)-g,i=16711680&amp;c,j=(16711680&amp;d)-i;return function(a){var b=255&amp;e+f*a,c=65280&amp;g+h*a,d=16711680&amp;i+j*a;return&quot;#&quot;+(1&lt;&lt;24|b|c|d).toString(16).slice(1)}},unit:function(a,b){var c=/(-?[0-9]*.[0-9]*)(px|em|cm|mm|in|pt|pc|%)/,d=c.exec(a),e=c.exec(b),f=e[1].indexOf(&quot;.&quot;),g=f&gt;0?e[1].length-f-1:0,a=+d[1],h=+e[1]-a,i=d[2];return function(b){return(a+h*b).toFixed(g)+i}}},filter:{blur:function(a){var b=_.isFinite(a.x)?a.x:2;return _.template(&#39;&lt;filter&gt;&lt;feGaussianBlur stdDeviation=&quot;${stdDeviation}&quot;/&gt;&lt;/filter&gt;&#39;,{stdDeviation:_.isFinite(a.y)?[b,a.y]:b})},dropShadow:function(a){var b=&quot;SVGFEDropShadowElement&quot;in window?&#39;&lt;filter&gt;&lt;feDropShadow stdDeviation=&quot;${blur}&quot; dx=&quot;${dx}&quot; dy=&quot;${dy}&quot; flood-color=&quot;${color}&quot; flood-opacity=&quot;${opacity}&quot;/&gt;&lt;/filter&gt;&#39;:&#39;&lt;filter&gt;&lt;feGaussianBlur in=&quot;SourceAlpha&quot; stdDeviation=&quot;${blur}&quot;/&gt;&lt;feOffset dx=&quot;${dx}&quot; dy=&quot;${dy}&quot; result=&quot;offsetblur&quot;/&gt;&lt;feFlood flood-color=&quot;${color}&quot;/&gt;&lt;feComposite in2=&quot;offsetblur&quot; operator=&quot;in&quot;/&gt;&lt;feComponentTransfer&gt;&lt;feFuncA type=&quot;linear&quot; slope=&quot;${opacity}&quot;/&gt;&lt;/feComponentTransfer&gt;&lt;feMerge&gt;&lt;feMergeNode/&gt;&lt;feMergeNode in=&quot;SourceGraphic&quot;/&gt;&lt;/feMerge&gt;&lt;/filter&gt;&#39;;return _.template(b,{dx:a.dx||0,dy:a.dy||0,opacity:_.isFinite(a.opacity)?a.opacity:1,color:a.color||&quot;black&quot;,blur:_.isFinite(a.blur)?a.blur:4})},grayscale:function(a){var b=_.isFinite(a.amount)?a.amount:1;return _.template(&#39;&lt;filter&gt;&lt;feColorMatrix type=&quot;matrix&quot; values=&quot;${a} ${b} ${c} 0 0 ${d} ${e} ${f} 0 0 ${g} ${b} ${h} 0 0 0 0 0 1 0&quot;/&gt;&lt;/filter&gt;&#39;,{a:.2126+.7874*(1-b),b:.7152-.7152*(1-b),c:.0722-.0722*(1-b),d:.2126-.2126*(1-b),e:.7152+.2848*(1-b),f:.0722-.0722*(1-b),g:.2126-.2126*(1-b),h:.0722+.9278*(1-b)})},sepia:function(a){var b=_.isFinite(a.amount)?a.amount:1;return _.template(&#39;&lt;filter&gt;&lt;feColorMatrix type=&quot;matrix&quot; values=&quot;${a} ${b} ${c} 0 0 ${d} ${e} ${f} 0 0 ${g} ${h} ${i} 0 0 0 0 0 1 0&quot;/&gt;&lt;/filter&gt;&#39;,{a:.393+.607*(1-b),b:.769-.769*(1-b),c:.189-.189*(1-b),d:.349-.349*(1-b),e:.686+.314*(1-b),f:.168-.168*(1-b),g:.272-.272*(1-b),h:.534-.534*(1-b),i:.131+.869*(1-b)})},saturate:function(a){var b=_.isFinite(a.amount)?a.amount:1;return _.template(&#39;&lt;filter&gt;&lt;feColorMatrix type=&quot;saturate&quot; values=&quot;${amount}&quot;/&gt;&lt;/filter&gt;&#39;,{amount:1-b})},hueRotate:function(a){return _.template(&#39;&lt;filter&gt;&lt;feColorMatrix type=&quot;hueRotate&quot; values=&quot;${angle}&quot;/&gt;&lt;/filter&gt;&#39;,{angle:a.angle||0})},invert:function(a){var b=_.isFinite(a.amount)?a.amount:1;return _.template(&#39;&lt;filter&gt;&lt;feComponentTransfer&gt;&lt;feFuncR type=&quot;table&quot; tableValues=&quot;${amount} ${amount2}&quot;/&gt;&lt;feFuncG type=&quot;table&quot; tableValues=&quot;${amount} ${amount2}&quot;/&gt;&lt;feFuncB type=&quot;table&quot; tableValues=&quot;${amount} ${amount2}&quot;/&gt;&lt;/feComponentTransfer&gt;&lt;/filter&gt;&#39;,{amount:b,amount2:1-b})},brightness:function(a){return _.template(&#39;&lt;filter&gt;&lt;feComponentTransfer&gt;&lt;feFuncR type=&quot;linear&quot; slope=&quot;${amount}&quot;/&gt;&lt;feFuncG type=&quot;linear&quot; slope=&quot;${amount}&quot;/&gt;&lt;feFuncB type=&quot;linear&quot; slope=&quot;${amount}&quot;/&gt;&lt;/feComponentTransfer&gt;&lt;/filter&gt;&#39;,{amount:_.isFinite(a.amount)?a.amount:1})},contrast:function(a){var b=_.isFinite(a.amount)?a.amount:1;return _.template(&#39;&lt;filter&gt;&lt;feComponentTransfer&gt;&lt;feFuncR type=&quot;linear&quot; slope=&quot;${amount}&quot; intercept=&quot;${amount2}&quot;/&gt;&lt;feFuncG type=&quot;linear&quot; slope=&quot;${amount}&quot; intercept=&quot;${amount2}&quot;/&gt;&lt;feFuncB type=&quot;linear&quot; slope=&quot;${amount}&quot; intercept=&quot;${amount2}&quot;/&gt;&lt;/feComponentTransfer&gt;&lt;/filter&gt;&#39;,{amount:b,amount2:.5-b/2})}},format:{number:function(a,b,c){function d(a){for(var b=a.length,d=[],e=0,f=c.grouping[0];b&gt;0&amp;&amp;f&gt;0;)d.push(a.substring(b-=f,b+f)),f=c.grouping[e=(e+1)%c.grouping.length];return d.reverse().join(c.thousands)}c=c||{currency:[&quot;$&quot;,&quot;&quot;],decimal:&quot;.&quot;,thousands:&quot;,&quot;,grouping:[3]};var e=/(?:([^{])?([&lt;&gt;=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,f=e.exec(a),g=f[1]||&quot; &quot;,h=f[2]||&quot;&gt;&quot;,i=f[3]||&quot;&quot;,j=f[4]||&quot;&quot;,k=f[5],l=+f[6],m=f[7],n=f[8],o=f[9],p=1,q=&quot;&quot;,r=&quot;&quot;,s=!1;switch(n&amp;&amp;(n=+n.substring(1)),(k||&quot;0&quot;===g&amp;&amp;&quot;=&quot;===h)&amp;&amp;(k=g=&quot;0&quot;,h=&quot;=&quot;,m&amp;&amp;(l-=Math.floor((l-1)/4))),o){case&quot;n&quot;:m=!0,o=&quot;g&quot;;break;case&quot;%&quot;:p=100,r=&quot;%&quot;,o=&quot;f&quot;;break;case&quot;p&quot;:p=100,r=&quot;%&quot;,o=&quot;r&quot;;break;case&quot;b&quot;:case&quot;o&quot;:case&quot;x&quot;:case&quot;X&quot;:&quot;#&quot;===j&amp;&amp;(q=&quot;0&quot;+o.toLowerCase());case&quot;c&quot;:case&quot;d&quot;:s=!0,n=0;break;case&quot;s&quot;:p=-1,o=&quot;r&quot;}&quot;$&quot;===j&amp;&amp;(q=c.currency[0],r=c.currency[1]),&quot;r&quot;!=o||n||(o=&quot;g&quot;),null!=n&amp;&amp;(&quot;g&quot;==o?n=Math.max(1,Math.min(21,n)):(&quot;e&quot;==o||&quot;f&quot;==o)&amp;&amp;(n=Math.max(0,Math.min(20,n))));var t=k&amp;&amp;m;if(s&amp;&amp;b%1)return&quot;&quot;;var u=0&gt;b||0===b&amp;&amp;0&gt;1/b?(b=-b,&quot;-&quot;):i,v=r;if(0&gt;p){var w=this.prefix(b,n);b=w.scale(b),v=w.symbol+r}else b*=p;b=this.convert(o,b,n);var x=b.lastIndexOf(&quot;.&quot;),y=0&gt;x?b:b.substring(0,x),z=0&gt;x?&quot;&quot;:c.decimal+b.substring(x+1);!k&amp;&amp;m&amp;&amp;c.grouping&amp;&amp;(y=d(y));var A=q.length+y.length+z.length+(t?0:u.length),B=l&gt;A?new Array(A=l-A+1).join(g):&quot;&quot;;return t&amp;&amp;(y=d(B+y)),u+=q,b=y+z,(&quot;&lt;&quot;===h?u+b+B:&quot;&gt;&quot;===h?B+u+b:&quot;^&quot;===h?B.substring(0,A&gt;&gt;=1)+u+b+B.substring(A):u+(t?b:B+b))+v},convert:function(a,b,c){switch(a){case&quot;b&quot;:return b.toString(2);case&quot;c&quot;:return String.fromCharCode(b);case&quot;o&quot;:return b.toString(8);case&quot;x&quot;:return b.toString(16);case&quot;X&quot;:return b.toString(16).toUpperCase();case&quot;g&quot;:return b.toPrecision(c);case&quot;e&quot;:return b.toExponential(c);case&quot;f&quot;:return b.toFixed(c);case&quot;r&quot;:return(b=this.round(b,this.precision(b,c))).toFixed(Math.max(0,Math.min(20,this.precision(b*(1+1e-15),c))));default:return b+&quot;&quot;}},round:function(a,b){return b?Math.round(a*(b=Math.pow(10,b)))/b:Math.round(a)},precision:function(a,b){return b-(a?Math.ceil(Math.log(a)/Math.LN10):1)},prefix:function(a,b){var c=_.map([&quot;y&quot;,&quot;z&quot;,&quot;a&quot;,&quot;f&quot;,&quot;p&quot;,&quot;n&quot;,&quot;µ&quot;,&quot;m&quot;,&quot;&quot;,&quot;k&quot;,&quot;M&quot;,&quot;G&quot;,&quot;T&quot;,&quot;P&quot;,&quot;E&quot;,&quot;Z&quot;,&quot;Y&quot;],function(a,b){var c=Math.pow(10,3*abs(8-b));return{scale:b&gt;8?function(a){return a/c}:function(a){return a*c},symbol:a}}),d=0;return a&amp;&amp;(0&gt;a&amp;&amp;(a*=-1),b&amp;&amp;(a=d3.round(a,this.precision(a,b))),d=1+Math.floor(1e-12+Math.log(a)/Math.LN10),d=Math.max(-24,Math.min(24,3*Math.floor((0&gt;=d?d+1:d-1)/3)))),c[8+d/3]}}}};if(&quot;object&quot;==typeof exports&amp;&amp;(module.exports=joint),&quot;object&quot;==typeof exports)var joint={dia:{Link:require(&quot;./joint.dia.link&quot;).Link,Element:require(&quot;./joint.dia.element&quot;).Element},shapes:require(&quot;../plugins/shapes&quot;)},Backbone=require(&quot;backbone&quot;),_=require(&quot;lodash&quot;),g=require(&quot;./geometry&quot;);if(joint.dia.GraphCells=Backbone.Collection.extend({initialize:function(){this.on(&quot;change:z&quot;,this.sort,this)},model:function(a,b){if(&quot;link&quot;===a.type)return new joint.dia.Link(a,b);var c=a.type.split(&quot;.&quot;)[0],d=a.type.split(&quot;.&quot;)[1];return joint.shapes[c]&amp;&amp;joint.shapes[c][d]?new joint.shapes[c][d](a,b):new joint.dia.Element(a,b)},comparator:function(a){return a.get(&quot;z&quot;)||0},getConnectedLinks:function(a,b){b=b||{},_.isUndefined(b.inbound)&amp;&amp;_.isUndefined(b.outbound)&amp;&amp;(b.inbound=b.outbound=!0);var c=[];return this.each(function(d){var e=d.get(&quot;source&quot;),f=d.get(&quot;target&quot;);e&amp;&amp;e.id===a.id&amp;&amp;b.outbound&amp;&amp;c.push(d),f&amp;&amp;f.id===a.id&amp;&amp;b.inbound&amp;&amp;c.push(d)}),c}}),joint.dia.Graph=Backbone.Model.extend({initialize:function(){this.set(&quot;cells&quot;,new joint.dia.GraphCells),this.get(&quot;cells&quot;).on(&quot;all&quot;,this.trigger,this),this.get(&quot;cells&quot;).on(&quot;remove&quot;,this.removeCell,this)},toJSON:function(){var a=Backbone.Model.prototype.toJSON.apply(this,arguments);return a.cells=this.get(&quot;cells&quot;).toJSON(),a},fromJSON:function(a){if(!a.cells)throw new Error(&quot;Graph JSON must contain cells array.&quot;);var b=a,c=a.cells;delete b.cells,this.set(b),this.resetCells(c)},clear:function(){this.trigger(&quot;batch:start&quot;),this.get(&quot;cells&quot;).remove(this.get(&quot;cells&quot;).models),this.trigger(&quot;batch:stop&quot;)},_prepareCell:function(a){return a instanceof Backbone.Model&amp;&amp;_.isUndefined(a.get(&quot;z&quot;))?a.set(&quot;z&quot;,this.maxZIndex()+1,{silent:!0}):_.isUndefined(a.z)&amp;&amp;(a.z=this.maxZIndex()+1),a},maxZIndex:function(){var a=this.get(&quot;cells&quot;).last();return a?a.get(&quot;z&quot;)||0:0},addCell:function(a,b){return _.isArray(a)?this.addCells(a,b):(this.get(&quot;cells&quot;).add(this._prepareCell(a),b||{}),this)},addCells:function(a,b){return _.each(a,function(a){this.addCell(a,b)},this),this},resetCells:function(a){return this.get(&quot;cells&quot;).reset(_.map(a,this._prepareCell,this)),this},removeCell:function(a,b,c){c&amp;&amp;c.disconnectLinks?this.disconnectLinks(a):this.removeLinks(a),this.get(&quot;cells&quot;).remove(a,{silent:!0})},getCell:function(a){return this.get(&quot;cells&quot;).get(a)},getElements:function(){return this.get(&quot;cells&quot;).filter(function(a){return a instanceof joint.dia.Element})},getLinks:function(){return this.get(&quot;cells&quot;).filter(function(a){return a instanceof joint.dia.Link})},getConnectedLinks:function(a,b){return this.get(&quot;cells&quot;).getConnectedLinks(a,b)},getNeighbors:function(a){var b=this.getConnectedLinks(a),c=[],d=this.get(&quot;cells&quot;);return _.each(b,function(b){var e=b.get(&quot;source&quot;),f=b.get(&quot;target&quot;);if(!e.x){var g=d.get(e.id);g!==a&amp;&amp;c.push(g)}if(!f.x){var h=d.get(f.id);h!==a&amp;&amp;c.push(h)}}),c},disconnectLinks:function(a){_.each(this.getConnectedLinks(a),function(b){b.set(b.get(&quot;source&quot;).id===a.id?&quot;source&quot;:&quot;target&quot;,g.point(0,0))})},removeLinks:function(a){_.invoke(this.getConnectedLinks(a),&quot;remove&quot;)},findModelsFromPoint:function(a){return _.filter(this.getElements(),function(b){return b.getBBox().containsPoint(a)})},findModelsInArea:function(a){return _.filter(this.getElements(),function(b){return b.getBBox().intersect(a)})}}),&quot;object&quot;==typeof exports&amp;&amp;(module.exports.Graph=joint.dia.Graph),&quot;object&quot;==typeof exports)var joint={util:require(&quot;./core&quot;).util,dia:{Link:require(&quot;./joint.dia.link&quot;).Link}},Backbone=require(&quot;backbone&quot;),_=require(&quot;lodash&quot;);if(joint.dia.Cell=Backbone.Model.extend({constructor:function(a,b){var c,d=a||{};this.cid=_.uniqueId(&quot;c&quot;),this.attributes={},b&amp;&amp;b.collection&amp;&amp;(this.collection=b.collection),b&amp;&amp;b.parse&amp;&amp;(d=this.parse(d,b)||{}),(c=_.result(this,&quot;defaults&quot;))&amp;&amp;(d=_.merge({},c,d)),this.set(d,b),this.changed={},this.initialize.apply(this,arguments)},toJSON:function(){var a=this.constructor.prototype.defaults.attrs||{},b=this.attributes.attrs,c={};_.each(b,function(b,d){var e=a[d];_.each(b,function(a,b){_.isObject(a)&amp;&amp;!_.isArray(a)?_.each(a,function(a,f){e&amp;&amp;e[b]&amp;&amp;_.isEqual(e[b][f],a)||(c[d]=c[d]||{},(c[d][b]||(c[d][b]={}))[f]=a)}):e&amp;&amp;_.isEqual(e[b],a)||(c[d]=c[d]||{},c[d][b]=a)})});var d=_.cloneDeep(_.omit(this.attributes,&quot;attrs&quot;));return d.attrs=c,d},initialize:function(a){a&amp;&amp;a.id||this.set(&quot;id&quot;,joint.util.uuid(),{silent:!0}),this._transitionIds={},this.processPorts(),this.on(&quot;change:attrs&quot;,this.processPorts,this)},processPorts:function(){var a=this.ports,b={};_.each(this.get(&quot;attrs&quot;),function(a){a&amp;&amp;a.port&amp;&amp;(_.isUndefined(a.port.id)?b[a.port]={id:a.port}:b[a.port.id]=a.port)});var c={};if(_.each(a,function(a,d){b[d]||(c[d]=!0)}),this.collection&amp;&amp;!_.isEmpty(c)){var d=this.collection.getConnectedLinks(this,{inbound:!0});_.each(d,function(a){c[a.get(&quot;target&quot;).port]&amp;&amp;a.remove()});var e=this.collection.getConnectedLinks(this,{outbound:!0});_.each(e,function(a){c[a.get(&quot;source&quot;).port]&amp;&amp;a.remove()})}this.ports=b},remove:function(a){var b=this.collection;b&amp;&amp;b.trigger(&quot;batch:start&quot;);var c=this.get(&quot;parent&quot;);if(c){var d=this.collection&amp;&amp;this.collection.get(c);d.unembed(this)}_.invoke(this.getEmbeddedCells(),&quot;remove&quot;,a),this.trigger(&quot;remove&quot;,this,this.collection,a),b&amp;&amp;b.trigger(&quot;batch:stop&quot;)},toFront:function(){this.collection&amp;&amp;this.set(&quot;z&quot;,(this.collection.last().get(&quot;z&quot;)||0)+1)},toBack:function(){this.collection&amp;&amp;this.set(&quot;z&quot;,(this.collection.first().get(&quot;z&quot;)||0)-1)},embed:function(a){if(this.get(&quot;parent&quot;)==a.id)throw new Error(&quot;Recursive embedding not allowed.&quot;);this.trigger(&quot;batch:start&quot;),a.set(&quot;parent&quot;,this.id),this.set(&quot;embeds&quot;,_.uniq((this.get(&quot;embeds&quot;)||[]).concat([a.id]))),this.trigger(&quot;batch:stop&quot;)},unembed:function(a){this.trigger(&quot;batch:start&quot;);var b=a.id;a.unset(&quot;parent&quot;),this.set(&quot;embeds&quot;,_.without(this.get(&quot;embeds&quot;),b)),this.trigger(&quot;batch:stop&quot;)},getEmbeddedCells:function(){return this.collection?_.map(this.get(&quot;embeds&quot;)||[],function(a){return this.collection.get(a)},this):[]},clone:function(a){a=a||{};var b=Backbone.Model.prototype.clone.apply(this,arguments);if(b.set(&quot;id&quot;,joint.util.uuid(),{silent:!0}),b.set(&quot;embeds&quot;,&quot;&quot;),!a.deep)return b;var c=this.getEmbeddedCells(),d=[b],e={};return _.each(c,function(a){var c=a.clone({deep:!0});b.embed(c[0]),_.each(c,function(b){if(d.push(b),!(b instanceof joint.dia.Link)){var c=this.collection.getConnectedLinks(a,{inbound:!0});_.each(c,function(a){var c=e[a.id]||a.clone();e[a.id]=c;var d=_.clone(c.get(&quot;target&quot;));d.id=b.id,c.set(&quot;target&quot;,d)});var f=this.collection.getConnectedLinks(a,{outbound:!0});_.each(f,function(a){var c=e[a.id]||a.clone();e[a.id]=c;var d=_.clone(c.get(&quot;source&quot;));d.id=b.id,c.set(&quot;source&quot;,d)})}},this)},this),d=d.concat(_.values(e))},attr:function(a,b,c){var d=this.get(&quot;attrs&quot;),e=&quot;/&quot;;if(_.isString(a)){if(&quot;undefined&quot;!=typeof b){var f={};return joint.util.setByPath(f,a,b,e),this.set(&quot;attrs&quot;,_.merge({},d,f),c)}return joint.util.getByPath(d,a,e)}return this.set(&quot;attrs&quot;,_.merge({},d,a),b,c)},removeAttr:function(a,b){if(_.isArray(a))return _.each(a,function(a){this.removeAttr(a,b)},this),this;var c=joint.util.unsetByPath(_.merge({},this.get(&quot;attrs&quot;)),a,&quot;/&quot;);return this.set(&quot;attrs&quot;,c,_.extend({dirty:!0},b))},transition:function(a,b,c,d){d=d||&quot;/&quot;;var e={duration:100,delay:10,timingFunction:joint.util.timing.linear,valueFunction:joint.util.interpolate.number};c=_.extend(e,c);var f,g=a.split(d),h=g[0],i=g.length&gt;1,j=0,k=_.bind(function(b){var e,g,l;if(j=j||b,b-=j,g=b/c.duration,1&gt;g?this._transitionIds[a]=e=joint.util.nextFrame(k):(g=1,delete this._transitionIds[a]),l=f(c.timingFunction(g)),i){var m=joint.util.setByPath({},a,l,d)[h];l=_.merge({},this.get(h),m)}c.transitionId=e,this.set(h,l,c),e||this.trigger(&quot;transition:end&quot;,this,a)},this),l=_.bind(function(e){this.stopTransitions(a),f=c.valueFunction(joint.util.getByPath(this.attributes,a,d),b),this._transitionIds[a]=joint.util.nextFrame(e),this.trigger(&quot;transition:start&quot;,this,a)},this);return _.delay(l,c.delay,k)},getTransitions:function(){return _.keys(this._transitionIds)},stopTransitions:function(a,b){b=b||&quot;/&quot;;var c=a&amp;&amp;a.split(b);_(this._transitionIds).keys().filter(c&amp;&amp;function(a){return _.isEqual(c,a.split(b).slice(0,c.length))}).each(function(a){joint.util.cancelFrame(this._transitionIds[a]),delete this._transitionIds[a],this.trigger(&quot;transition:end&quot;,this,a)},this)}}),joint.dia.CellView=Backbone.View.extend({tagName:&quot;g&quot;,attributes:function(){return{&quot;model-id&quot;:this.model.id}},initialize:function(){_.bindAll(this,&quot;remove&quot;,&quot;update&quot;),this.$el.data(&quot;view&quot;,this),this.listenTo(this.model,&quot;remove&quot;,this.remove),this.listenTo(this.model,&quot;change:attrs&quot;,this.onChangeAttrs)},onChangeAttrs:function(a,b,c){return c.dirty?this.render():this.update()},_configure:function(a){a.id=a.id||joint.util.guid(this),Backbone.View.prototype._configure.apply(this,arguments)},_ensureElement:function(){var a;if(this.el)a=_.result(this,&quot;el&quot;);else{var b=_.extend({id:this.id},_.result(this,&quot;attributes&quot;));this.className&amp;&amp;(b[&quot;class&quot;]=_.result(this,&quot;className&quot;)),a=V(_.result(this,&quot;tagName&quot;),b).node}this.setElement(a,!1)},findBySelector:function(a){var b=&quot;.&quot;===a?this.$el:this.$el.find(a);return b},notify:function(a){if(this.paper){var b=Array.prototype.slice.call(arguments,1);this.trigger.apply(this,[a].concat(b)),this.paper.trigger.apply(this.paper,[a,this].concat(b))}},getStrokeBBox:function(a){var b=!!a;a=a||this.el;var c,d=V(a).bbox(!1,this.paper.viewport);return c=b?V(a).attr(&quot;stroke-width&quot;):this.model.attr(&quot;rect/stroke-width&quot;)||this.model.attr(&quot;circle/stroke-width&quot;)||this.model.attr(&quot;ellipse/stroke-width&quot;)||this.model.attr(&quot;path/stroke-width&quot;),c=parseFloat(c)||0,g.rect(d).moveAndExpand({x:-c/2,y:-c/2,width:c,height:c})},getBBox:function(){return V(this.el).bbox()},highlight:function(a){a=a?this.$(a)[0]||this.el:this.el,V(a).addClass(&quot;highlighted&quot;)},unhighlight:function(a){a=a?this.$(a)[0]||this.el:this.el,V(a).removeClass(&quot;highlighted&quot;)},findMagnet:function(a){var b=this.$(a);if(0===b.length||b[0]===this.el){var c=this.model.get(&quot;attrs&quot;)||{};return c[&quot;.&quot;]&amp;&amp;c[&quot;.&quot;].magnet===!1?void 0:this.el}return b.attr(&quot;magnet&quot;)?b[0]:this.findMagnet(b.parent())},applyFilter:function(a,b){var c=this.findBySelector(a),d=b.name+this.paper.svg.id+joint.util.hashCode(JSON.stringify(b));if(!this.paper.svg.getElementById(d)){var e=joint.util.filter[b.name]&amp;&amp;joint.util.filter[b.name](b.args||{});if(!e)throw new Error(&quot;Non-existing filter &quot;+b.name);var f=V(e);f.attr(&quot;filterUnits&quot;,&quot;userSpaceOnUse&quot;),b.attrs&amp;&amp;f.attr(b.attrs),f.node.id=d,V(this.paper.svg).defs().append(f)}c.each(function(){V(this).attr(&quot;filter&quot;,&quot;url(#&quot;+d+&quot;)&quot;)})},applyGradient:function(a,b,c){var d=this.findBySelector(a),e=c.type+this.paper.svg.id+joint.util.hashCode(JSON.stringify(c));if(!this.paper.svg.getElementById(e)){var f=[&quot;&lt;&quot;+c.type+&quot;&gt;&quot;,_.map(c.stops,function(a){return&#39;&lt;stop offset=&quot;&#39;+a.offset+&#39;&quot; stop-color=&quot;&#39;+a.color+&#39;&quot; stop-opacity=&quot;&#39;+(_.isFinite(a.opacity)?a.opacity:1)+&#39;&quot; /&gt;&#39;}).join(&quot;&quot;),&quot;&lt;/&quot;+c.type+&quot;&gt;&quot;].join(&quot;&quot;),g=V(f);c.attrs&amp;&amp;g.attr(c.attrs),g.node.id=e,V(this.paper.svg).defs().append(g)}d.each(function(){V(this).attr(b,&quot;url(#&quot;+e+&quot;)&quot;)})},getSelector:function(a,b){if(a===this.el)return b;var c=$(a).index();return b=a.tagName+&quot;:nth-child(&quot;+(c+1)+&quot;)&quot;+&quot; &quot;+(b||&quot;&quot;),this.getSelector($(a).parent()[0],b+&quot; &quot;)},pointerdblclick:function(a,b,c){this.notify(&quot;cell:pointerdblclick&quot;,a,b,c)},pointerclick:function(a,b,c){this.notify(&quot;cell:pointerclick&quot;,a,b,c)},pointerdown:function(a,b,c){this.model.collection&amp;&amp;(this.model.trigger(&quot;batch:start&quot;),this._collection=this.model.collection),this.notify(&quot;cell:pointerdown&quot;,a,b,c)},pointermove:function(a,b,c){this.notify(&quot;cell:pointermove&quot;,a,b,c)},pointerup:function(a,b,c){this.notify(&quot;cell:pointerup&quot;,a,b,c),this._collection&amp;&amp;(this._collection.trigger(&quot;batch:stop&quot;),delete this._collection)}}),&quot;object&quot;==typeof exports&amp;&amp;(module.exports.Cell=joint.dia.Cell,module.exports.CellView=joint.dia.CellView),&quot;object&quot;==typeof exports)var joint={util:require(&quot;./core&quot;).util,dia:{Cell:require(&quot;./joint.dia.cell&quot;).Cell,CellView:require(&quot;./joint.dia.cell&quot;).CellView}},Backbone=require(&quot;backbone&quot;),_=require(&quot;lodash&quot;);if(joint.dia.Element=joint.dia.Cell.extend({defaults:{position:{x:0,y:0},size:{width:1,height:1},angle:0},position:function(a,b){this.set(&quot;position&quot;,{x:a,y:b})},translate:function(a,b,c){if(b=b||0,0===a&amp;&amp;0===b)return this;var d=this.get(&quot;position&quot;)||{x:0,y:0},e={x:d.x+a||0,y:d.y+b||0};return c&amp;&amp;c.transition?(_.isObject(c.transition)||(c.transition={}),this.transition(&quot;position&quot;,e,_.extend({},c.transition,{valueFunction:joint.util.interpolate.object}))):(this.set(&quot;position&quot;,e,c),_.invoke(this.getEmbeddedCells(),&quot;translate&quot;,a,b,c)),this},resize:function(a,b){return this.trigger(&quot;batch:start&quot;),this.set(&quot;size&quot;,{width:a,height:b}),this.trigger(&quot;batch:stop&quot;),this},rotate:function(a,b){return this.set(&quot;angle&quot;,b?a:((this.get(&quot;angle&quot;)||0)+a)%360)},getBBox:function(){var a=this.get(&quot;position&quot;),b=this.get(&quot;size&quot;);return g.rect(a.x,a.y,b.width,b.height)}}),joint.dia.ElementView=joint.dia.CellView.extend({className:function(){return&quot;element &quot;+this.model.get(&quot;type&quot;).split(&quot;.&quot;).join(&quot; &quot;)},initialize:function(){_.bindAll(this,&quot;translate&quot;,&quot;resize&quot;,&quot;rotate&quot;),joint.dia.CellView.prototype.initialize.apply(this,arguments),this.listenTo(this.model,&quot;change:position&quot;,this.translate),this.listenTo(this.model,&quot;change:size&quot;,this.resize),this.listenTo(this.model,&quot;change:angle&quot;,this.rotate)},update:function(a,b){var c=this.model.get(&quot;attrs&quot;),d=V(this.$(&quot;.rotatable&quot;)[0]);if(d){var e=d.attr(&quot;transform&quot;);d.attr(&quot;transform&quot;,&quot;&quot;)}var f=[];_.each(b||c,function(a,b){var c=this.findBySelector(b);if(0!==c.length){var d=[&quot;style&quot;,&quot;text&quot;,&quot;html&quot;,&quot;ref-x&quot;,&quot;ref-y&quot;,&quot;ref-dx&quot;,&quot;ref-dy&quot;,&quot;ref-width&quot;,&quot;ref-height&quot;,&quot;ref&quot;,&quot;x-alignment&quot;,&quot;y-alignment&quot;,&quot;port&quot;];_.isObject(a.filter)&amp;&amp;(d.push(&quot;filter&quot;),this.applyFilter(b,a.filter)),_.isObject(a.fill)&amp;&amp;(d.push(&quot;fill&quot;),this.applyGradient(b,&quot;fill&quot;,a.fill)),_.isObject(a.stroke)&amp;&amp;(d.push(&quot;stroke&quot;),this.applyGradient(b,&quot;stroke&quot;,a.stroke)),_.isUndefined(a.text)||c.each(function(){V(this).text(a.text+&quot;&quot;)});var e=_.omit(a,d);c.each(function(){V(this).attr(e)}),a.port&amp;&amp;c.attr(&quot;port&quot;,_.isUndefined(a.port.id)?a.port:a.port.id),a.style&amp;&amp;c.css(a.style),_.isUndefined(a.html)||c.each(function(){$(this).html(a.html+&quot;&quot;)}),_.isUndefined(a[&quot;ref-x&quot;])&amp;&amp;_.isUndefined(a[&quot;ref-y&quot;])&amp;&amp;_.isUndefined(a[&quot;ref-dx&quot;])&amp;&amp;_.isUndefined(a[&quot;ref-dy&quot;])&amp;&amp;_.isUndefined(a[&quot;x-alignment&quot;])&amp;&amp;_.isUndefined(a[&quot;y-alignment&quot;])&amp;&amp;_.isUndefined(a[&quot;ref-width&quot;])&amp;&amp;_.isUndefined(a[&quot;ref-height&quot;])||_.each(c,function(a,b,c){var d=$(a);d.selector=c.selector,f.push(d)})}},this);var g=this.el.getBBox();b=b||{},_.each(f,function(a){var d=b[a.selector],e=d?_.merge({},c[a.selector],d):c[a.selector];this.positionRelative(a,g,e)},this),d&amp;&amp;d.attr(&quot;transform&quot;,e||&quot;&quot;)},positionRelative:function(a,b,c){function d(a){return _.isNumber(a)&amp;&amp;!_.isNaN(a)}var e=c.ref,f=parseFloat(c[&quot;ref-x&quot;]),g=parseFloat(c[&quot;ref-y&quot;]),h=parseFloat(c[&quot;ref-dx&quot;]),i=parseFloat(c[&quot;ref-dy&quot;]),j=c[&quot;y-alignment&quot;],k=c[&quot;x-alignment&quot;],l=parseFloat(c[&quot;ref-width&quot;]),m=parseFloat(c[&quot;ref-height&quot;]),n=_.contains(_.pluck(_.pluck(a.parents(&quot;g&quot;),&quot;className&quot;),&quot;baseVal&quot;),&quot;scalable&quot;);e&amp;&amp;(b=V(this.findBySelector(e)[0]).bbox(!1,this.el));var o=V(a[0]);o.attr(&quot;transform&quot;)&amp;&amp;o.attr(&quot;transform&quot;,o.attr(&quot;transform&quot;).replace(/translate\([^)]*\)/g,&quot;&quot;)||&quot;&quot;);var p=0,q=0;if(d(l)&amp;&amp;(l&gt;=0&amp;&amp;1&gt;=l?o.attr(&quot;width&quot;,l*b.width):o.attr(&quot;width&quot;,Math.max(l+b.width,0))),d(m)&amp;&amp;(m&gt;=0&amp;&amp;1&gt;=m?o.attr(&quot;height&quot;,m*b.height):o.attr(&quot;height&quot;,Math.max(m+b.height,0))),d(h))if(n){var r=V(this.$(&quot;.scalable&quot;)[0]).scale();p=b.x+b.width+h/r.sx}else p=b.x+b.width+h;if(d(i))if(n){var r=V(this.$(&quot;.scalable&quot;)[0]).scale();q=b.y+b.height+i/r.sy}else q=b.y+b.height+i;if(d(f))if(f&gt;0&amp;&amp;1&gt;f)p=b.x+b.width*f;else if(n){var r=V(this.$(&quot;.scalable&quot;)[0]).scale();p=b.x+f/r.sx}else p=b.x+f;if(d(g))if(g&gt;0&amp;&amp;1&gt;g)q=b.y+b.height*g;else if(n){var r=V(this.$(&quot;.scalable&quot;)[0]).scale();q=b.y+g/r.sy}else q=b.y+g;var s=o.bbox(!1,this.paper.viewport);&quot;middle&quot;===j?q-=s.height/2:d(j)&amp;&amp;(q+=j&gt;-1&amp;&amp;1&gt;j?s.height*j:j),&quot;middle&quot;===k?p-=s.width/2:d(k)&amp;&amp;(p+=k&gt;-1&amp;&amp;1&gt;k?s.width*k:k),o.translate(p,q)},renderMarkup:function(){var a=this.model.markup||this.model.get(&quot;markup&quot;);if(!a)throw new Error(&quot;properties.markup is missing while the default render() implementation is used.&quot;);var b=V(a);V(this.el).append(b)},render:function(){return this.$el.empty(),this.renderMarkup(),this.update(),this.resize(),this.rotate(),this.translate(),this},scale:function(a,b){V(this.el).scale(a,b)},resize:function(){var a=this.model.get(&quot;size&quot;)||{width:1,height:1},b=this.model.get(&quot;angle&quot;)||0,c=V(this.$(&quot;.scalable&quot;)[0]);if(c){var d=c.bbox(!0);c.attr(&quot;transform&quot;,&quot;scale(&quot;+a.width/d.width+&quot;,&quot;+a.height/d.height+&quot;)&quot;);var e=V(this.$(&quot;.rotatable&quot;)[0]),f=e&amp;&amp;e.attr(&quot;transform&quot;);if(f&amp;&amp;&quot;null&quot;!==f){e.attr(&quot;transform&quot;,f+&quot; rotate(&quot;+-b+&quot;,&quot;+a.width/2+&quot;,&quot;+a.height/2+&quot;)&quot;);var g=c.bbox(!1,this.paper.viewport);this.model.set(&quot;position&quot;,{x:g.x,y:g.y}),this.rotate()}this.update()}},translate:function(){var a=this.model.get(&quot;position&quot;)||{x:0,y:0};V(this.el).attr(&quot;transform&quot;,&quot;translate(&quot;+a.x+&quot;,&quot;+a.y+&quot;)&quot;)},rotate:function(){var a=V(this.$(&quot;.rotatable&quot;)[0]);if(a){var b=this.model.get(&quot;angle&quot;)||0,c=this.model.get(&quot;size&quot;)||{width:1,height:1},d=c.width/2,e=c.height/2;a.attr(&quot;transform&quot;,&quot;rotate(&quot;+b+&quot;,&quot;+d+&quot;,&quot;+e+&quot;)&quot;)}},pointerdown:function(a,b,c){if(a.target.getAttribute(&quot;magnet&quot;)&amp;&amp;this.paper.options.validateMagnet.call(this.paper,this,a.target)){this.model.trigger(&quot;batch:start&quot;);var d=this.paper.getDefaultLink(this,a.target);d.set({source:{id:this.model.id,selector:this.getSelector(a.target),port:$(a.target).attr(&quot;port&quot;)},target:{x:b,y:c}}),this.paper.model.addCell(d),this._linkView=this.paper.findViewByModel(d),this._linkView.startArrowheadMove(&quot;target&quot;)}else this._dx=b,this._dy=c,joint.dia.CellView.prototype.pointerdown.apply(this,arguments)},pointermove:function(a,b,c){if(this._linkView)this._linkView.pointermove(a,b,c);else{var d=this.paper.options.gridSize;if(this.options.interactive!==!1){var e=this.model.get(&quot;position&quot;);this.model.translate(g.snapToGrid(e.x,d)-e.x+g.snapToGrid(b-this._dx,d),g.snapToGrid(e.y,d)-e.y+g.snapToGrid(c-this._dy,d))}this._dx=g.snapToGrid(b,d),this._dy=g.snapToGrid(c,d),joint.dia.CellView.prototype.pointermove.apply(this,arguments)}},pointerup:function(a,b,c){this._linkView?(this._linkView.pointerup(a,b,c),delete this._linkView,this.model.trigger(&quot;batch:stop&quot;)):joint.dia.CellView.prototype.pointerup.apply(this,arguments)}}),&quot;object&quot;==typeof exports&amp;&amp;(module.exports.Element=joint.dia.Element,module.exports.ElementView=joint.dia.ElementView),&quot;object&quot;==typeof exports)var joint={dia:{Cell:require(&quot;./joint.dia.cell&quot;).Cell,CellView:require(&quot;./joint.dia.cell&quot;).CellView}},Backbone=require(&quot;backbone&quot;),_=require(&quot;lodash&quot;),g=require(&quot;./geometry&quot;);if(joint.dia.Link=joint.dia.Cell.extend({markup:[&#39;&lt;path class=&quot;connection&quot; stroke=&quot;black&quot;/&gt;&#39;,&#39;&lt;path class=&quot;marker-source&quot; fill=&quot;black&quot; stroke=&quot;black&quot; /&gt;&#39;,&#39;&lt;path class=&quot;marker-target&quot; fill=&quot;black&quot; stroke=&quot;black&quot; /&gt;&#39;,&#39;&lt;path class=&quot;connection-wrap&quot;/&gt;&#39;,&#39;&lt;g class=&quot;labels&quot;/&gt;&#39;,&#39;&lt;g class=&quot;marker-vertices&quot;/&gt;&#39;,&#39;&lt;g class=&quot;marker-arrowheads&quot;/&gt;&#39;,&#39;&lt;g class=&quot;link-tools&quot;/&gt;&#39;].join(&quot;&quot;),labelMarkup:[&#39;&lt;g class=&quot;label&quot;&gt;&#39;,&quot;&lt;rect /&gt;&quot;,&quot;&lt;text /&gt;&quot;,&quot;&lt;/g&gt;&quot;].join(&quot;&quot;),toolMarkup:[&#39;&lt;g class=&quot;link-tool&quot;&gt;&#39;,&#39;&lt;g class=&quot;tool-remove&quot; event=&quot;remove&quot;&gt;&#39;,&#39;&lt;circle r=&quot;11&quot; /&gt;&#39;,&#39;&lt;path transform=&quot;scale(.8) translate(-16, -16)&quot; d=&quot;M24.778,21.419 19.276,15.917 24.777,10.415 21.949,7.585 16.447,13.087 10.945,7.585 8.117,10.415 13.618,15.917 8.116,21.419 10.946,24.248 16.447,18.746 21.948,24.248z&quot;/&gt;&#39;,&quot;&lt;title&gt;Remove link.&lt;/title&gt;&quot;,&quot;&lt;/g&gt;&quot;,&#39;&lt;g class=&quot;tool-options&quot; event=&quot;link:options&quot;&gt;&#39;,&#39;&lt;circle r=&quot;11&quot; transform=&quot;translate(25)&quot;/&gt;&#39;,&#39;&lt;path fill=&quot;white&quot; transform=&quot;scale(.55) translate(29, -16)&quot; d=&quot;M31.229,17.736c0.064-0.571,0.104-1.148,0.104-1.736s-0.04-1.166-0.104-1.737l-4.377-1.557c-0.218-0.716-0.504-1.401-0.851-2.05l1.993-4.192c-0.725-0.91-1.549-1.734-2.458-2.459l-4.193,1.994c-0.647-0.347-1.334-0.632-2.049-0.849l-1.558-4.378C17.165,0.708,16.588,0.667,16,0.667s-1.166,0.041-1.737,0.105L12.707,5.15c-0.716,0.217-1.401,0.502-2.05,0.849L6.464,4.005C5.554,4.73,4.73,5.554,4.005,6.464l1.994,4.192c-0.347,0.648-0.632,1.334-0.849,2.05l-4.378,1.557C0.708,14.834,0.667,15.412,0.667,16s0.041,1.165,0.105,1.736l4.378,1.558c0.217,0.715,0.502,1.401,0.849,2.049l-1.994,4.193c0.725,0.909,1.549,1.733,2.459,2.458l4.192-1.993c0.648,0.347,1.334,0.633,2.05,0.851l1.557,4.377c0.571,0.064,1.148,0.104,1.737,0.104c0.588,0,1.165-0.04,1.736-0.104l1.558-4.377c0.715-0.218,1.399-0.504,2.049-0.851l4.193,1.993c0.909-0.725,1.733-1.549,2.458-2.458l-1.993-4.193c0.347-0.647,0.633-1.334,0.851-2.049L31.229,17.736zM16,20.871c-2.69,0-4.872-2.182-4.872-4.871c0-2.69,2.182-4.872,4.872-4.872c2.689,0,4.871,2.182,4.871,4.872C20.871,18.689,18.689,20.871,16,20.871z&quot;/&gt;&#39;,&quot;&lt;title&gt;Link options.&lt;/title&gt;&quot;,&quot;&lt;/g&gt;&quot;,&quot;&lt;/g&gt;&quot;].join(&quot;&quot;),vertexMarkup:[&#39;&lt;g class=&quot;marker-vertex-group&quot; transform=&quot;translate(&lt;%= x %&gt;, &lt;%= y %&gt;)&quot;&gt;&#39;,&#39;&lt;circle class=&quot;marker-vertex&quot; idx=&quot;&lt;%= idx %&gt;&quot; r=&quot;10&quot; /&gt;&#39;,&#39;&lt;path class=&quot;marker-vertex-remove-area&quot; idx=&quot;&lt;%= idx %&gt;&quot; d=&quot;M16,5.333c-7.732,0-14,4.701-14,10.5c0,1.982,0.741,3.833,2.016,5.414L2,25.667l5.613-1.441c2.339,1.317,5.237,2.107,8.387,2.107c7.732,0,14-4.701,14-10.5C30,10.034,23.732,5.333,16,5.333z&quot; transform=&quot;translate(5, -33)&quot;/&gt;&#39;,&#39;&lt;path class=&quot;marker-vertex-remove&quot; idx=&quot;&lt;%= idx %&gt;&quot; transform=&quot;scale(.8) translate(9.5, -37)&quot; d=&quot;M24.778,21.419 19.276,15.917 24.777,10.415 21.949,7.585 16.447,13.087 10.945,7.585 8.117,10.415 13.618,15.917 8.116,21.419 10.946,24.248 16.447,18.746 21.948,24.248z&quot;&gt;&#39;,&quot;&lt;title&gt;Remove vertex.&lt;/title&gt;&quot;,&quot;&lt;/path&gt;&quot;,&quot;&lt;/g&gt;&quot;].join(&quot;&quot;),arrowheadMarkup:[&#39;&lt;g class=&quot;marker-arrowhead-group marker-arrowhead-group-&lt;%= end %&gt;&quot;&gt;&#39;,&#39;&lt;path class=&quot;marker-arrowhead&quot; end=&quot;&lt;%= end %&gt;&quot; d=&quot;M 26 0 L 0 13 L 26 26 z&quot; /&gt;&#39;,&quot;&lt;/g&gt;&quot;].join(&quot;&quot;),defaults:{type:&quot;link&quot;},disconnect:function(){return this.set({source:g.point(0,0),target:g.point(0,0)})},label:function(a,b){a=a||0;var c=this.get(&quot;labels&quot;)||[];if(0===arguments.length||1===arguments.length)return c[a];var d=_.merge({},c[a],b),e=c.slice();return e[a]=d,this.set({labels:e})}}),joint.dia.LinkView=joint.dia.CellView.extend({className:function(){return _.unique(this.model.get(&quot;type&quot;).split(&quot;.&quot;).concat(&quot;link&quot;)).join(&quot; &quot;)},options:{shortLinkLength:100},initialize:function(){joint.dia.CellView.prototype.initialize.apply(this,arguments),&quot;function&quot;!=typeof this.constructor.prototype.watchSource&amp;&amp;(this.constructor.prototype.watchSource=this._createWatcher(&quot;source&quot;),this.constructor.prototype.watchTarget=this._createWatcher(&quot;target&quot;)),this._labelCache={},this._markerCache={},this.startListening()},startListening:function(){this.listenTo(this.model,&quot;change:markup&quot;,this.render),this.listenTo(this.model,&quot;change:smooth change:manhattan change:router change:connector&quot;,this.update),this.listenTo(this.model,&quot;change:toolMarkup&quot;,function(){this.renderTools().updateToolsPosition()}),this.listenTo(this.model,&quot;change:labels change:labelMarkup&quot;,function(){this.renderLabels().updateLabelPositions()}),this.listenTo(this.model,&quot;change:vertices change:vertexMarkup&quot;,function(){this.renderVertexMarkers().update()}),this.listenTo(this.model,&quot;change:source&quot;,function(a,b){this.watchSource(a,b).update()}),this.listenTo(this.model,&quot;change:target&quot;,function(a,b){this.watchTarget(a,b).update()})},render:function(){this.$el.empty();var a=V(this.model.get(&quot;markup&quot;)||this.model.markup);if(_.isArray(a)||(a=[a]),this._V={},_.each(a,function(a){var b=a.attr(&quot;class&quot;);b&amp;&amp;(this._V[$.camelCase(b)]=a)},this),!this._V.connection)throw new Error(&quot;link: no connection path in the markup&quot;);return this.renderTools(),this.renderVertexMarkers(),this.renderArrowheadMarkers(),V(this.el).append(a),this.renderLabels(),this.watchSource(this.model,this.model.get(&quot;source&quot;)).watchTarget(this.model,this.model.get(&quot;target&quot;)).update(),this},renderLabels:function(){if(!this._V.labels)return this;this._labelCache={};var a=$(this._V.labels.node).empty(),b=this.model.get(&quot;labels&quot;)||[];if(!b.length)return this;var c=_.template(this.model.get(&quot;labelMarkup&quot;)||this.model.labelMarkup),d=V(c());return _.each(b,function(b,c){var e=d.clone().node;this._labelCache[c]=V(e);</div><div class='line' id='LC11'>var f=$(e).find(&quot;text&quot;),g=$(e).find(&quot;rect&quot;),h=_.extend({&quot;text-anchor&quot;:&quot;middle&quot;,&quot;font-size&quot;:14},joint.util.getByPath(b,&quot;attrs/text&quot;,&quot;/&quot;));f.attr(_.omit(h,&quot;text&quot;)),_.isUndefined(h.text)||V(f[0]).text(h.text+&quot;&quot;),a.append(e);var i=V(f[0]).bbox(!0,a[0]);V(f[0]).translate(0,-i.height/2);var j=_.extend({fill:&quot;white&quot;,rx:3,ry:3},joint.util.getByPath(b,&quot;attrs/rect&quot;,&quot;/&quot;));g.attr(_.extend(j,{x:i.x,y:i.y-i.height/2,width:i.width,height:i.height}))},this),this},renderTools:function(){if(!this._V.linkTools)return this;var a=$(this._V.linkTools.node).empty(),b=_.template(this.model.get(&quot;toolMarkup&quot;)||this.model.toolMarkup),c=V(b());return a.append(c.node),this._toolCache=c,this},renderVertexMarkers:function(){if(!this._V.markerVertices)return this;var a=$(this._V.markerVertices.node).empty(),b=_.template(this.model.get(&quot;vertexMarkup&quot;)||this.model.vertexMarkup);return _.each(this.model.get(&quot;vertices&quot;),function(c,d){a.append(V(b(_.extend({idx:d},c))).node)}),this},renderArrowheadMarkers:function(){if(!this._V.markerArrowheads)return this;var a=$(this._V.markerArrowheads.node);a.empty();var b=_.template(this.model.get(&quot;arrowheadMarkup&quot;)||this.model.arrowheadMarkup);return this._V.sourceArrowhead=V(b({end:&quot;source&quot;})),this._V.targetArrowhead=V(b({end:&quot;target&quot;})),a.append(this._V.sourceArrowhead.node,this._V.targetArrowhead.node),this},update:function(){_.each(this.model.get(&quot;attrs&quot;),function(a,b){_.isObject(a.filter)?(this.findBySelector(b).attr(_.omit(a,&quot;filter&quot;)),this.applyFilter(b,a.filter)):this.findBySelector(b).attr(a)},this);var a=this.route=this.findRoute(this.model.get(&quot;vertices&quot;)||[]);this._findConnectionPoints(a);var b=this.getPathData(a);return this._V.connection.attr(&quot;d&quot;,b),this._V.connectionWrap&amp;&amp;this._V.connectionWrap.attr(&quot;d&quot;,b),this._translateAndAutoOrientArrows(this._V.markerSource,this._V.markerTarget),this.updateLabelPositions(),this.updateToolsPosition(),this.updateArrowheadMarkers(),delete this.options.perpendicular,this},_findConnectionPoints:function(a){var b,c,d,e,f=_.first(a);b=this.getConnectionPoint(&quot;source&quot;,this.model.get(&quot;source&quot;),f||this.model.get(&quot;target&quot;)).round();var h=_.last(a);c=this.getConnectionPoint(&quot;target&quot;,this.model.get(&quot;target&quot;),h||b).round();var i=this._markerCache;this._V.markerSource&amp;&amp;(i.sourceBBox=i.sourceBBox||this._V.markerSource.bbox(!0),d=g.point(b).move(f||c,-1*i.sourceBBox.width*this._V.markerSource.scale().sx).round()),this._V.markerTarget&amp;&amp;(i.targetBBox=i.targetBBox||this._V.markerTarget.bbox(!0),e=g.point(c).move(h||b,-1*i.targetBBox.width*this._V.markerTarget.scale().sx).round()),i.sourcePoint=d||b,i.targetPoint=e||c,this.sourcePoint=b,this.targetPoint=c},updateLabelPositions:function(){if(!this._V.labels)return this;var a=this.model.get(&quot;labels&quot;)||[];if(!a.length)return this;var b=this._V.connection.node,c=b.getTotalLength();return _.each(a,function(a,d){var e=a.position;e=e&gt;c?c:e,e=0&gt;e?c+e:e,e=e&gt;1?e:c*e;var f=b.getPointAtLength(e);this._labelCache[d].attr(&quot;transform&quot;,&quot;translate(&quot;+f.x+&quot;, &quot;+f.y+&quot;)&quot;)},this),this},updateToolsPosition:function(){if(!this._V.linkTools)return this;var a=&quot;&quot;,b=40;this.getConnectionLength()&lt;this.options.shortLinkLength&amp;&amp;(a=&quot;scale(.5)&quot;,b/=2);var c=this.getPointAtLength(b);return this._toolCache.attr(&quot;transform&quot;,&quot;translate(&quot;+c.x+&quot;, &quot;+c.y+&quot;) &quot;+a),this},updateArrowheadMarkers:function(){if(!this._V.markerArrowheads)return this;if(&quot;none&quot;===$.css(this._V.markerArrowheads.node,&quot;display&quot;))return this;var a=this.getConnectionLength()&lt;this.options.shortLinkLength?.5:1;return this._V.sourceArrowhead.scale(a),this._V.targetArrowhead.scale(a),this._translateAndAutoOrientArrows(this._V.sourceArrowhead,this._V.targetArrowhead),this},_createWatcher:function(a){function b(b,c){c=c||{};var d=b.previous(a)||{},e=this[&quot;_&quot;+a+&quot;BBoxUpdate&quot;];return this._isModel(d)&amp;&amp;this.stopListening(this.paper.getModelById(d.id),&quot;change&quot;,e),this._isModel(c)&amp;&amp;this.listenTo(this.paper.getModelById(c.id),&quot;change&quot;,e),_.bind(e,this)({cacheOnly:!0}),this}return b},_sourceBBoxUpdate:function(a){this.lastEndChange=&quot;source&quot;,a=a||{};var b=this.model.get(&quot;source&quot;);if(this._isModel(b)){var c=this._makeSelector(b),d=this.paper.findViewByModel(b.id),e=this.paper.viewport.querySelector(c);this.sourceBBox=d.getStrokeBBox(e)}else this.sourceBBox=g.rect(b.x,b.y,1,1);a.cacheOnly||this.update()},_targetBBoxUpdate:function(a){this.lastEndChange=&quot;target&quot;,a=a||{};var b=this.model.get(&quot;target&quot;);if(this._isModel(b)){var c=this._makeSelector(b),d=this.paper.findViewByModel(b.id),e=this.paper.viewport.querySelector(c);this.targetBBox=d.getStrokeBBox(e)}else this.targetBBox=g.rect(b.x,b.y,1,1);a.cacheOnly||this.update()},_translateAndAutoOrientArrows:function(a,b){a&amp;&amp;a.translateAndAutoOrient(this.sourcePoint,_.first(this.route)||this.targetPoint,this.paper.viewport),b&amp;&amp;b.translateAndAutoOrient(this.targetPoint,_.last(this.route)||this.sourcePoint,this.paper.viewport)},removeVertex:function(a){var b=_.clone(this.model.get(&quot;vertices&quot;));return b&amp;&amp;b.length&amp;&amp;(b.splice(a,1),this.model.set(&quot;vertices&quot;,b)),this},addVertex:function(a){this.model.set(&quot;attrs&quot;,this.model.get(&quot;attrs&quot;)||{}),this.model.get(&quot;attrs&quot;);for(var b,c=(this.model.get(&quot;vertices&quot;)||[]).slice(),d=c.slice(),e=this._V.connection.node.cloneNode(!1),f=e.getTotalLength(),g=20,h=c.length+1;h--&amp;&amp;(c.splice(h,0,a),V(e).attr(&quot;d&quot;,this.getPathData(this.findRoute(c))),b=e.getTotalLength(),b-f&gt;g);)c=d.slice();return this.model.set(&quot;vertices&quot;,c),Math.max(h,0)},findRoute:function(a){var b=this.model.get(&quot;router&quot;);if(!b){if(!this.model.get(&quot;manhattan&quot;))return a;b={name:&quot;orthogonal&quot;}}var c=joint.routers[b.name];if(!_.isFunction(c))throw&quot;unknown router: &quot;+b.name;var d=c.call(this,a||[],b.args||{},this);return d},getPathData:function(a){var b=this.model.get(&quot;connector&quot;);if(b||(b=this.model.get(&quot;smooth&quot;)?{name:&quot;smooth&quot;}:{name:&quot;normal&quot;}),!_.isFunction(joint.connectors[b.name]))throw&quot;unknown connector: &quot;+b.name;var c=joint.connectors[b.name].call(this,this._markerCache.sourcePoint,this._markerCache.targetPoint,a||this.model.get(&quot;vertices&quot;)||{},b.args||{},this);return c},getConnectionPoint:function(a,b,c){var d;if(this._isPoint(b))d=g.point(b);else{var e,f=&quot;source&quot;===a?this.sourceBBox:this.targetBBox;if(this._isPoint(c))e=g.point(c);else{var h=&quot;source&quot;===a?this.targetBBox:this.sourceBBox;e=g.rect(h).intersectionWithLineFromCenterToPoint(g.rect(f).center()),e=e||g.rect(h).center()}if(this.paper.options.perpendicularLinks||this.options.perpendicular){var i,j=g.rect(0,e.y,this.paper.options.width,1),k=g.rect(e.x,0,1,this.paper.options.height);if(j.intersect(g.rect(f)))switch(i=g.rect(f).sideNearestToPoint(e)){case&quot;left&quot;:d=g.point(f.x,e.y);break;case&quot;right&quot;:d=g.point(f.x+f.width,e.y);break;default:d=g.rect(f).center()}else if(k.intersect(g.rect(f)))switch(i=g.rect(f).sideNearestToPoint(e)){case&quot;top&quot;:d=g.point(e.x,f.y);break;case&quot;bottom&quot;:d=g.point(e.x,f.y+f.height);break;default:d=g.rect(f).center()}else d=g.rect(f).intersectionWithLineFromCenterToPoint(e),d=d||g.rect(f).center()}else d=g.rect(f).intersectionWithLineFromCenterToPoint(e),d=d||g.rect(f).center()}return d},_isModel:function(a){return a&amp;&amp;a.id},_isPoint:function(a){return!this._isModel(a)},_makeSelector:function(a){var b=&#39;[model-id=&quot;&#39;+a.id+&#39;&quot;]&#39;;return a.port?b+=&#39; [port=&quot;&#39;+a.port+&#39;&quot;]&#39;:a.selector&amp;&amp;(b+=&quot; &quot;+a.selector),b},getConnectionLength:function(){return this._V.connection.node.getTotalLength()},getPointAtLength:function(a){return this._V.connection.node.getPointAtLength(a)},_beforeArrowheadMove:function(){this.model.trigger(&quot;batch:start&quot;),this._z=this.model.get(&quot;z&quot;),this.model.set(&quot;z&quot;,Number.MAX_VALUE),this.el.style.pointerEvents=&quot;none&quot;},_afterArrowheadMove:function(){this._z&amp;&amp;(this.model.set(&quot;z&quot;,this._z),delete this._z),this.el.style.pointerEvents=&quot;visiblePainted&quot;,this.model.trigger(&quot;batch:stop&quot;)},_createValidateConnectionArgs:function(a){function b(a,b){return c[f]=a,c[f+1]=a.el===b?void 0:b,c}var c=[];c[4]=a,c[5]=this;var d,e=0,f=0;&quot;source&quot;===a?(e=2,d=&quot;target&quot;):(f=2,d=&quot;source&quot;);var g=this.model.get(d);return g.id&amp;&amp;(c[e]=this.paper.findViewByModel(g.id),c[e+1]=g.selector&amp;&amp;c[e].el.querySelector(g.selector)),b},startArrowheadMove:function(a){this._action=&quot;arrowhead-move&quot;,this._arrowhead=a,this._beforeArrowheadMove(),this._validateConnectionArgs=this._createValidateConnectionArgs(this._arrowhead)},pointerdown:function(a,b,c){if(joint.dia.CellView.prototype.pointerdown.apply(this,arguments),this._dx=b,this._dy=c,this.options.interactive!==!1){var d=a.target.getAttribute(&quot;class&quot;);switch(d){case&quot;marker-vertex&quot;:this._action=&quot;vertex-move&quot;,this._vertexIdx=a.target.getAttribute(&quot;idx&quot;);break;case&quot;marker-vertex-remove&quot;:case&quot;marker-vertex-remove-area&quot;:this.removeVertex(a.target.getAttribute(&quot;idx&quot;));break;case&quot;marker-arrowhead&quot;:this.startArrowheadMove(a.target.getAttribute(&quot;end&quot;));break;default:var e=a.target.parentNode.getAttribute(&quot;event&quot;);e?&quot;remove&quot;===e?this.model.remove():this.paper.trigger(e,a,this,b,c):(this._vertexIdx=this.addVertex({x:b,y:c}),this._action=&quot;vertex-move&quot;)}}},pointermove:function(a,b,c){switch(joint.dia.CellView.prototype.pointermove.apply(this,arguments),this._action){case&quot;vertex-move&quot;:var d=_.clone(this.model.get(&quot;vertices&quot;));d[this._vertexIdx]={x:b,y:c},this.model.set(&quot;vertices&quot;,d);break;case&quot;arrowhead-move&quot;:if(this.paper.options.snapLinks){var e=this.paper.options.snapLinks.radius||50,f=this.paper.findViewsInArea({x:b-e,y:c-e,width:2*e,height:2*e});this._closestView&amp;&amp;this._closestView.unhighlight(this._closestEnd.selector),this._closestView=this._closestEnd=null;var h,i=g.point(b,c),j=Number.MAX_VALUE;_.each(f,function(a){&quot;false&quot;!==a.el.getAttribute(&quot;magnet&quot;)&amp;&amp;(h=a.model.getBBox().center().distance(i),e&gt;h&amp;&amp;j&gt;h&amp;&amp;this.paper.options.validateConnection.apply(this.paper,this._validateConnectionArgs(a,null))&amp;&amp;(j=h,this._closestView=a,this._closestEnd={id:a.model.id})),a.$(&quot;[magnet]&quot;).each(_.bind(function(b,c){var d=V(c).bbox(!1,this.paper.viewport);h=i.distance({x:d.x+d.width/2,y:d.y+d.height/2}),e&gt;h&amp;&amp;j&gt;h&amp;&amp;this.paper.options.validateConnection.apply(this.paper,this._validateConnectionArgs(a,c))&amp;&amp;(j=h,this._closestView=a,this._closestEnd={id:a.model.id,selector:a.getSelector(c),port:c.getAttribute(&quot;port&quot;)})},this))},this),this._closestView&amp;&amp;this._closestView.highlight(this._closestEnd.selector),this.model.set(this._arrowhead,this._closestEnd||{x:b,y:c})}else{var k=&quot;mousemove&quot;===a.type?a.target:document.elementFromPoint(a.clientX,a.clientY);this._targetEvent!==k&amp;&amp;(this._magnetUnderPointer&amp;&amp;this._viewUnderPointer.unhighlight(this._magnetUnderPointer),this._viewUnderPointer=this.paper.findView(k),this._viewUnderPointer?(this._magnetUnderPointer=this._viewUnderPointer.findMagnet(k),this._magnetUnderPointer&amp;&amp;this.paper.options.validateConnection.apply(this.paper,this._validateConnectionArgs(this._viewUnderPointer,this._magnetUnderPointer))?this._magnetUnderPointer&amp;&amp;this._viewUnderPointer.highlight(this._magnetUnderPointer):this._magnetUnderPointer=null):this._magnetUnderPointer=null),this._targetEvent=k,this.model.set(this._arrowhead,{x:b,y:c})}}this._dx=b,this._dy=c},pointerup:function(){joint.dia.CellView.prototype.pointerup.apply(this,arguments),&quot;arrowhead-move&quot;===this._action&amp;&amp;(this.paper.options.snapLinks?(this._closestView&amp;&amp;this._closestView.unhighlight(this._closestEnd.selector),this._closestView=this._closestEnd=null):(this._magnetUnderPointer&amp;&amp;(this._viewUnderPointer.unhighlight(this._magnetUnderPointer),this.model.set(this._arrowhead,{id:this._viewUnderPointer.model.id,selector:this._viewUnderPointer.getSelector(this._magnetUnderPointer),port:$(this._magnetUnderPointer).attr(&quot;port&quot;)})),delete this._viewUnderPointer,delete this._magnetUnderPointer,delete this._staticView,delete this._staticMagnet),this._afterArrowheadMove()),delete this._action}}),&quot;object&quot;==typeof exports&amp;&amp;(module.exports.Link=joint.dia.Link,module.exports.LinkView=joint.dia.LinkView),joint.dia.Paper=Backbone.View.extend({options:{width:800,height:600,gridSize:50,perpendicularLinks:!1,elementView:joint.dia.ElementView,linkView:joint.dia.LinkView,snapLinks:!1,defaultLink:new joint.dia.Link,validateMagnet:function(a,b){return&quot;passive&quot;!==b.getAttribute(&quot;magnet&quot;)},validateConnection:function(a,b,c,d,e){return(&quot;target&quot;===e?c:a)instanceof joint.dia.ElementView}},events:{mousedown:&quot;pointerdown&quot;,dblclick:&quot;mousedblclick&quot;,click:&quot;mouseclick&quot;,touchstart:&quot;pointerdown&quot;,mousemove:&quot;pointermove&quot;,touchmove:&quot;pointermove&quot;},initialize:function(){_.bindAll(this,&quot;addCell&quot;,&quot;sortCells&quot;,&quot;resetCells&quot;,&quot;pointerup&quot;),this.svg=V(&quot;svg&quot;).node,this.viewport=V(&quot;g&quot;).node,V(this.svg).append(V(&quot;defs&quot;).node),V(this.viewport).attr({&quot;class&quot;:&quot;viewport&quot;}),V(this.svg).append(this.viewport),this.$el.append(this.svg),this.setDimensions(),this.listenTo(this.model,&quot;add&quot;,this.addCell),this.listenTo(this.model,&quot;reset&quot;,this.resetCells),this.listenTo(this.model,&quot;sort&quot;,this.sortCells),$(document).on(&quot;mouseup touchend&quot;,this.pointerup),this._mousemoved=!1},remove:function(){$(document).off(&quot;mouseup touchend&quot;,this.pointerup),Backbone.View.prototype.remove.call(this)},setDimensions:function(a,b){a&amp;&amp;(this.options.width=a),b&amp;&amp;(this.options.height=b),V(this.svg).attr(&quot;width&quot;,this.options.width),V(this.svg).attr(&quot;height&quot;,this.options.height),this.trigger(&quot;resize&quot;)},fitToContent:function(a,b,c){a=a||1,b=b||1,c=c||0;var d=V(this.viewport).bbox(!0,this.svg),e=Math.ceil((d.width+d.x)/a)*a,f=Math.ceil((d.height+d.y)/b)*b;e+=c,f+=c,(e!=this.options.width||f!=this.options.height)&amp;&amp;this.setDimensions(e||this.options.width,f||this.options.height)},getContentBBox:function(){var a=this.viewport.getBoundingClientRect(),b=this.viewport.getScreenCTM(),c=g.rect(Math.abs(a.left-b.e),Math.abs(a.top-b.f),a.width,a.height);return c},createViewForModel:function(a){var b,c=a.get(&quot;type&quot;),d=c.split(&quot;.&quot;)[0],e=c.split(&quot;.&quot;)[1];return b=joint.shapes[d]&amp;&amp;joint.shapes[d][e+&quot;View&quot;]?new joint.shapes[d][e+&quot;View&quot;]({model:a,interactive:this.options.interactive}):a instanceof joint.dia.Element?new this.options.elementView({model:a,interactive:this.options.interactive}):new this.options.linkView({model:a,interactive:this.options.interactive})},addCell:function(a){var b=this.createViewForModel(a);V(this.viewport).append(b.el),b.paper=this,b.render(),$(b.el).find(&quot;image&quot;).on(&quot;dragstart&quot;,function(){return!1})},resetCells:function(a){$(this.viewport).empty();var b=a.models.slice();b.sort(function(a){return a instanceof joint.dia.Link?1:-1}),_.each(b,this.addCell,this),this.sortCells()},sortCells:function(){var a=$(this.viewport).children(&quot;[model-id]&quot;),b=this.model.get(&quot;cells&quot;);this.sortElements(a,function(a,c){var d=b.get($(a).attr(&quot;model-id&quot;)),e=b.get($(c).attr(&quot;model-id&quot;));return(d.get(&quot;z&quot;)||0)&gt;(e.get(&quot;z&quot;)||0)?1:-1})},sortElements:function(a,b){var c=$(a),d=c.map(function(){var a=this,b=a.parentNode,c=b.insertBefore(document.createTextNode(&quot;&quot;),a.nextSibling);return function(){if(b===this)throw new Error(&quot;You can&#39;t sort elements if any one is a descendant of another.&quot;);b.insertBefore(this,c),b.removeChild(c)}});return Array.prototype.sort.call(c,b).each(function(a){d[a].call(this)})},scale:function(a,b,c,d){return c||(c=0,d=0),V(this.viewport).attr(&quot;transform&quot;,&quot;&quot;),(c||d)&amp;&amp;V(this.viewport).translate(-c*(a-1),-d*(b-1)),V(this.viewport).scale(a,b),this.trigger(&quot;scale&quot;,c,d),this},rotate:function(a,b,c){if(_.isUndefined(b)){var d=this.viewport.getBBox();b=d.width/2,c=d.height/2}V(this.viewport).rotate(a,b,c)},findView:function(a){var b=this.$(a);return 0===b.length||b[0]===this.el?void 0:b.data(&quot;view&quot;)?b.data(&quot;view&quot;):this.findView(b.parent())},findViewByModel:function(a){var b=_.isString(a)?a:a.id,c=this.$(&#39;[model-id=&quot;&#39;+b+&#39;&quot;]&#39;);return c.length?c.data(&quot;view&quot;):void 0},findViewsFromPoint:function(a){a=g.point(a);var b=_.map(this.model.getElements(),this.findViewByModel);return _.filter(b,function(b){return g.rect(V(b.el).bbox(!1,this.viewport)).containsPoint(a)},this)},findViewsInArea:function(a){a=g.rect(a);var b=_.map(this.model.getElements(),this.findViewByModel);return _.filter(b,function(b){return a.intersect(g.rect(V(b.el).bbox(!1,this.viewport)))},this)},getModelById:function(a){return this.model.getCell(a)},snapToGrid:function(a){var b=V(this.viewport).toLocalPoint(a.x,a.y);return{x:g.snapToGrid(b.x,this.options.gridSize),y:g.snapToGrid(b.y,this.options.gridSize)}},getDefaultLink:function(a,b){return _.isFunction(this.options.defaultLink)?this.options.defaultLink.call(this,a,b):this.options.defaultLink.clone()},mousedblclick:function(a){a.preventDefault(),a=joint.util.normalizeEvent(a);var b=this.findView(a.target),c=this.snapToGrid({x:a.clientX,y:a.clientY});b?b.pointerdblclick(a,c.x,c.y):this.trigger(&quot;blank:pointerdblclick&quot;,a,c.x,c.y)},mouseclick:function(a){if(!this._mousemoved){a.preventDefault(),a=joint.util.normalizeEvent(a);var b=this.findView(a.target),c=this.snapToGrid({x:a.clientX,y:a.clientY});b?b.pointerclick(a,c.x,c.y):this.trigger(&quot;blank:pointerclick&quot;,a,c.x,c.y)}this._mousemoved=!1},pointerdown:function(a){a.preventDefault(),a=joint.util.normalizeEvent(a);var b=this.findView(a.target),c=this.snapToGrid({x:a.clientX,y:a.clientY});b?(this.sourceView=b,b.pointerdown(a,c.x,c.y)):this.trigger(&quot;blank:pointerdown&quot;,a,c.x,c.y)},pointermove:function(a){if(a.preventDefault(),a=joint.util.normalizeEvent(a),this.sourceView){this._mousemoved=!0;var b=this.snapToGrid({x:a.clientX,y:a.clientY});this.sourceView.pointermove(a,b.x,b.y)}},pointerup:function(a){a=joint.util.normalizeEvent(a);var b=this.snapToGrid({x:a.clientX,y:a.clientY});this.sourceView?(this.sourceView.pointerup(a,b.x,b.y),this.sourceView=null):this.trigger(&quot;blank:pointerup&quot;,a,b.x,b.y)}}),&quot;object&quot;==typeof exports)var joint={util:require(&quot;../src/core&quot;).util,shapes:{},dia:{Element:require(&quot;../src/joint.dia.element&quot;).Element,ElementView:require(&quot;../src/joint.dia.element&quot;).ElementView}},_=require(&quot;lodash&quot;);joint.shapes.basic={},joint.shapes.basic.Generic=joint.dia.Element.extend({defaults:joint.util.deepSupplement({type:&quot;basic.Generic&quot;,attrs:{&quot;.&quot;:{fill:&quot;#FFFFFF&quot;,stroke:&quot;none&quot;}}},joint.dia.Element.prototype.defaults)}),joint.shapes.basic.Rect=joint.shapes.basic.Generic.extend({markup:&#39;&lt;g class=&quot;rotatable&quot;&gt;&lt;g class=&quot;scalable&quot;&gt;&lt;rect/&gt;&lt;/g&gt;&lt;text/&gt;&lt;/g&gt;&#39;,defaults:joint.util.deepSupplement({type:&quot;basic.Rect&quot;,attrs:{rect:{fill:&quot;#FFFFFF&quot;,stroke:&quot;black&quot;,width:100,height:60},text:{&quot;font-size&quot;:14,text:&quot;&quot;,&quot;ref-x&quot;:.5,&quot;ref-y&quot;:.5,ref:&quot;rect&quot;,&quot;y-alignment&quot;:&quot;middle&quot;,&quot;x-alignment&quot;:&quot;middle&quot;,fill:&quot;black&quot;,&quot;font-family&quot;:&quot;Arial, helvetica, sans-serif&quot;}}},joint.shapes.basic.Generic.prototype.defaults)}),joint.shapes.basic.Text=joint.shapes.basic.Generic.extend({markup:&#39;&lt;g class=&quot;rotatable&quot;&gt;&lt;g class=&quot;scalable&quot;&gt;&lt;text/&gt;&lt;/g&gt;&lt;/g&gt;&#39;,defaults:joint.util.deepSupplement({type:&quot;basic.Text&quot;,attrs:{text:{&quot;font-size&quot;:18,fill:&quot;black&quot;}}},joint.shapes.basic.Generic.prototype.defaults)}),joint.shapes.basic.Circle=joint.shapes.basic.Generic.extend({markup:&#39;&lt;g class=&quot;rotatable&quot;&gt;&lt;g class=&quot;scalable&quot;&gt;&lt;circle/&gt;&lt;/g&gt;&lt;text/&gt;&lt;/g&gt;&#39;,defaults:joint.util.deepSupplement({type:&quot;basic.Circle&quot;,size:{width:60,height:60},attrs:{circle:{fill:&quot;#FFFFFF&quot;,stroke:&quot;black&quot;,r:30,transform:&quot;translate(30, 30)&quot;},text:{&quot;font-size&quot;:14,text:&quot;&quot;,&quot;text-anchor&quot;:&quot;middle&quot;,&quot;ref-x&quot;:.5,&quot;ref-y&quot;:.5,ref:&quot;circle&quot;,&quot;y-alignment&quot;:&quot;middle&quot;,fill:&quot;black&quot;,&quot;font-family&quot;:&quot;Arial, helvetica, sans-serif&quot;}}},joint.shapes.basic.Generic.prototype.defaults)}),joint.shapes.basic.Image=joint.shapes.basic.Generic.extend({markup:&#39;&lt;g class=&quot;rotatable&quot;&gt;&lt;g class=&quot;scalable&quot;&gt;&lt;image/&gt;&lt;/g&gt;&lt;text/&gt;&lt;/g&gt;&#39;,defaults:joint.util.deepSupplement({type:&quot;basic.Image&quot;,attrs:{text:{&quot;font-size&quot;:14,text:&quot;&quot;,&quot;text-anchor&quot;:&quot;middle&quot;,&quot;ref-x&quot;:.5,&quot;ref-dy&quot;:20,ref:&quot;image&quot;,&quot;y-alignment&quot;:&quot;middle&quot;,fill:&quot;black&quot;,&quot;font-family&quot;:&quot;Arial, helvetica, sans-serif&quot;}}},joint.shapes.basic.Generic.prototype.defaults)}),joint.shapes.basic.Path=joint.shapes.basic.Generic.extend({markup:&#39;&lt;g class=&quot;rotatable&quot;&gt;&lt;g class=&quot;scalable&quot;&gt;&lt;path/&gt;&lt;/g&gt;&lt;text/&gt;&lt;/g&gt;&#39;,defaults:joint.util.deepSupplement({type:&quot;basic.Path&quot;,size:{width:60,height:60},attrs:{path:{fill:&quot;#FFFFFF&quot;,stroke:&quot;black&quot;},text:{&quot;font-size&quot;:14,text:&quot;&quot;,&quot;text-anchor&quot;:&quot;middle&quot;,&quot;ref-x&quot;:.5,&quot;ref-dy&quot;:20,ref:&quot;path&quot;,&quot;y-alignment&quot;:&quot;middle&quot;,fill:&quot;black&quot;,&quot;font-family&quot;:&quot;Arial, helvetica, sans-serif&quot;}}},joint.shapes.basic.Generic.prototype.defaults)}),joint.shapes.basic.PortsModelInterface={initialize:function(){this.updatePortsAttrs(),this.on(&quot;change:inPorts change:outPorts&quot;,this.updatePortsAttrs,this),this.constructor.__super__.constructor.__super__.initialize.apply(this,arguments)},updatePortsAttrs:function(){var a=this.get(&quot;attrs&quot;);_.each(this._portSelectors,function(b){a[b]&amp;&amp;delete a[b]}),this._portSelectors=[];var b={};_.each(this.get(&quot;inPorts&quot;),function(a,c,d){var e=this.getPortAttrs(a,c,d.length,&quot;.inPorts&quot;,&quot;in&quot;);this._portSelectors=this._portSelectors.concat(_.keys(e)),_.extend(b,e)},this),_.each(this.get(&quot;outPorts&quot;),function(a,c,d){var e=this.getPortAttrs(a,c,d.length,&quot;.outPorts&quot;,&quot;out&quot;);this._portSelectors=this._portSelectors.concat(_.keys(e)),_.extend(b,e)},this),this.attr(b,{silent:!0}),this.processPorts(),this.trigger(&quot;process:ports&quot;)},getPortSelector:function(a){var b=&quot;.inPorts&quot;,c=this.get(&quot;inPorts&quot;).indexOf(a);if(0&gt;c&amp;&amp;(b=&quot;.outPorts&quot;,c=this.get(&quot;outPorts&quot;).indexOf(a),0&gt;c))throw new Error(&quot;getPortSelector(): Port doesn&#39;t exist.&quot;);return b+&quot;&gt;g:nth-child(&quot;+(c+1)+&quot;)&gt;circle&quot;}},joint.shapes.basic.PortsViewInterface={initialize:function(){this.listenTo(this.model,&quot;process:ports&quot;,this.update),joint.dia.ElementView.prototype.initialize.apply(this,arguments)},update:function(){this.renderPorts(),joint.dia.ElementView.prototype.update.apply(this,arguments)},renderPorts:function(){var a=this.$(&quot;.inPorts&quot;).empty(),b=this.$(&quot;.outPorts&quot;).empty(),c=_.template(this.model.portMarkup);_.each(_.filter(this.model.ports,function(a){return&quot;in&quot;===a.type}),function(b,d){a.append(V(c({id:d,port:b})).node)}),_.each(_.filter(this.model.ports,function(a){return&quot;out&quot;===a.type}),function(a,d){b.append(V(c({id:d,port:a})).node)})}},joint.shapes.basic.TextBlock=joint.shapes.basic.Generic.extend({markup:[&#39;&lt;g class=&quot;rotatable&quot;&gt;&lt;g class=&quot;scalable&quot;&gt;&lt;rect/&gt;&lt;/g&gt;&lt;switch&gt;&#39;,&#39;&lt;foreignObject requiredFeatures=&quot;http://www.w3.org/TR/SVG11/feature#Extensibility&quot; class=&quot;fobj&quot;&gt;&#39;,&#39;&lt;body xmlns=&quot;http://www.w3.org/1999/xhtml&quot;&gt;&lt;div/&gt;&lt;/body&gt;&#39;,&quot;&lt;/foreignObject&gt;&quot;,&#39;&lt;text class=&quot;content&quot;/&gt;&#39;,&quot;&lt;/switch&gt;&lt;/g&gt;&quot;].join(&quot;&quot;),defaults:joint.util.deepSupplement({type:&quot;basic.TextBlock&quot;,attrs:{rect:{fill:&quot;#ffffff&quot;,stroke:&quot;#000000&quot;,width:80,height:100},text:{fill:&quot;#000000&quot;,&quot;font-size&quot;:14,&quot;font-family&quot;:&quot;Arial, helvetica, sans-serif&quot;},&quot;.content&quot;:{text:&quot;&quot;,ref:&quot;rect&quot;,&quot;ref-x&quot;:.5,&quot;ref-y&quot;:.5,&quot;y-alignment&quot;:&quot;middle&quot;,&quot;x-alignment&quot;:&quot;middle&quot;}},content:&quot;&quot;},joint.shapes.basic.Generic.prototype.defaults),initialize:function(){&quot;undefined&quot;!=typeof SVGForeignObjectElement&amp;&amp;(this.setForeignObjectSize(this,this.get(&quot;size&quot;)),this.setDivContent(this,this.get(&quot;content&quot;)),this.listenTo(this,&quot;change:size&quot;,this.setForeignObjectSize),this.listenTo(this,&quot;change:content&quot;,this.setDivContent)),joint.shapes.basic.Generic.prototype.initialize.apply(this,arguments)},setForeignObjectSize:function(a,b){a.attr({&quot;.fobj&quot;:_.clone(b),div:{style:_.clone(b)}})},setDivContent:function(a,b){a.attr({div:{html:b}})}}),joint.shapes.basic.TextBlockView=joint.dia.ElementView.extend({initialize:function(){joint.dia.ElementView.prototype.initialize.apply(this,arguments),&quot;undefined&quot;==typeof SVGForeignObjectElement&amp;&amp;(this.noSVGForeignObjectElement=!0,this.listenTo(this.model,&quot;change:content&quot;,function(a){this.updateContent(a)}))},update:function(a,b){if(this.noSVGForeignObjectElement){var c=this.model,d=_.omit(b||c.get(&quot;attrs&quot;),&quot;.content&quot;);joint.dia.ElementView.prototype.update.call(this,c,d),(!b||_.has(b,&quot;.content&quot;))&amp;&amp;this.updateContent(c,b)}else joint.dia.ElementView.prototype.update.call(this,c,b)},updateContent:function(a,b){var c=_.merge({},(b||a.get(&quot;attrs&quot;))[&quot;.content&quot;]);delete c.text;var d=joint.util.breakText(a.get(&quot;content&quot;),a.get(&quot;size&quot;),c,{svgDocument:this.paper.svg}),e=joint.util.setByPath({},&quot;.content&quot;,c,&quot;/&quot;);e[&quot;.content&quot;].text=d,joint.dia.ElementView.prototype.update.call(this,a,e)}}),&quot;object&quot;==typeof exports&amp;&amp;(module.exports=joint.shapes.basic),joint.routers.orthogonal=function(){function a(a,b){return a.y&lt;b.y&amp;&amp;a.x===b.x?&quot;down&quot;:a.y&gt;b.y&amp;&amp;a.x===b.x?&quot;up&quot;:a.x&lt;b.x&amp;&amp;a.y===b.y?&quot;right&quot;:&quot;left&quot;}function b(a,b,c){var d;if(d=a.x&lt;b.x?a.y&gt;b.y?[&quot;up&quot;,&quot;right&quot;]:a.y&lt;b.y?[&quot;down&quot;,&quot;right&quot;]:[&quot;right&quot;]:a.x&gt;b.x?a.y&gt;b.y?[&quot;up&quot;,&quot;left&quot;]:a.y&lt;b.y?[&quot;down&quot;,&quot;left&quot;]:[&quot;left&quot;]:a.y&gt;b.y?[&quot;up&quot;]:[&quot;down&quot;],_.contains(d,c))return c;var e=_.first(d);switch(c){case&quot;down&quot;:if(&quot;up&quot;===e)return _.last(d);break;case&quot;up&quot;:if(&quot;down&quot;===e)return _.last(d);break;case&quot;left&quot;:if(&quot;right&quot;===e)return _.last(d);break;case&quot;right&quot;:if(&quot;left&quot;===e)return _.last(d)}return e}function c(a,c,d){var e=b(a,c,d);return&quot;down&quot;===e||&quot;up&quot;===e?{x:a.x,y:c.y,d:e}:{x:c.x,y:a.y,d:e}}function d(b){b=(b||[]).slice();var d=[],h=e.center(),i=f.center();b.length||(Math.abs(h.x-i.x)&lt;e.width/2||Math.abs(h.y-i.y)&lt;e.height/2)&amp;&amp;(b=[{x:Math.min(h.x,i.x)+Math.abs(h.x-i.x)/2,y:Math.min(h.y,i.y)+Math.abs(h.y-i.y)/2}]),b.unshift(h),b.push(i);for(var j,k,l,m,n=0;n&lt;b.length-1;n++){l=b[n],m=b[n+1],k=_.last(d),n&gt;0&amp;&amp;(j=l,j.d=k?a(k,l):&quot;top&quot;,d.push(j),k=j);var o=k&amp;&amp;k.d;j=c(l,m,o),g.point(j).equals(g.point(l))||g.point(j).equals(g.point(m))||d.push(j)}return d}var e,f;return function(a){return e=this.sourceBBox,f=this.targetBBox,d(a)}}(),joint.routers.manhattan=function(){&quot;use strict&quot;;function a(a,b){for(var c,d=[],e={x:0,y:0},f=b;c=a[f];){var g=c.difference(f);g.equals(e)||(d.unshift(f),e=g),f=c}return d.unshift(f),d}function b(a,b,c){var d=c.step,e=a.center(),f=_.chain(c.directionMap).pick(b).map(function(b){var c=b.x*a.width/2,f=b.y*a.height/2,h=g.point(e).offset(c,f).snapToGrid(d);return a.containsPoint(h)&amp;&amp;h.offset(b.x*d,b.y*d),h}).value();return f}function c(a,b,c){var d=360/c,e=Math.floor(a.theta(b)/d);return c-e}function d(d,e,f,h){var i=h.reversed?h.endDirections:h.startDirections,j=h.reversed?h.startDirections:h.endDirections,k=d instanceof g.rect?b(d,i,h):[d],l=e instanceof g.rect?b(e,j,h):[e],m=k.length&gt;1?d.center():k[0],n=l.length&gt;1?e.center():l[0],o=_.filter(l,function(a){var b=g.point(a).snapToGrid(h.mapGridSize).toString(),c=_.every(f[b],function(b){return!b.containsPoint(a)});return c});if(o.length)for(var p=h.step,q=h.penalties,r=_.chain(o).invoke(&quot;snapToGrid&quot;,p).min(function(a){return h.estimateCost(m,a)}).value(),s={},t={},u={},v=h.directions,w=v.length,x=w/2,y=h.previousDirIndexes||{},z={},A={},B=_.chain(k).invoke(&quot;snapToGrid&quot;,p).each(function(a){var b=a.toString();t[b]=0,u[b]=h.estimateCost(a,r),y[b]=y[b]||c(m,a,w),A[b]=!0}).map(function(a){return a.toString()}).sortBy(function(a){return u[a]}).value(),C=h.maximumLoops,D=h.maxAllowedDirectionChange;B.length&amp;&amp;C--;){var E=B[0],F=g.point(E);if(r.equals(F))return h.previousDirIndexes=_.pick(y,E),a(s,F);B.splice(0,1),A[M]=null,z[M]=!0;for(var G=y[E],H=t[E],I=0;w&gt;I;I++){var J=Math.abs(I-G);if(J&gt;x&amp;&amp;(J=w-J),!(J&gt;D)){var K=v[I],L=g.point(F).offset(K.offsetX,K.offsetY),M=L.toString();if(!z[M]){var N=g.point(L).snapToGrid(h.mapGridSize).toString(),O=_.every(f[N],function(a){return!a.containsPoint(L)});if(O){var P=_.has(A,M),Q=H+K.cost;if((!P||Q&lt;t[M])&amp;&amp;(s[M]=F,y[M]=I,t[M]=Q,u[M]=Q+h.estimateCost(L,r)+q[J],!P)){var R=_.sortedIndex(B,M,function(a){return u[a]});B.splice(R,0,M),A[M]=!0}}}}}}return h.fallbackRoute(m,n,h)}function e(a,b){b.directions=_.result(b,&quot;directions&quot;),b.penalties=_.result(b,&quot;penalties&quot;),b.paddingBox=_.result(b,&quot;paddingBox&quot;),this.options.perpendicular=!!b.perpendicular;var c=b.reversed=&quot;source&quot;===this.lastEndChange,e=c?g.rect(this.targetBBox):g.rect(this.sourceBBox),f=c?g.rect(this.sourceBBox):g.rect(this.targetBBox);e.moveAndExpand(b.paddingBox),f.moveAndExpand(b.paddingBox);for(var h=this.model,i=this.paper.model,j=_.chain(b.excludeEnds).map(h.get,h).pluck(&quot;id&quot;).map(i.getCell,i).value(),k=b.mapGridSize,l=_.chain(i.getElements()).difference(j).reject(function(a){return _.contains(b.excludeTypes,a.get(&quot;type&quot;))}).invoke(&quot;getBBox&quot;).invoke(&quot;moveAndExpand&quot;,b.paddingBox).foldl(function(a,b){for(var c=b.origin().snapToGrid(k),d=b.corner().snapToGrid(k),e=c.x;e&lt;=d.x;e+=k)for(var f=c.y;f&lt;=d.y;f+=k){var g=e+&quot;@&quot;+f;a[g]=a[g]||[],a[g].push(b)}return a},{}).value(),m=[],n=_.map(a,g.point),o=e.center(),p=0,q=n.length;q&gt;=p;p++){var r=null,s=t||e,t=n[p];if(!t){t=f;var u=!this.model.get(&quot;source&quot;).id||!this.model.get(&quot;target&quot;).id;if(u&amp;&amp;_.isFunction(b.draggingRoute)){var v=s instanceof g.rect?s.center():s;r=b.draggingRoute(v,t.origin(),b)}}r=r||d(s,t,l,b);var w=_.first(r);w&amp;&amp;w.equals(o)&amp;&amp;r.shift(),o=_.last(r)||o,m=m.concat(r)}return c?m.reverse():m}var f={step:10,perpendicular:!0,mapGridSize:100,excludeEnds:[],excludeTypes:[&quot;basic.Text&quot;],maximumLoops:500,startDirections:[&quot;left&quot;,&quot;right&quot;,&quot;top&quot;,&quot;bottom&quot;],endDirections:[&quot;left&quot;,&quot;right&quot;,&quot;top&quot;,&quot;bottom&quot;],directionMap:{right:{x:1,y:0},bottom:{x:0,y:1},left:{x:-1,y:0},top:{x:0,y:-1}},maxAllowedDirectionChange:1,paddingBox:function(){var a=this.step;return{x:-a,y:-a,width:2*a,height:2*a}},directions:function(){var a=this.step;return[{offsetX:a,offsetY:0,cost:a},{offsetX:0,offsetY:a,cost:a},{offsetX:-a,offsetY:0,cost:a},{offsetX:0,offsetY:-a,cost:a}]},penalties:function(){return[0,this.step/2,this.step]},estimateCost:function(a,b){return a.manhattanDistance(b)},fallbackRoute:function(a,b,c){var d=c.prevDirIndexes||{},e=(d[a]||0)%2?g.point(a.x,b.y):g.point(b.x,a.y);return[e,b]},draggingRoute:null};return function(a,b,c){return e.call(c,a,_.extend({},f,b))}}(),joint.routers.metro=function(){if(!_.isFunction(joint.routers.manhattan))throw&quot;Metro requires the manhattan router.&quot;;var a={diagonalCost:null,directions:function(){var a=this.step,b=this.diagonalCost||Math.ceil(Math.sqrt(a*a&lt;&lt;1));return[{offsetX:a,offsetY:0,cost:a},{offsetX:a,offsetY:a,cost:b},{offsetX:0,offsetY:a,cost:a},{offsetX:-a,offsetY:a,cost:b},{offsetX:-a,offsetY:0,cost:a},{offsetX:-a,offsetY:-a,cost:b},{offsetX:0,offsetY:-a,cost:a},{offsetX:a,offsetY:-a,cost:b}]},fallbackRoute:function(a,b){var c=a.theta(b),d={x:b.x,y:a.y},e={x:a.x,y:b.y};if(c%180&gt;90){var f=d;d=e,e=f}var h=45&gt;c%90?d:e,i=g.line(a,h),j=90*Math.ceil(c/90),k=g.point.fromPolar(i.squaredLength(),g.toRad(j+135),h),l=g.line(b,k),m=i.intersection(l);return m?[m.round(),b]:[b]}};return function(b,c,d){return joint.routers.manhattan(b,_.extend({},a,c),d)}}(),joint.connectors.normal=function(a,b,c){var d=[&quot;M&quot;,a.x,a.y];return _.each(c,function(a){d.push(a.x,a.y)}),d.push(b.x,b.y),d.join(&quot; &quot;)},joint.connectors.rounded=function(a,b,c,d){var e,f,h,i,j,k,l=d.radius||10,m=[&quot;M&quot;,a.x,a.y];return _.each(c,function(d,n){j=c[n-1]||a,k=c[n+1]||b,h=i||g.point(d).distance(j)/2,i=g.point(d).distance(k)/2,e=g.point(d).move(j,-Math.min(l,h)).round(),f=g.point(d).move(k,-Math.min(l,i)).round(),m.push(e.x,e.y,&quot;S&quot;,d.x,d.y,f.x,f.y,&quot;L&quot;)}),m.push(b.x,b.y),m.join(&quot; &quot;)},joint.connectors.smooth=function(a,b,c){var d;if(c.length)d=g.bezier.curveThroughPoints([a].concat(c).concat([b]));else{var e=a.x&lt;b.x?b.x-(b.x-a.x)/2:a.x-(a.x-b.x)/2;d=[&quot;M&quot;,a.x,a.y,&quot;C&quot;,e,a.y,e,b.y,b.x,b.y]}return d.join(&quot; &quot;)};</div></pre></div></td>
          </tr>
        </table>
  </div>

  </div>
</div>

<a href="#jump-to-line" rel="facebox[.linejump]" data-hotkey="l" class="js-jump-to-line" style="display:none">Jump to Line</a>
<div id="jump-to-line" style="display:none">
  <form accept-charset="UTF-8" class="js-jump-to-line-form">
    <input class="linejump-input js-jump-to-line-field" type="text" placeholder="Jump to line&hellip;" autofocus>
    <button type="submit" class="button">Go</button>
  </form>
</div>

        </div>

      </div><!-- /.repo-container -->
      <div class="modal-backdrop"></div>
    </div><!-- /.container -->
  </div><!-- /.site -->


    </div><!-- /.wrapper -->

      <div class="container">
  <div class="site-footer">
    <ul class="site-footer-links right">
      <li><a href="https://status.github.com/">Status</a></li>
      <li><a href="http://developer.github.com">API</a></li>
      <li><a href="http://training.github.com">Training</a></li>
      <li><a href="http://shop.github.com">Shop</a></li>
      <li><a href="/blog">Blog</a></li>
      <li><a href="/about">About</a></li>

    </ul>

    <a href="/">
      <span class="mega-octicon octicon-mark-github" title="GitHub"></span>
    </a>

    <ul class="site-footer-links">
      <li>&copy; 2014 <span title="0.04024s from github-fe123-cp1-prd.iad.github.net">GitHub</span>, Inc.</li>
        <li><a href="/site/terms">Terms</a></li>
        <li><a href="/site/privacy">Privacy</a></li>
        <li><a href="/security">Security</a></li>
        <li><a href="/contact">Contact</a></li>
    </ul>
  </div><!-- /.site-footer -->
</div><!-- /.container -->


    <div class="fullscreen-overlay js-fullscreen-overlay" id="fullscreen_overlay">
  <div class="fullscreen-container js-fullscreen-container">
    <div class="textarea-wrap">
      <textarea name="fullscreen-contents" id="fullscreen-contents" class="fullscreen-contents js-fullscreen-contents" placeholder="" data-suggester="fullscreen_suggester"></textarea>
    </div>
  </div>
  <div class="fullscreen-sidebar">
    <a href="#" class="exit-fullscreen js-exit-fullscreen tooltipped tooltipped-w" aria-label="Exit Zen Mode">
      <span class="mega-octicon octicon-screen-normal"></span>
    </a>
    <a href="#" class="theme-switcher js-theme-switcher tooltipped tooltipped-w"
      aria-label="Switch themes">
      <span class="octicon octicon-color-mode"></span>
    </a>
  </div>
</div>



    <div id="ajax-error-message" class="flash flash-error">
      <span class="octicon octicon-alert"></span>
      <a href="#" class="octicon octicon-x close js-ajax-error-dismiss"></a>
      Something went wrong with that request. Please try again.
    </div>


      <script crossorigin="anonymous" src="https://assets-cdn.github.com/assets/frameworks-5bef6dacd990ce272ec009917ceea0b9d96f84b7.js" type="text/javascript"></script>
      <script async="async" crossorigin="anonymous" src="https://assets-cdn.github.com/assets/github-1b13ad871c0387dc91be6a720577ab10d28b22af.js" type="text/javascript"></script>
      
      
  </body>
</html>

